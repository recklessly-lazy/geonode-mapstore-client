(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[52210],{51273:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var r=i(949179),o=i(919629),a=i(179682),n=i(613002),s=i(9520),l=i(436403),h=i(864011),u=i(28795),c=i(247588),p=i(429902),_=i(913580),d=i(973410),f=i(831219),y=function(t){function e(e,i,r,o){t.call(this,e),this.selected=i,this.deselected=r,this.mapBrowserEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.ZP);function v(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),r=this.toggleCondition_(t),o=!e&&!i&&!r,n=t.map,s=this.getFeatures(),h=[],u=[];if(o){(0,_.ZH)(this.featureLayerAssociation_),n.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return u.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=s.getLength()-1;c>=0;--c){var p=s.item(c),d=u.indexOf(p);d>-1?u.splice(d,1):(s.remove(p),h.push(p))}0!==u.length&&s.extend(u)}else{n.forEachFeatureAtPixel(t.pixel,function(t,o){if(this.filter_(t,o))return!e&&!r||(0,a.q9)(s.getArray(),t)?(i||r)&&(0,a.q9)(s.getArray(),t)&&(h.push(t),this.removeFeatureLayerAssociation_(t)):(u.push(t),this.addFeatureLayerAssociation_(t,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=h.length-1;f>=0;--f)s.remove(h[f]);s.extend(u)}return(u.length>0||h.length>0)&&this.dispatchEvent(new y("select",u,h,t)),(0,l.MJ)(t)}const g=function(t){function e(e){t.call(this,{handleEvent:v});var i=e||{};this.condition_=i.condition?i.condition:l.Kf,this.addCondition_=i.addCondition?i.addCondition:l.Fi,this.removeCondition_=i.removeCondition?i.removeCondition:l.Fi,this.toggleCondition_=i.toggleCondition?i.toggleCondition:l.vY,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:h.uX,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var r,s,c=new p.Z({source:new d.Z({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:(s=(0,f.createEditingStyle)(),(0,a.l7)(s[u.Z.POLYGON],s[u.Z.LINE_STRING]),(0,a.l7)(s[u.Z.GEOMETRY_COLLECTION],s[u.Z.LINE_STRING]),function(t,e){return t.getGeometry()?s[t.getGeometry().getType()]:null}),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=c,i.layers)if("function"==typeof i.layers)r=i.layers;else{var _=i.layers;r=function(t){return(0,a.q9)(_,t)}}else r=h.uX;this.layerFilter_=r,this.featureLayerAssociation_={};var y=this.getFeatures();(0,n.oL)(y,o.Z.ADD,this.addFeature_,this),(0,n.oL)(y,o.Z.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[(0,r.sq)(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[(0,r.sq)(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap(),r=this.getFeatures();i&&r.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&r.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[(0,r.sq)(t)]},e}(c.ZP)},829194:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p});var r=i(378426),o=i(558493),a=i(613002),n=i(9520),s=i(864011),l=i(179682),h=i(938024),u=i(173604),c=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.coordinate=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n.ZP);const p=function(t){function e(e){var i,r=e||{};if(t.call(this,r),this.lastCoordinate_=null,this.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var n=r.layers;i=function(t){return(0,l.q9)(n,t)}}else i=s.uX;this.layerFilter_=i,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0,this.lastFeature_=null,(0,a.oL)(this,(0,o.v_)(u.Z.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new r.Z([this.lastFeature_]);return this.dispatchEvent(new c("translatestart",e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new r.Z([this.lastFeature_]);return this.dispatchEvent(new c("translateend",e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],o=e[1]-this.lastCoordinate_[1],a=this.features_||new r.Z([this.lastFeature_]);a.forEach((function(t){var e=t.getGeometry();e.translate(i,o),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new c("translating",a,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||(0,l.q9)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(h.Z)}}]);