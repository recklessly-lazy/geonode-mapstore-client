(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[53519],{53519:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ne});var n=r(24852),o=r.n(n),a=(r(7169),r(93379)),i=r.n(a),l=r(78382);i()(l.Z,{insert:"head",singleton:!1}),l.Z.locals;var s=r(9582),u=r(37163),c=r(89265),m=r.n(c),p=r(17247),d=r.n(p),f=r(93451),b=r(75263),g=r.n(b),h=r(43129),v=r(27418),y=r.n(v),E=r(23570),w=r.n(E),O=r(78718),S=r.n(O),P=r(57557),j=r.n(P),x=r(27361),T=r.n(x),C=r(3674),k=r.n(C),A=r(81763),D=r.n(A),I=r(51584),N=r.n(I),Z=r(5346),z=r(94745),F=r(80681),R=r(38560),U=r(71335),L=r(86638),_=r(15135),B=["label"];function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function G(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ee(n.key),n)}}function X(e,t,r){return t=K(t),function(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}(e,J()?Reflect.construct(t,r||[],K(e).constructor):t.apply(e,r))}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function Y(e,t,r){return(t=ee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:String(t)}var te=(0,_.Z)(R.Z),re=(0,f.Z)("placeholder")(s.Editor),ne=function(e){function t(e){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(Q(n=X(this,t,[e])),"state",{title:"",format:"image/png",thumbnail:{},additionalParameters:[],credits:{}}),Y(Q(n),"assignParameters",(function(e){return k()(e).map((function(t,r){var n=e[t],o=D()(n)?"number":N()(n)?"boolean":"string";return{id:r,param:t,type:o,val:"string"===o?n?n.toString():"":n}}))})),Y(Q(n),"addAdditionalParameter",(function(e,t,r,o){n.setState({additionalParameters:n.state.additionalParameters.map((function(n){if(n.id===r){var a;if("val"===t)switch(o){case"number":(a=Number(e))&&!isNaN(a)||(a=0);break;case"boolean":a=!N()(e)||e;break;default:a=e?e.toString():""}else a=e;return y()({},n,Y(Y({},t,a),"type",o))}return n}))})})),Y(Q(n),"resetParameters",(function(){return n.setState({additionalParameters:[]})}));var o=S()(n.props,"title","format","style","thumbnail","credits"),a=(null==o||null===(r=o.credits)||void 0===r?void 0:r.title)||"",i=d()(a),l=u.ContentState.createFromBlockArray(i.contentBlocks),s=u.EditorState.createWithContent(l),c=y()({},o,{additionalParameters:n.assignParameters(n.props.additionalParameters),editorState:s});return n.state=c,n}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),r=t,(n=[{key:"onEditorStateChange",value:function(e){this.setState(W(W({},this.state),{},{editorState:e}))}},{key:"renderStyleSelector",value:function(){var e=this;return this.props.capabilities?o().createElement(F.FormGroup,null,o().createElement(F.ControlLabel,null,o().createElement(Z.Z,{msgId:"layerProperties.style"})),o().createElement(h.ZP,{onChange:function(t){return e.setState({style:t?t.value:void 0})},clearable:!0,value:this.state.style,options:(this.props.capabilities.availableStyles||[]).map((function(e){var t=e.name;return{label:t,value:t}}))})):null}},{key:"renderThumbnailErrors",value:function(){var e={FORMAT:o().createElement(Z.Z,{msgId:"map.errorFormat"}),SIZE:o().createElement(Z.Z,{msgId:"map.errorSize"})};return this.state.thumbnailErrors&&this.state.thumbnailErrors.length>0?o().createElement("div",{className:"dropzone-errorBox alert-danger"},o().createElement("p",null,o().createElement(Z.Z,{msgId:"map.error"})),this.state.thumbnailErrors.map((function(t){return o().createElement("div",{id:"error"+t,key:"error"+t,className:"error"+t},e[t])}))):null}},{key:"renderSpecificTypeForm",value:function(){var e=this;return"wms"===this.props.layer.type?o().createElement(o().Fragment,null,o().createElement(F.FormGroup,{controlId:"formControlsSelect"},o().createElement(F.ControlLabel,null,o().createElement(Z.Z,{msgId:"layerProperties.format.title"})),o().createElement(h.ZP,{onChange:function(t){return e.setState({format:t&&t.value})},value:this.state.format||this.props.defaultFormat,clearable:!0,options:this.props.formatOptions})),this.renderStyleSelector(),o().createElement(te,null,o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement(F.ControlLabel,{style:{flex:1}},o().createElement(Z.Z,{msgId:"backgroundDialog.additionalParameters"})),o().createElement(te,{className:"square-button-md",tooltipId:"backgroundDialog.addAdditionalParameterTooltip",style:{borderColor:"transparent"},onClick:function(){var t=Math.max.apply(Math,G(e.state.additionalParameters.length>0?e.state.additionalParameters.map((function(e){return e.id})):[-1]))+1;e.setState({additionalParameters:[].concat(G(e.state.additionalParameters),[{id:t,type:"string",param:"",val:""}])})}},o().createElement(F.Glyphicon,{glyph:"plus"}))),this.state.additionalParameters.map((function(t){return o().createElement("div",{key:"val:"+t.id,style:{display:"flex",marginTop:8}},o().createElement("div",{style:{display:"flex",flex:1,marginRight:8}},o().createElement(F.FormControl,{style:{width:"50%",marginRight:8,minWidth:0},placeholder:(0,L.S$)(e.context.messages,"backgroundDialog.parameter"),value:t.param,onChange:function(r){return e.addAdditionalParameter(r.target.value,"param",t.id,t.type)}}),"boolean"===t.type?o().createElement("div",{style:{width:"50%"}},o().createElement(h.ZP,{onChange:function(r){return e.addAdditionalParameter(r.value,"val",t.id,t.type)},clearable:!1,value:t.val,options:e.props.booleanOptions})):o().createElement(F.FormControl,{style:{width:"50%",minWidth:0},placeholder:(0,L.S$)(e.context.messages,"backgroundDialog.value"),value:t.val.toString(),onChange:function(r){return e.addAdditionalParameter(r.target.value,"val",t.id,t.type)}})),o().createElement(h.ZP,{style:{flex:1,width:90},onChange:function(r){return e.addAdditionalParameter(t.val,"val",t.id,r.value)},clearable:!1,value:t.type,options:e.props.parameterTypeOptions.map((function(t){var r=t.label;return W(W({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,B)),{},{label:(0,L.S$)(e.context.messages,r)})}))}),o().createElement(te,{onClick:function(){return e.setState({additionalParameters:e.state.additionalParameters.filter((function(e){return t.id!==e.id}))})},tooltipId:"backgroundDialog.removeAdditionalParameterTooltip",className:"square-button-md",style:{borderColor:"transparent"}},o().createElement(F.Glyphicon,{glyph:"trash"})))})))):"wmts"===this.props.layer.type?o().createElement(o().Fragment,null,o().createElement(F.FormGroup,{controlId:"formControlsSelect"},o().createElement(F.ControlLabel,null,o().createElement(Z.Z,{msgId:"backgroundDialog.editAttribution"})),o().createElement(re,{editorState:this.state.editorState,editorClassName:"ms2 form-control",toolbarClassName:"bg-dialog-attribution-toolbar",onEditorStateChange:this.onEditorStateChange.bind(this),placeholder:"backgroundDialog.editAttributionPlaceholder",toolbar:{options:["inline","blockType","link","remove"],inline:{options:["bold","italic","underline","strikethrough"]},blockType:{inDropDown:!0,options:["Normal","H5"]},link:{inDropDown:!0,options:["link","unlink"]}}}))):null}},{key:"render",value:function(){var e=this;return o().createElement(z.Z,{fitContent:!0,title:o().createElement(Z.Z,{msgId:this.props.editing?"backgroundDialog.editTitle":"backgroundDialog.addTitle"}),show:!0,fade:!0,clickOutEnabled:!1,bodyClassName:"ms-flex modal-properties-container background-dialog",loading:this.props.loading,onClose:function(){e.props.onClose(),e.resetParameters()},buttons:this.props.loading?[]:[{text:o().createElement(Z.Z,{msgId:this.props.editing?"save":"backgroundDialog.add"}),bsStyle:"primary",onClick:function(){var t=e.props.editing?e.props.layer.id:w()(),r=e.props.layer.thumbURL||"",n=e.state.format||e.props.defaultFormat,o=m()((0,u.convertToRaw)(e.state.editorState.getCurrentContent()));e.props.updateThumbnail(e.state.thumbnail.data,t),e.props.onSave(y()({},e.props.layer,j()(e.state,"thumbnail"),e.props.editing?{}:{id:t},{params:j()(e.state.additionalParameters.reduce((function(e,t){return y()(e,Y({},t.param,t.val))}),{}),["source","title"]),format:n,credits:W(W({},e.state.credits),{},{title:o}),group:"background"},r||e.state.thumbnail.data?{thumbURL:e.state.thumbnail.url}:{})),e.resetParameters()}}]},o().createElement(F.Form,{style:{width:"100%"}},this.renderThumbnailErrors(),o().createElement(U.Z,{onUpdate:function(t,r){return e.setState({thumbnail:{data:t,url:r}})},onError:function(t){return e.setState({thumbnailErrors:t})},message:o().createElement(Z.Z,{msgId:"backgroundDialog.thumbnailMessage"}),suggestion:"",map:{newThumbnail:T()(this.state.thumbnail,"url")||"NODATA"}}),o().createElement(F.FormGroup,null,o().createElement(F.ControlLabel,null,o().createElement(Z.Z,{msgId:"layerProperties.title"})),o().createElement(F.FormControl,{value:this.state.title,placeholder:(0,L.S$)(this.context.messages,"backgroundDialog.titlePlaceholder"),onChange:function(t){return e.setState({title:t.target.value})}})),this.renderSpecificTypeForm()))}}])&&H(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);Y(ne,"propTypes",{loading:g().bool,editing:g().bool,layer:g().object,capabilities:g().object,onAdd:g().func,onClose:g().func,source:g().string,onSave:g().func,addParameters:g().func,updateThumbnail:g().func,thumbURL:g().string,title:g().string,format:g().string,credits:g().object,style:g().string,thumbnail:g().object,additionalParameters:g().object,addParameter:g().func,defaultFormat:g().string,formatOptions:g().array,parameterTypeOptions:g().array,booleanOptions:g().array}),Y(ne,"contextTypes",{messages:g().object}),Y(ne,"defaultProps",{updateThumbnail:function(){},onClose:function(){},onSave:function(){},addParameters:function(){},addParameter:function(){},loading:!1,editing:!1,layer:{},capabilities:{},title:"",thumbnail:{},additionalParameters:{},formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}],parameterTypeOptions:[{label:"backgroundDialog.string",value:"string"},{label:"backgroundDialog.number",value:"number"},{label:"backgroundDialog.boolean",value:"boolean"}],booleanOptions:[{label:"True",value:!0},{label:"False",value:!1}]})},71335:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(24852),o=r.n(n),a=r(75263),i=r.n(a),l=r(5346),s=r(13718),u=r(14068);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function d(e,t,r){return t=b(t),function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(e,f()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function v(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:String(t)}var E={FORMAT:o().createElement(l.Z,{msgId:"map.errorFormat"}),SIZE:o().createElement(l.Z,{msgId:"map.errorSize"})},w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return v(g(e=d(this,t,[].concat(n))),"state",{}),v(g(e),"getThumbnailUrl",(function(){return e.props.map&&e.props.map.newThumbnail&&"NODATA"!==e.props.map.newThumbnail?decodeURIComponent(e.props.map.newThumbnail):null})),v(g(e),"getDataUri",(function(e,t){var r=e;if(r&&r.length>0){var n=r[0],o=new FileReader;return o.onload=function(e){return t(e.target.result,n.size)},o.readAsDataURL(n)}return t(null)})),v(g(e),"getThumbnailDataUri",(function(t){e.getDataUri(e.files,t)})),v(g(e),"generateUUID",(function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))})),v(g(e),"processUpdateThumbnail",(function(t,r,n){var o=e.generateUUID(),a="THUMBNAIL";!e.props.map||n||!e.props.map.thumbnail||e.refs.imgThumbnail||r||e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!0),e.props.map&&!n&&e.props.map.newThumbnail&&!e.refs.imgThumbnail&&r&&(e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,r,o,n,a,e.props.map.id)),e.props.map.newThumbnail&&n&&e.refs.imgThumbnail&&(e.deleteThumbnail(e.props.map.thumbnail,null,!1),e.props.onSaveAll(t,r,o,n,a,e.props.map.id)),e.props.map.newThumbnail&&!n&&e.refs.imgThumbnail&&e.props.onSaveAll(t,r,o,n,a,e.props.map.id),e.props.map.newThumbnail||n||e.refs.imgThumbnail||(e.props.map.thumbnail&&r&&e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,r,o,n,a,e.props.map.id))})),v(g(e),"updateThumbnail",(function(t,r){e.props.map.errors&&e.props.map.errors.length||e.getDataUri(e.files,(function(n){return e.processUpdateThumbnail(t,r,n),n}))})),v(g(e),"deleteThumbnail",(function(t,r){if(t&&-1!==t.indexOf("geostore")){var n=(0,s.C)(t);n&&e.props.onDeleteThumbnail(n,r)}})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,(n=[{key:"renderThumbnailErrors",value:function(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?o().createElement("div",{className:"dropzone-errorBox alert-danger"},o().createElement("p",null,o().createElement(l.Z,{msgId:"map.error"})),this.props.thumbnailErrors.map((function(e){return o().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},E[e])}))):null}},{key:"render",value:function(){var e=this;return o().createElement(u.Z,m({ref:"imgThumbnail",thumbnail:this.getThumbnailUrl(),className:null,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.map.saving?"none":"auto"},label:this.props.withLabel&&o().createElement("label",{className:"control-label"},o().createElement(l.Z,{msgId:"map.thumbnail"})),ù:!0,message:o().createElement(o().Fragment,null,this.props.message,o().createElement("br",null),this.props.suggestion),error:this.renderThumbnailErrors(),onUpdate:function(t,r){var n;e.props.onError([],e.props.map.id),e.files=r,e.props.onUpdate(t,null==r||null===(n=r[0])||void 0===n?void 0:n.preview)},onError:function(t,r){e.props.onError(t,e.props.map.id),e.files=r,e.props.onUpdate(null,null)},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemoveThumbnail(),e.props.onError([],e.props.map.id)}},this.props.thumbnailOptions&&{thumbnailOptions:this.props.thumbnailOptions}))}}])&&p(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);v(w,"propTypes",{glyphiconRemove:i().string,style:i().object,thumbnailErrors:i().array,loading:i().bool,withLabel:i().bool,map:i().object,maxFileSize:i().number,thumbnailOptions:i().object,onDrop:i().func,onError:i().func,onUpdate:i().func,onSaveAll:i().func,onCreateThumbnail:i().func,onDeleteThumbnail:i().func,onRemoveThumbnail:i().func,message:i().oneOfType([i().string,i().element]),suggestion:i().oneOfType([i().string,i().element])}),v(w,"contextTypes",{messages:i().object}),v(w,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:function(){},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemoveThumbnail:function(){},onCreateThumbnail:function(){},onDeleteThumbnail:function(){},message:o().createElement(l.Z,{msgId:"map.message"}),suggestion:o().createElement(l.Z,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[],thumbnailOptions:null});const O=w},75480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(24852),o=r.n(n);const a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return o().createElement("div",{style:t,className:"mapstore-inline-loader"})}},94745:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(24852),o=r.n(n),a=r(94184),i=r.n(a),l=r(80681),s=r(7472),u=r(80717),c=r(67076),m=r(19081),p=r.n(m),d=r(75480),f={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},b={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const g=(0,c.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,r=void 0!==t&&t,n=e.loading,a=e.loadingText,c=e.onClose,m=void 0===c?function(){}:c,g=e.title,h=void 0===g?"":g,v=e.clickOutEnabled,y=void 0===v||v,E=e.showClose,w=void 0===E||E,O=e.disabledClose,S=void 0!==O&&O,P=e.showFullscreen,j=void 0!==P&&P,x=e.fullscreenType,T=void 0===x?"full":x,C=e.buttons,k=void 0===C?[]:C,A=e.size,D=void 0===A?"":A,I=e.bodyClassName,N=void 0===I?"":I,Z=e.children,z=e.draggable,F=void 0!==z&&z,R=e.fullscreenState,U=e.onFullscreen,L=e.fade,_=void 0!==L&&L,B=e.fitContent,M=e.modalClassName,G=void 0===M?"":M,$=e.dialogClassName,q=void 0===$?"":$,W=e.enableFooter,H=void 0===W||W,X=f[D]||"",J=j&&"expanded"===R&&b.className[T]||"",K=r?o().createElement("div",{className:"modal-fixed ".concat(G," ")+(F?"ms-draggable":"")},o().createElement(s.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:y?m:function(){},containerClassName:"ms-resizable-modal",draggable:F,modal:!0,className:i()("modal-dialog modal-content",X,J,q,{"ms-fit-content":B})},o().createElement("span",{role:"header"},o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"ms-title"},h),j&&b.className[T]&&o().createElement(l.Glyphicon,{className:"ms-header-btn",onClick:function(){return U("expanded"===R?"collapsed":"expanded")},glyph:b.glyph[R][T]}),w&&m&&o().createElement(l.Glyphicon,{glyph:"1-close",className:"ms-header-btn",onClick:m,disabled:S}))),o().createElement("div",{role:"body",className:N},Z),H&&o().createElement("div",{style:{display:"flex"},role:"footer"},o().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},n?o().createElement(d.Z,null):null),o().createElement("div",{className:"ms-resizable-modal-loading-text"},n?a:null),o().createElement(u.Z,{buttons:k})))):null;return _?o().createElement(p(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},K):K}))},14068:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(24852),o=r.n(n),a=r(55033),i=r.n(a),l=r(32425),s=r(83139),u=r(80717);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const f=(0,n.forwardRef)((function(e,t){var r,a,d=e.className,f=void 0===d?"ms-thumbnail":d,b=e.label,g=e.loading,h=e.message,v=e.error,y=e.thumbnail,E=e.removeGlyph,w=void 0===E?"trash":E,O=e.removeTooltipId,S=void 0===O?"removeThumbnail":O,P=e.style,j=void 0===P?{}:P,x=e.maxFileSize,T=void 0===x?5e5:x,C=e.supportedImageTypes,k=void 0===C?["image/png","image/jpeg","image/jpg"]:C,A=e.thumbnailOptions,D=e.dropZoneProps,I=void 0===D?{className:"ms-thumbnail-dropzone",activeClassName:"ms-thumbnail-dropzone-active",rejectClassName:"ms-thumbnail-dropzone-reject"}:D,N=e.onUpdate,Z=void 0===N?function(){}:N,z=e.onError,F=void 0===z?function(){}:z,R=e.onRemove,U=e.toolbarButtons,L=(0,n.useRef)(),_=(r=(0,n.useState)(),a=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(r,a)||p(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),B=_[0],M=_[1];if((0,n.useEffect)((function(){return L.current=!0,function(){L.current=!1}}),[]),g||B)return o().createElement("div",{className:"dropzone-thumbnail-container".concat(f?" ".concat(f):""," ms-loading")},o().createElement(l.Z,{size:70}));var G=o().createElement(u.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:U||[{glyph:w,visible:!(!R||!y),tooltipId:S,onClick:function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),null==R||R()}}]});return o().createElement("div",{className:"dropzone-thumbnail-container".concat(f?" ".concat(f):""),style:j},b,o().createElement(i(),c({},I,{multiple:!1,onDrop:function(e){var t,r=null==e||null===(t=e[0])||void 0===t?void 0:t.type,n=-1!==k.indexOf(r);M(!0),function(e,t){return new Promise((function(r){var n=e;if(null!=n&&n[0]){var o=n[0],a=new FileReader;return a.onload=function(e){return r(t?(0,s.Xq)(e.target.result,t).then((function(e){return{data:e,size:e.length}})):{data:e.target.result,size:o.size})},a.readAsDataURL(o)}return r({data:null})}))}(e,A).then((function(t){var r=t.data,o=t.size;return L.current?(M(!1),n&&r&&o<T?Z(r,e):F([].concat(m(n?[]:["FORMAT"]),m(r&&o>=T?["SIZE"]:[])),e)):null})).catch((function(e){return L.current?(M(!1),F(e)):null}))}}),y?o().createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},o().createElement("div",{ref:t,style:{position:"relative",width:"100%",height:"100%",backgroundImage:"url(".concat(y,")"),backgroundSize:null!=A&&A.contain?"contain":"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),o().createElement("div",{className:"dropzone-content-image-added"},h),G):o().createElement("div",{className:"dropzone-content-image"},h,G,v&&o().createElement("div",{className:"dropzone-errors"},v))))}))},93451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(86638),o=r(75263),a=r.n(o),i=r(84596),l=r.n(i),s=r(1469),u=r.n(s),c=r(14293),m=r.n(c),p=r(47037),d=r.n(p),f=r(67076),b=["messages"];function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){var n;return n=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==g(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,f.compose)((0,f.getContext)({messages:a().object}),(0,f.mapProps)((function(r){var o=r.messages,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,b);return v(v({},a),l()(e).reduce(function(e,t,r){return function(){var o=arguments.length>1?arguments[1]:void 0;return v(v({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},y({},o,e[o]&&function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(u()(t))return t.map((function(o){var a=(0,n.S$)(e,o[r]||d()(o)&&o||"");return v(v({},o),{},y({},r,m()(a)?t:a))}));var o=(0,n.S$)(e,t);return m()(o)?t:o}(t,e[o],r)))}}(a,o,t),{}))})))}},13718:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var n=/rest\/geostore\/data\/(\d+)/,o=function(e){var t=decodeURIComponent(decodeURIComponent(e)),r=n.exec(t);return r&&!!r[0]&&r[1]}},83139:(e,t,r)=>{"use strict";r.d(t,{Xq:()=>n,v9:()=>o});var n=function(e,t){return new Promise((function(r,n){var o=t||{},a=o.width,i=void 0===a?64:a,l=o.height,s=void 0===l?64:l,u=o.contain,c=o.type,m=void 0===c?"image/jpeg":c,p=o.quality,d=void 0===p?.5:p,f=new Image;f.crossOrigin="anonymous",f.onload=function(){var e=f.naturalWidth/f.naturalHeight,t=i,n=s,o=i/s,a=document.createElement("canvas");a.setAttribute("width",i),a.setAttribute("height",s),a.style.width=i+"px",a.style.height=s+"px";var l=a.getContext("2d"),c=!u&&e<o||u&&e>o?[t,t/e]:[n*e,n];l.save(),l.translate(t/2,n/2),l.drawImage(f,-c[0]/2,-c[1]/2,c[0],c[1]),l.restore();var p=a.toDataURL(m,d);r(p)},f.onerror=function(e){n(e)},f.src=e}))},o=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,o=null===(e=t.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})|youtube\.com\/playlist\?list=/))||void 0===e?void 0:e[1];return o?new Promise((function(e){return e("http://img.youtube.com/vi/".concat(o,"/sddefault.jpg"))})):t.match(/\.(mp4|og[gv]|webm|mov|m4v)($|\?)/i)?function(e,t){return new Promise((function(t,r){var n={},o=n.type,a=void 0===o?"image/jpeg":o,i=n.quality,l=void 0===i?.5:i,s=document.createElement("video");s.crossOrigin="anonymous";var u=document.createElement("source"),c=document.createElement("canvas");s.addEventListener("loadedmetadata",(function(){var e=s.videoWidth,t=s.videoHeight;c.setAttribute("width",e),c.setAttribute("height",t),c.style.width=e+"px",c.style.height=t+"px"}),!0),s.addEventListener("loadeddata",(function(){s.currentTime=1}),!0),s.addEventListener("seeked",(function(){c.getContext("2d").drawImage(s,0,0);try{var e=c.toDataURL(a,l);t(e)}catch(e){r(e)}}),!0),s.addEventListener("error",(function(e){r(e)}),!0),s.appendChild(u),s.setAttribute("src",e)}))}(t).then((function(e){return n(e,r)})):new Promise((function(e,t){return t("Cannot create a thumbnail from the provided source")}))}},78382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(23645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".msgapi .bg-dialog-attribution-toolbar {\r\n    border: 1px solid #dddddd;\r\n    border-radius: 0;\r\n    box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%);\r\n    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\r\n    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\r\n    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\r\n}\r\n\r\n.msgapi .rdw-link-modal {\r\n    width: 197px;\r\n    height: 215px;\r\n}\r\n\r\n.msgapi .rdw-link-modal-target-option,\r\n.msgapi .rdw-link-modal-label {\r\n    font-size: 12px;\r\n}\r\n\r\n.msgapi .rdw-link-modal-buttonsection {\r\n    position: absolute;\r\n    bottom: 5px;\r\n    left: 32px;\r\n}\r\n.msgapi .rdw-link-modal-buttonsection .rdw-link-modal-btn {\r\n    font-size: 12px;\r\n    width: 50px;\r\n    height: 25px;\r\n}\r\n",""]);const a=o},51584:(e,t,r)=>{var n=r(44239),o=r(37005);e.exports=function(e){return!0===e||!1===e||o(e)&&"[object Boolean]"==n(e)}}}]);