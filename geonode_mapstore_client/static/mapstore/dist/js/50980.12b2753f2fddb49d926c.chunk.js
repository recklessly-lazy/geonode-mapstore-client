(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[50980],{691380:(e,t,r)=>{"use strict";r.d(t,{ZY:()=>u,Gv:()=>s});var n=r(124852),o=r.n(n),i=r(775382),a=r(867076),c=r(438482);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}var u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).overrideWidthProvider;return(0,a.compose)((0,a.defaultProps)({useDefaultWidthProvider:!e}),(function(e){return function(t){return o().createElement(i.Z,{handleWidth:!0},(function(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).width;return o().createElement(e,l({width:r},t))}))}}))},s=function(e){return(0,a.compose)((0,a.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,c.Z)(e))}},264945:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(124852),o=r.n(n),i=r(867076),a=r(313311),c=r.n(a),l=r(66604),u=r.n(l),s=r(669968),d=r(227361),f=r.n(d),p=r(91175),g=r.n(p);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==m(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e){return f()(g()(e,(function(e){return e.color})),"color")};const h=(0,i.withProps)((function(e){var t=e.groups,r=e.showGroupColor,n=e.headerStyle,o=void 0===n?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:n;return{headerStyle:r&&t&&b(t)?y(y({},o),{},{borderTop:"3px solid ".concat(b(t))}):o}}));function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}r(889611);var w=["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgetOpts","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==O(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=(0,i.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),s.WidthProvider)(s.Responsive),E=h(r(394583).Z),T=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return c()(t.widgets,(function(t){return t===e.id}))}))};const C=(0,i.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.style,n=e.className,i=void 0===n?"":n,a=e.toolsOptions,l=void 0===a?{}:a,s=e.rowHeight,d=void 0===s?150:s,f=e.breakpoints,p=void 0===f?{lg:1200,md:996,sm:768,xs:480,xxs:0}:f,g=e.cols,m=void 0===g?{lg:6,md:6,sm:4,xs:2,xxs:1}:g,v=e.widgetOpts,y=void 0===v?{}:v,b=e.widgets,h=void 0===b?[]:b,O=e.layouts,j=e.dependencies,C=e.verticalCompact,I=void 0!==C&&C,k=e.compactMode,x=e.useDefaultWidthProvider,M=void 0===x||x,F=e.measureBeforeMount,A=e.width,Z=e.showGroupColor,R=e.groups,W=void 0===R?[]:R,L=e.canEdit,G=void 0===L||L,N=e.getWidgetClass,z=void 0===N?function(){}:N,V=e.onWidgetClick,q=void 0===V?function(){}:V,H=e.updateWidgetProperty,U=void 0===H?function(){}:H,_=e.deleteWidget,$=void 0===_?function(){}:_,B=e.toggleCollapse,Q=void 0===B?function(){}:B,K=e.toggleMaximize,J=void 0===K?function(){}:K,Y=e.editWidget,X=void 0===Y?function(){}:Y,ee=e.onLayoutChange,te=void 0===ee?function(){}:ee,re=e.language,ne=e.env,oe=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,w),ie=h.filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap})),ae=function(e){return"table"===e.widgetType&&ie.filter((function(t){return Object.keys(t).filter((function(r){return t[r]&&-1!==t[r].indexOf(e.id)})).length>0})).length>0};return o().createElement(D,{key:t||"widgets-view",useDefaultWidthProvider:M,measureBeforeMount:F,width:M?void 0:A,isResizable:G,isDraggable:G,draggableHandle:".draggableHandle",onLayoutChange:te,preventCollision:!0,style:r,className:"widget-container ".concat(i," ").concat(G?"":"no-drag"),rowHeight:d,autoSize:!0,verticalCompact:I,compactMode:k,breakpoints:p,cols:m,layouts:O?JSON.parse(JSON.stringify(u()(O,(function(e){return e.map((function(e){var t=c()(h,{id:e.i});return t?P(P({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},h.map((function(e){return o().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return q(e)},className:z(e)},o().createElement(E,S({"data-grid":e.dataGrid},oe,e,{widgetOpts:y,quickFilters:ae(e)?e.quickFilters:void 0,toolsOptions:l,groups:T(W,e),showGroupColor:Z,dependencies:j,enableColumnFilters:ae(e),canEdit:G,updateProperty:function(){return U.apply(void 0,arguments)},toggleCollapse:function(){return Q(e)},toggleMaximize:function(){return J(e)},onDelete:function(){return $(e)},onEdit:function(){return X(e)},language:re,env:ne})))})))}))},394583:(e,t,r)=>{"use strict";r.d(t,{Z:()=>zt});var n=r(124852),o=r.n(n),i=r(867076),a=r(12425),c=r(839860);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const u=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),(0,i.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,c.tR)(),(0,c.AV)(),(0,c.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,c.um)())),s=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var d=r(227361),f=r.n(d),p=r(23279),g=r.n(p);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==m(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const b=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n,i=e.id,a=g()((function(){return o.apply(void 0,arguments)}),500);return{gridEvents:y(y({},r),{},{onAddFilter:function(e){return a(i,"quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,r,n,a,c){return o(i,'options.columnSettings["'.concat(f()(c.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n,i=e.id;return{gridEvents:y(y({},r),{},{onGridSort:function(e,t){return o(i,"sortOptions",{sortBy:e,sortOrder:t})}})}})));var h=r(213314);const O=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.G5)(),(0,c.E6)(),(0,c.um)()),w=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var S=r(387017),j=r(39589),P=r(264721),D=r.n(P),E=r(682492),T=r.n(E),C=r(378889),I=r(273849),k=r(49977),x=r.n(k),M=r(886850),F=r(624262),A=r(196958);const Z=function(e){return e.switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=void 0===n?{}:n,i=e.filter,a=e.onLoad,c=void 0===a?function(){}:a,l=e.onLoadError,u=void 0===l?function(){}:l;return(0,M.Mc)(r,i,{timeout:15e3,params:{propertyName:(0,A._Q)(o.propertyName),viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return x().Observable.of({loading:!1,error:e,data:[]}).do(u)}))}))};function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==R(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==G(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(49977);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){var n;return n=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==V(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(e,t){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(r=e,r.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter,c=e.sortOptions;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions)})).map((function(e){return L(L({},e),{},{features:[],pages:[],pagination:{}})}))).let(n?function(e){return function(t){return t.switchMap((function(t){var r=t.layer,n=void 0===r?{}:r,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,c=void 0===a?5:a,l=t.filter,u=t.options,s=void 0===u?{}:u,d=t.sortOptions,f=t.pages,p=t.features,g=void 0===p?[]:p,m=t.onLoad,v=void 0===m?function(){}:m,y=t.onLoadError,b=void 0===y?function(){}:y;return e.switchMap((function(e,t){var r=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),(0,M.Mc)(n,l,z(z({},(0,A.S9)(r,f,i)),{},{sortOptions:d,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:(0,A._Q)(s.propertyName),viewParams:s.viewParams})).do((function(e){return v(z(z({},(0,A.f1)(e,r,{pages:f,features:g},z(z({},(0,A.S9)(r,f,i)),{},{size:i,maxStoredPages:c}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return x().Observable.of({loading:!1,error:e}).do(b)})).startWith({loading:!0})}))}))}}(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return H({pagesRange:e},t)}))):Z).startWith({})},$=function(e){var t,r=(0,i.createEventHandler)(),n=r.handler,o=r.stream;return(t=e,t.distinctUntilChanged((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layer;return(0,F.Tt)(e)===(0,F.Tt)(t)&&e.loadingError===t.loadingError})).switchMap((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer;return(0,M.v$)({layer:e}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return x().Observable.of({loading:!1,error:e})}))}))).combineLatest(_(e,o.startWith({startPage:0,endPage:1})),(function(e,t){return H(H(H({},e),t),{},{pageEvents:{moreFeatures:n,onPageChange:function(){}}})})).startWith({loading:!0})};const B=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{pages:e.pages,features:e.features,pagination:e.pagination,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,r=void 0===t?function(){}:t,n=e.onLoad,o=void 0===n?function(){}:n;return function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:$}})),I.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:T()(n?(0,C.getFeatureTypeProperties)(n).filter((function(e){return!D()((0,A._Q)(r.propertyName)||[],e.name)})).reduce((function(e,t){return H(H({},e),{},U({},t.name,{hide:!0}))}),{}):{},r.columnSettings||{},i)}})));var Q=r(630881),K=r(908488),J=r(873339),Y=r(505055),X=r.n(Y),ee=r(441609),te=r.n(ee),re=r(618446),ne=r.n(re),oe=r(670956),ie=r(199767),ae=r(27835);var ce=r(47805),le=r(761868),ue=r(552259);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==se(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const pe=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies;return t&&(!te()(r.quickFilters)||!te()(r.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,ue.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ne()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&ne()(e.dependencies.filter,t.dependencies.filter)&&ne()(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=e.hookRegister;if(!t||te()(n.layer))return k.Observable.of({loading:!1});var a={};n.quickFilters&&(a=fe(fe({},a),(0,oe.r$)(o,n.quickFilters,n.options))),n.filter&&(a=fe(fe({},a),(0,ce.composeAttributeFilters)([a,n.filter])));var c=n&&n.layer&&n.layer.name;if(!te()(a)){a=fe(fe({},a),{},{options:fe(fe({},a.options||{}),{},{noSchemaLocation:!0})});var l=(0,ce.toOGCFilter)(c,a,"1.1.0");return function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,ae.mG)(e,(r=t.wfsGetFeature,(0,ae.Uh)("gs:Bounds",[(0,ie.qP)("features",(0,ie.fA)("text/xml","http://geoserver/wfs","POST",r))],(0,ie.DK)((0,ie.En)("bounds","application/json")))),{},n)}((0,F.ZA)(n.layer),{wfsGetFeature:l}).switchMap((function(e){var t,r,n;if(X().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return k.Observable.of({loading:!1});var o={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},a=i.getHook(ue.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),k.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return k.Observable.of({error:"error getting bounds from filter",details:e})}))}return k.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,r=void 0!==t&&t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,le.t8)("loading",r,n)}))})))));var ge=r(313311),me=r.n(ge),ve=r(143378);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=ye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==ye(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Oe=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.maps,i=void 0===o?[]:o,a=e.selectedMapId,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return t!==c.mapSync||!ne()(n,c.dependencies)||!ne()(i,c.maps)||l!==c.filter||a!==c.selectedMapId}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=void 0===o?{}:o,a=e.maps,c=void 0===a?[]:a,l=e.selectedMapId,u=n&&n.layer&&n.layer.name,s=me()(c,(function(e){return e.mapId===l}));if(s){var d=me()(null==s?void 0:s.layers,{name:u})||{},f={},p={},g=void 0;return t&&!te()(d)&&(n.quickFilters&&(f=he(he({},f),(0,oe.r$)(i,n.quickFilters,n.options))),n.filter&&(f=he(he({},f),(0,ce.composeAttributeFilters)([f,n.filter]))),!te()(f)&&(0,ce.toCQLFilter)(f))?(g=(0,ce.toCQLFilter)(f),p=(0,le.cc)(!1,he(he({},d),{},{params:(0,ve.v)({params:{CQL_FILTER:g}},d&&d.params&&d.params.CQL_FILTER)}),{name:u},s.layers),{maps:(0,le.cc)(!1,he(he({},s),{},{layers:p}),{mapId:l},c)}):(p=s.layers.map((function(e){return he(he({},e),{},{params:he(he({},e.params),{},{CQL_FILTER:void 0})})})),{maps:(0,le.cc)(!1,he(he({},s),{},{layers:p}),{mapId:l},c)})}return{maps:c}}))),we=function(e){return(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mapSync,n=t.dependencies,o=void 0===n?{}:n,a=t.selectedMapId,c=arguments.length>1?arguments[1]:void 0,l=c.mapSync,u=c.dependencies,s=c.selectedMapId;return u&&(0,i.shallowEqual)(o[e],u[e])||r===l||a===s}),(function(t){var r=t.maps,n=void 0===r?[]:r,o=t.mapSync,i=t.dependencies,a=void 0===i?{}:i,c=t.selectedMapId,l=me()(n,{mapId:c})||{},u=a[e]&&o?(0,le.t8)(e,a[e],l):l;return{mapStateSource:"__dependency_system__",maps:n.map((function(e){return e.mapId===u.mapId?u:e})),map:u}}))};var Se=r(480681);function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}var Pe=["data"];function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=je(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==je(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?[]:t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Pe),i=Object.keys(r.reduce((function(e,t){return Ee(Ee({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(Se.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&n.yAxisLabel?n.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,r.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var Ce=r(496259),Ie=r(173014),ke=r(342415),xe=r(639837),Me=r(351990),Fe=(0,Ie.Z)()((0,ke.Z)((0,xe.Z)(Me.Z)));const Ae=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(Ce.Z,null,o().createElement(Fe,e)))};var Ze=r(805346),Re=r(965539),We=r(572688),Le=r(743129),Ge=r(294184),Ne=r.n(Ge),ze=r(38560);const Ve=function(e){var t,r,i,a=e.options,c=a.dropdownWidgets.length>1,l=a.dropdownWidgets.length-1,u=a.dropdownWidgets.findIndex((function(e){return e.id===a.activeWidget.id})),s=u===l?0:u+1,d=0===u?l:u-1;return o().createElement("div",{className:"widget-selector"},c?o().createElement(ze.Z,{className:"previous-widget btn-sm no-border",onPointerDown:function(){return a.setActiveWidget(a.dropdownWidgets[d])}},o().createElement(Se.Glyphicon,{glyph:"arrow-left"})):null,o().createElement(Le.ZP,{openOnFocus:!0,clearable:!1,searchable:!1,value:{id:a.activeWidget.id,label:null!==(t=a.activeWidget.title)&&void 0!==t?t:null===(r=a.activeWidget)||void 0===r||null===(i=r.layer)||void 0===i?void 0:i.title},onChange:function(e){return a.setActiveWidget(a.dropdownWidgets.find((function(t){return t.id===e.value})))},options:(0,n.useMemo)((function(){return a.dropdownWidgets.map((function(e){var t,r;return{value:e.id,label:null!==(t=e.title)&&void 0!==t?t:null==e||null===(r=e.layer)||void 0===r?void 0:r.title,active:e.id===a.activeWidget.id}}))}),[a.dropdownWidgets]),optionComponent:function(e){var t=e.option,r=e.onSelect;return o().createElement("div",{className:Ne()({"Select-option":!0,"is-focused":t.active}),onPointerDown:function(e){return r(t,e)}},t.label)}}),c?o().createElement(ze.Z,{className:"next-widget btn-sm no-border",onPointerDown:function(){return a.setActiveWidget(a.dropdownWidgets[s])}},o().createElement(Se.Glyphicon,{glyph:"arrow-right"})):null)},qe=function(e){var t=e.id,r=e.title,n=e.confirmDelete,i=void 0!==n&&n,a=e.className,c=e.isDraggable,l=void 0===c||c,u=e.toggleDeleteConfirm,s=void 0===u?function(){}:u,d=e.onDelete,f=void 0===d?function(){}:d,p=e.icons,g=e.topLeftItems,m=e.topRightItems,v=e.headerStyle,y=void 0===v?{}:v,b=e.options,h=void 0===b?{}:b,O=e.children;return o().createElement("div",{className:"mapstore-widget-card ".concat(h.singleWidget?"single-widget":""),id:t},o().createElement(Re.Z,{className:a,header:o().createElement("div",{style:y,className:"mapstore-widget-info ".concat(l?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},p),g,h.singleWidget?o().createElement(Ve,{options:h}):o().createElement("span",{className:"widget-title"},r),o().createElement("span",{className:"mapstore-widget-options"},m)))},O),i?o().createElement(We.Z,{confirmText:o().createElement(Ze.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(Ze.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(Ze.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return s(!1)},onConfirm:function(){return f(t)}}):null)};var He=["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"];function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ue.apply(this,arguments)}var _e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(Se.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};var $e=r(982030),Be=r(599707),Qe=(0,$e.Z)((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text}),(function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}}),Be.Z)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:e}})})),Ke=r(957557),Je=r.n(Ke),Ye=r(975480),Xe=r(892936),et=r(193190);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}var rt=["layers"];function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=tt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==tt(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var at=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,r=void 0===t?function(){}:t,n=e.id;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,rt);return r(n,"maps",t,"merge")}}})(Xe.Z),ct=r(118027);function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dt(e,t,r){var n;return n=function(e,t){if("object"!=lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==lt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ft=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var r,n=t&&e.options&&me()((0,A._Q)(null===(r=e.options)||void 0===r?void 0:r.propertyName),(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},o=n&&(n.rawValue||n.value);return st(st({},e),{},{value:o})}))}))),pt=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return st(st({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),gt=(0,i.compose)(pt,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,r=e.options,n=e.quickFilterStream$;return t?{filterRenderers:(0,A.Lo)(t).reduce((function(e,t){var o=t.localType,a=t.name,c=function(e){var t=e.options,r=e.localType,n=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:n,options:t}),ft)((0,ct.Q)(r,{name:n}))}({options:r,localType:o,attributeName:a,quickFilterStream$:n});return st(st({},e),{},dt({},a,c))}),{})}:{}}))),mt=r(830029);function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ht(e,t,r){var n;return n=function(e,t){if("object"!=vt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==vt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ot=(0,r(218291).Z)()((0,n.lazy)((function(){return Promise.all([r.e(53370),r.e(94192),r.e(21951),r.e(88300),r.e(47310)]).then(r.bind(r,588300))}))),wt=(0,ke.Z)((0,Ie.Z)((function(e){return!e.describeFeatureType}))(Ot)),St=["rowHeight","headerRowHeight","headerFiltersHeight"].reduce((function(e,t){return bt(bt({},e),{},ht({},t,28))}),"");const jt=gt((function(e){var t=e.id,r=e.title,n=e.loading,i=e.confirmDelete,a=void 0!==i&&i,c=e.enableColumnFilters,l=void 0!==c&&c,u=e.headerStyle,s=e.icons,d=e.topRightItems,f=e.toggleDeleteConfirm,p=void 0===f?function(){}:f,g=e.onDelete,m=void 0===g?function(){}:g,v=e.gridEvents,y=void 0===v?function(){}:v,b=e.pageEvents,h=void 0===b?{moreFeatures:function(){}}:b,O=e.describeFeatureType,w=e.filterRenderers,S=e.columnSettings,j=e.features,P=e.size,D=e.pages,E=e.error,T=e.pagination,C=void 0===T?{}:T,I=e.dataGrid,k=void 0===I?{}:I,x=e.virtualScroll,M=void 0===x||x,F=e.gridOpts,A=void 0===F?St:F,Z=e.options,R=void 0===Z?{}:Z;return o().createElement(qe,{id:"widget-chart-".concat(t),title:r,headerStyle:u,icons:s,isDraggable:k.isDraggable,confirmDelete:a,onDelete:m,toggleDeleteConfirm:p,topRightItems:d,options:R},o().createElement(Re.Z,{footer:C.totalFeatures?o().createElement("div",{className:"widget-footer"},n?o().createElement("span",{style:{float:"right"}},o().createElement(Ye.Z,null)):null,void 0===E&&o().createElement("span",{className:"result-info"},o().createElement(Ze.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:C.totalFeatures}}))):null},o().createElement(wt,{emptyRowsView:function(){return o().createElement(mt.Z,{loading:n},o().createElement(Be.Z,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:y,sortable:!0,defaultSize:!1,columnSettings:S,pageEvents:h,virtualScroll:M,enableColumnFilters:l,filterRenderers:w,features:j,pages:D,error:E,size:P,rowKey:"id",describeFeatureType:O,pagination:C,gridOpts:A,options:R})))}));var Pt=r(980844),Dt=["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"];function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Et.apply(this,arguments)}var Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(Se.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null},Ct=r(946173),It=r(70919),kt=["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"];var xt=(0,Ct.Z)()(It.Z),Mt=(0,i.compose)(J.Z,Q.Z,K.Z,S.Z,u)((function(e){var t=e.id,r=e.title,n=e.description,i=e.headerStyle,a=e.data,c=void 0===a?[]:a,l=e.series,u=void 0===l?[]:l,s=e.loading,d=e.icons,f=e.showTable,p=e.topRightItems,g=e.confirmDelete,m=void 0!==g&&g,v=e.dataGrid,y=void 0===v?{}:v,b=e.onDelete,h=void 0===b?function(){}:b,O=e.toggleTableView,w=void 0===O?function(){}:O,S=e.toggleDeleteConfirm,j=void 0===S?function(){}:S,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,He);return o().createElement(qe,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:y.isDraggable,title:r,icons:d,topLeftItems:_e({loading:s,title:r,description:n,showTable:f,toggleTableView:w}),confirmDelete:m,onDelete:h,toggleDeleteConfirm:j,topRightItems:p,options:null==P?void 0:P.options},f?o().createElement(Te,Ue({data:c},P)):o().createElement(Ae,Ue({id:t,isAnimationActive:!s,loading:s,data:c,series:u,iconFit:!0},P)))})),Ft=(0,i.compose)(O)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.icons,i=e.topLeftItems,a=e.id,c=e.title,l=e.text,u=e.headerStyle,s=e.topRightItems,d=e.options,f=void 0===d?{}:d,p=e.dataGrid,g=void 0===p?{}:p,m=e.confirmDelete,v=void 0!==m&&m,y=e.onDelete,b=void 0===y?function(){}:y;return o().createElement(qe,{id:"widget-text-".concat(a),title:c,confirmDelete:v,onDelete:b,toggleDeleteConfirm:r,headerStyle:u,isDraggable:g.isDraggable,icons:n,topLeftItems:i,topRightItems:s,options:f},o().createElement(Qe,{text:l}))})),At=(0,i.compose)(J.Z,Oe,we("center"),we("zoom"),pe,w)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.updateProperty,n=void 0===r?function(){}:r,i=t.toggleDeleteConfirm,a=void 0===i?function(){}:i,c=t.id,l=t.title,u=t.map,s=void 0===u?{}:u,d=t.maps,f=void 0===d?[]:d,p=t.selectedMapId,g=t.icons,m=t.hookRegister,v=t.mapStateSource,y=t.topRightItems,b=t.options,h=void 0===b?{}:b,O=t.confirmDelete,w=void 0!==O&&O,S=t.loading,j=void 0!==S&&S,P=t.dataGrid,D=void 0===P?{}:P,E=t.onDelete,T=void 0===E?function(){}:E,C=t.headerStyle,I=t.env,k=t.selectionActive,x=s.size,M=void 0===x?{}:x,F=M.height,A=M.width,Z=s.mapInfoControl,R=F>400&&A>400&&Z;return o().createElement(qe,{className:"map-widget-view",id:"widget-text-".concat(c),title:l,confirmDelete:w,onDelete:T,toggleDeleteConfirm:a,headerStyle:C,icons:g,topRightItems:[o().createElement(et.Z,{className:"map-switcher",maps:f,onChange:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[c].concat(t))},value:p,disabled:k})].concat((e=y,function(e){if(Array.isArray(e))return it(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),isDraggable:D.isDraggable,options:h},o().createElement(Re.Z,{footer:j?o().createElement("div",{className:"widget-footer"},o().createElement("span",{style:{float:"right"}},o().createElement(Ye.Z,null))):null},o().createElement(at,{tools:R?["popup"]:[],updateProperty:n,id:c,map:ot({},Je()(s,"mapStateSource")),mapStateSource:v,hookRegister:m,layers:s&&s.layers,options:{style:{margin:"0 10px 10px 10px",height:"calc(100% - 10px)"}},env:I})))})),Zt=(0,i.compose)(J.Z,K.Z,Q.Z,B,b)(jt),Rt=(0,i.compose)(J.Z,Q.Z,K.Z,j.Z,s)((function(e){var t=e.id,r=e.title,n=e.description,i=e.data,a=void 0===i?[]:i,c=e.series,l=void 0===c?[]:c,u=e.loading,s=e.showTable,d=e.confirmDelete,f=void 0!==d&&d,p=e.headerStyle,g=e.icons,m=e.topRightItems,v=e.dataGrid,y=void 0===v?{}:v,b=e.toggleTableView,h=void 0===b?function(){}:b,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,S=e.onDelete,j=void 0===S?function(){}:S,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Dt);return o().createElement(qe,{className:"counter-widget",id:"widget-chart-".concat(t),title:r,isDraggable:y.isDraggable,icons:g,topLeftItems:Tt({loading:u,title:r,description:n,showTable:s,toggleTableView:h}),confirmDelete:f,onDelete:j,toggleDeleteConfirm:w,headerStyle:p,topRightItems:m,options:null==P?void 0:P.options},o().createElement(Pt.Z,Et({id:t,isAnimationActive:!u,loading:u,data:a,series:l,iconFit:!0},P)))})),Wt=(0,i.compose)(J.Z,h.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.id,i=e.title,a=e.icons,c=e.headerStyle,l=e.confirmDelete,u=void 0!==l&&l,s=e.topRightItems,d=e.dataGrid,f=void 0===d?{}:d,p=e.onDelete,g=void 0===p?function(){}:p,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,kt);return o().createElement(qe,{id:"widget-text-".concat(n),title:i,confirmDelete:u,onDelete:g,toggleDeleteConfirm:r,headerStyle:c,icons:a,topRightItems:s,isDraggable:f.isDraggable,options:null==m?void 0:m.options},o().createElement(xt,m))})),Lt=["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"];function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gt.apply(this,arguments)}var Nt=function(e){var t;return null==e||null===(t=e.widgetOpts)||void 0===t?void 0:t[e.widgetType]};const zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=e.toggleCollapse,n=void 0===r?function(){}:r,i=e.exportCSV,a=void 0===i?function(){}:i,c=e.exportImage,l=void 0===c?function(){}:c,u=e.onDelete,s=void 0===u?function(){}:u,d=e.onEdit,f=void 0===d?function(){}:d,p=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Lt);return"text"===p.widgetType?o().createElement(Ft,Gt({},p,{toggleCollapse:n,onDelete:s,onEdit:f})):"table"===p.widgetType?o().createElement(Zt,Gt({},p,Nt(p),{toggleCollapse:n,exportCSV:a,dependencies:t,onDelete:s,onEdit:f})):"counter"===p.widgetType?o().createElement(Rt,Gt({},p,Nt(p),{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):"map"===p.widgetType?o().createElement(At,Gt({},p,Nt(p),{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):"legend"===p.widgetType?o().createElement(Wt,Gt({},p,Nt(p),{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):o().createElement(Mt,Gt({},p,Nt(p),{toggleCollapse:n,exportCSV:a,dependencies:t,exportImage:l,onDelete:s,onEdit:f}))}},688395:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>z});var n=r(49977),o=r.n(n),i=r(666654),a=r.n(i),c=r(218721),l=r.n(c),u=r(227361),s=r.n(u),d=r(264721),f=r.n(d),p=r(618446),g=r.n(p),m=r(957557),v=r.n(m),y=r(114176),b=r.n(y),h=r(557579),O=r(881808),w=r(401757),S=r(580416),j=r(675110),P=r(324684),D=r(769293),E=r(555927),T=r(275982),C=r(178598),I=r(989077),k=r(117542),x=r.n(k),M=r(246781);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function A(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){var n;return n=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==F(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G=function(e){return e.ofType(D.WC,D.a3,D.W5).startWith({type:O.ok}).switchMap((function(t){return t.type===D.WC?o().Observable.never():e})).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type===T.nk}))},N=function(e,t,r,n){return o().Observable.of((0,h.Rz)("mapSync",e),(0,h.Rz)("dependenciesMap",function(e,t,r){var n=r.dependenciesMap,o=r.mappings,i=["layer","filter","quickFilters","options"],c=["layers","viewport","zoom","center"],l=(h.oU.exec(t)||[])[1],u=b()(n,(function(e){return-1===e.indexOf(l)})),s=Object.keys(o).filter((function(e){return void 0!==o[e]})).reduce((function(e,r){return!a()(t,"map")&&f()(i,r)?W(W({},e),{},L({},r,"".concat(t,".").concat(o[r]))):a()(t,"map")?f()(c,r)?W(W({},e),{},L({},r,"map"===t?o[r]:"".concat(t.replace(/.map$/,""),".").concat(o[r]))):W(W({},e),{},L({},r,"".concat(t.replace(/.map$/,""),".").concat(o[r]))):e}),{}),d=t.split(".maps")[0];return e?W(W(W({},u),s),{},L(L({},"dependenciesMap","".concat(d,".dependenciesMap")),"mapSync","".concat(d,".mapSync"))):v()(u,[Object.keys(o)])}(e,t,r)))};const z={exportWidgetData:function(e){return e.ofType(h.Km).do((function(e){var t=e.data,r=void 0===t?[]:t,n=e.title,o=void 0===n?"data":n;return x().json2csv(r,(function(e,t){return e?null:(0,C.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(O.ok,E.E9,h.Jm).map((function(){return(0,w.jx)(r())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return g()(A(e),A(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h._k)(e.reduce((function(e,t){var r=t.split(".maps")[0],n=t.replace(/.map$/,"");return a()(t,"map")?W(W({},e),{},L(L(L(L(L(L({},"".concat(r,".dependenciesMap"),"".concat(r,".dependenciesMap")),"".concat(r,".mapSync"),"".concat(r,".mapSync")),"map"===t?"viewport":"".concat(n,".viewport"),"".concat(n,".bbox")),"map"===t?"center":"".concat(n,".center"),"".concat(n,".center")),"map"===t?"zoom":"".concat(n,".zoom"),"".concat(n,".zoom")),"map"===t?"layers":"".concat(n,".layers"),"map"===t?"layers.flat":"".concat(n,".layers"))):W(W({},e),{},L(L(L(L(L(L({},"".concat(t,".filter"),"".concat(t,".filter")),"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),"".concat(r,".dependenciesMap"),"".concat(r,".dependenciesMap")),"".concat(r,".mapSync"),"".concat(r,".mapSync")),"".concat(t,".layer"),"".concat(t,".layer")),"".concat(t,".options"),"".concat(t,".options")))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(h.LH).switchMap((function(t){var n=t.active,i=t.availableDependencies,a=void 0===i?[]:i,c=t.options;return n&&a.length>0?1===a.length?N(n,a[0],c):o().Observable.of((0,h.kr)(n,{availableDependencies:a})).merge(e.ofType(h.V5).filter((function(){return(0,w.xI)(r())})).switchMap((function(e){var t=e.widget,i=s()((0,w.r0)(r()),"availableDependencies").filter((function(e){return(h.oU.exec(e)||[])[1]===t.id}));return"map"===t.widgetType&&(i=i.filter((function(e){return(h.jB.exec(e)||[])[2]===t.selectedMapId}))),N(n,i[0],c,t.dependeciesMap).concat(o().Observable.of((0,h.kr)(!1,{})))})).takeUntil(e.ofType(T.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.key;return t===h.Cz&&r===h.jv}))))):N(n,a[0],c)}))},clearWidgetsOnLocationChange:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(O.ok).switchMap((function(){var t=(0,P.F)(r()).split("/"),n=t[t.length-1];return e.let(G).filter((function(){var e=(0,P.F)(r()).split("/");return e[e.length-1]!==n})).switchMap((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payload,t=void 0===e?{}:e;return t&&t.location&&t.location.pathname?o().Observable.of((0,h.K4)()):o().Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(h.pV).do((function(e){var t,n,o=e.widgetDivId,i=e.title,a=void 0===i?"data":i,c=document.createElement("canvas"),l=document.querySelector("#".concat(o," .recharts-wrapper svg")),u=l.outerHTML?l.outerHTML:(t=l,(n=document.createElement("div")).appendChild(t.cloneNode(!0)),n.innerHTML);r.e(59425).then(r.t.bind(r,459425,23)).then((function(e){(0,e.default)(c,u,{renderCallback:function(){var e=c.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,c.width,c.height),(0,I.RP)(c.toDataURL("image/jpeg",1),"".concat(a,".jpg"),"image/jpeg")}})}))})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(S.yS).switchMap((function(e){var r,n=e.layer,i=e.newProperties,a=t.getState(),c=(0,j.CA)(a,n);return(r=o().Observable).of.apply(r,A(l()(i,"layerFilter")&&c?[(0,h.Ko)(c)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(S.x9,S.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var r,n=e.layerId,i=t.getState(),a=(0,j.CA)(i,n);return(r=o().Observable).of.apply(r,A(a&&a.previousLoadingError!==a.loadingError?[(0,h.Ko)(a)]:[]))}))})).mergeAll()},updateDependenciesMapOnMapSwitch:function(e,t){return e.ofType(h.$A).filter((function(e){var t=e.key;return f()(["maps","selectedMapId"],t)})).switchMap((function(e){var r=e.id,n=e.value,i=o().Observable.empty(),a="string"==typeof n?n:null==n?void 0:n.mapId;if(a){var c=(0,w.zm)(t.getState()),l=(0,M.IO)(c,r,a);g()(c,l)||(i=o().Observable.of((0,h.sZ)(l)))}return i}))}}},875859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(557579),o=r(881808),i=r(555927),a=r(727418),c=r.n(a),l=r(728252),u=r.n(l),s=r(227361),d=r.n(s),f=r(313311),p=r.n(f),g=r(957557),m=r.n(g),v=r(66604),y=r.n(v),b=r(984596),h=r.n(b),O=r(414293),w=r.n(O),S=r(761868);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==j(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const x=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.Cz:return u()("builder.settings.".concat(r.key),r.value,t);case n.n8:return u()("builder.editor",r.widget,u()("builder.settings",r.settings||k.settings,t));case n.dm:return u()("builder.editor",I(I({},r.widget),{},{widgetType:r.widget&&r.widget.widgetType||"chart"}),u()("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case n.BV:if(r.key.includes("maps")&&!w()(r.value)){var a,l=r.value,s=D(n.h9.exec(r.key)||[],3),f=s[1],g=s[2];if(f){var v=d()(t,"builder.editor.maps",[]);l=u()(g,r.value,v.find((function(e){return e.mapId===f})))}return(0,S.vy)("builder.editor.maps",l,{mapId:f||(null===(a=r.value)||void 0===a?void 0:a.mapId)},t)}return u()("builder.editor.".concat(r.key),r.value,t);case n.Jm:return(0,S.vy)("containers[".concat(r.target,"].widgets"),I(I({id:r.id},r.widget),{},{dataGrid:r.id&&{y:0,x:0,w:1,h:1}}),{id:r.widget.id||r.id},t);case n.J5:var b="containers[".concat(r.target,"].widgets");return d()(t,b)?u()(b,r.widgets,t):t;case n.$A:var O=p()(d()(t,"containers[".concat(r.target,"].widgets")),{id:r.id}),j=r.value;return"merge"===r.mode&&(j="maps"===r.key?O.maps.map((function(e){var t;return e.mapId===(null===(t=r.value)||void 0===t?void 0:t.mapId)?I(I({},e),null==r?void 0:r.value):e})):c()({},O[r.key],r.value)),(0,S.vy)("containers[".concat(r.target,"].widgets"),u()(r.key,j,O),{id:r.id},t);case n.eb:if(r.layer){var E=d()(t,"containers[".concat(n.VR,"].widgets"));if(E)return u()("containers[".concat(n.VR,"].widgets"),E.map((function(e){return d()(e,"layer.id")===r.layer.id?u()("layer",r.layer,e):e})),t)}return t;case n.yY:var T="containers[".concat(n.VR,"].widgets"),C=(0,S.z6)("containers[".concat(r.target,"].widgets"),{id:r.widget.id},t),x=d()(C,T,[]);return u()(T,x.map((function(e){if(e.dependenciesMap){var t=D(n.oU.exec((Object.values(e.dependenciesMap)||[])[0]),2)[1];if(t&&r.widget.id===t)return I(I({},m()(e,"dependenciesMap")),{},{mapSync:!1})}return e})),t);case i.E9:var M=r.data;return u()("containers[".concat(n.VR,"]"),I({},M),t);case o.ok:var F=(r.config||{}).widgetsConfig;return u()("containers[".concat(n.VR,"]"),I({},F),t);case n.v8:return u()("containers[".concat(r.target,"].layout"),r.layout)(u()("containers[".concat(r.target,"].layouts"),r.allLayouts,t));case n.ff:case i.R4:return u()("containers[".concat(n.VR,"]"),k.containers[n.VR],t);case n.S0:var A=r.key,Z=r.value;return u()("dependencies[".concat(A,"]"),Z,t);case n.Q6:var R=r.key;return u()("dependencies[".concat(R,"]"),null,t);case n.kb:var W=r.dependencies;return u()("dependencies",W,t);case n.GV:return u()("dependencies",k.dependencies,t);case n.Ym:var L=r.widget,G=void 0===L?{}:L;if(G.dataGrid&&G.dataGrid.static)return t;var N=d()(t,"containers[".concat(r.target,"].collapsed[").concat(G.id));if(N){var z=[].concat(P(d()(t,"containers[".concat(r.target,"].layout"),[])),P(h()(d()(N,"layout",[])))),V=y()(d()(t,"containers[".concat(r.target,"].layouts"),{}),(function(){var e=arguments.length>1?arguments[1]:void 0;return[].concat(P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),P(h()(d()(N,"layouts[".concat(e,"]"),[]))))}));return m()((0,S.qC)(u()("containers[".concat(r.target,"].layout"),z),u()("containers[".concat(r.target,"].layouts"),V))(t),"containers[".concat(r.target,"].collapsed[").concat(G.id,"]"))}return u()("containers[".concat(r.target,"].collapsed[").concat(G.id,"]"),{layout:p()(d()(t,"containers[".concat(r.target,"].layout"),[]),{i:G.id}),layouts:y()(d()(t,"containers[".concat(r.target,"].layouts"),{}),(function(e){return p()(e,{i:G.id})}))},t);case n.ke:var q,H,U,_,$,B,Q,K,J,Y,X,ee,te,re,ne,oe,ie,ae,ce=r.widget,le=null==t||null===(q=t.containers)||void 0===q||null===(H=q[r.target])||void 0===H?void 0:H.maximized;if(!ce||null!==(U=ce.dataGrid)&&void 0!==U&&U.static)return t;if(null!=le&&le.widget)return(0,S.qC)(u()("containers[".concat(r.target,"].layout"),le.layout),u()("containers[".concat(r.target,"].layouts"),le.layouts),u()("containers[".concat(r.target,"].maximized"),{}),u()("containers[".concat(r.target,"].widgets"),null==t||null===(oe=t.containers)||void 0===oe||null===(ie=oe[r.target])||void 0===ie||null===(ae=ie.widgets)||void 0===ae?void 0:ae.map((function(e){return e.id===le.widget.id?I(I({},e),{},{dataGrid:I(I({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(_=t.containers)&&void 0!==_&&null!==($=_[r.target])&&void 0!==$&&null!==(B=$.collapsed)&&void 0!==B&&B[ce.id])return t;var ue=I(I({},p()(null==t||null===(Q=t.containers)||void 0===Q||null===(K=Q[r.target])||void 0===K?void 0:K.layout,{i:ce.id})),{x:0,y:0,w:1,h:1});return(0,S.qC)(u()("containers[".concat(r.target,"].maximized"),{widget:ce,layout:null==t||null===(J=t.containers)||void 0===J||null===(Y=J[r.target])||void 0===Y?void 0:Y.layout,layouts:null==t||null===(X=t.containers)||void 0===X||null===(ee=X[r.target])||void 0===ee?void 0:ee.layouts}),u()("containers[".concat(r.target,"].layout"),[ue]),u()("containers[".concat(r.target,"].layouts"),{xxs:[ue]}),u()("containers[".concat(r.target,"].widgets"),null==t||null===(te=t.containers)||void 0===te||null===(re=te[r.target])||void 0===re||null===(ne=re.widgets)||void 0===ne?void 0:ne.map((function(e){return e.id===ce.id?I(I({},e),{},{dataGrid:I(I({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case n.uU:var se=d()(t,"containers[".concat(r.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),de=se.filter((function(e){return d()(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),fe=se.filter((function(e){return!d()(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))}));return 0===fe.length?de.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):fe.length>0?fe.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):t;case n.nw:return u()("tray",r.value,t);default:return t}}},324684:(e,t,r)=>{"use strict";r.d(t,{F:()=>i,y:()=>a});var n=r(227361),o=r.n(n),i=function(e){return o()(e,"router.location.pathname")||"/"},a=function(e){return o()(e,"router.location.search")||""}},55237:(e,t,r)=>{"use strict";r.d(t,{tr:()=>w,jb:()=>S,Xu:()=>j,un:()=>P,Qn:()=>D,_q:()=>E,og:()=>T,$4:()=>C,kN:()=>I,oD:()=>k,V$:()=>x,uH:()=>M,pC:()=>F,tz:()=>A,p:()=>Z});var n=r(747037),o=r.n(n),i=r(647960),a=r.n(i),c=r(227361),l=r.n(c),u=r(984596),s=r.n(u),d=r(730381),f=r.n(d),p=r(86638);function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=/PT?[\d\.]+[YMWDHMS]/,h=function(e){return e?o()(e)?new Date(e).getTime():(a()(e)&&e.getTime(),e):null},O=function(e){var t=e.start,r=e.end,n=e.duration,o=f().duration(n).asMilliseconds();return(new Date(r).getTime()-new Date(t).getTime())/o},w=function(e){for(var t=e.start,r=e.end,n=e.duration,o=f().duration(n).asMilliseconds(),i=[],a=new Date(t),c=new Date(r);a<=c;)i.push(new Date(a).toISOString()),a.setTime(a.getTime()+o);return i},S=function(e){var t=e.start,r=e.end,n=e.duration;return w({start:t,end:r,duration:n}).map((function(e){return{start:new Date(e),end:new Date(new Date(e).getTime()+f().duration(n).asMilliseconds())}}))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,r=e.end,n=e.duration,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.start,a=o.end;if(!i||!a)return{count:O({start:t,end:r,duration:n}),start:t,end:r};var c=f().duration(n).asMilliseconds(),l=new Date(t).getTime(),u=new Date(r).getTime(),s=new Date(i).getTime(),d=new Date(a).getTime(),p=Math.ceil((s-l)/c),g=Math.floor((d-l)/c),m=Math.floor((u-l)/c);if(p>=0&&g<=m){var v=g-p;return{start:new Date(l+Math.max(0,p)*c),end:new Date(l+Math.min(m,g)*c),count:v}}return{count:O({start:t,end:r,duration:n}),start:t,end:r}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,r=e.end,n=arguments.length>1?arguments[1]:void 0,o=new Date(t),i=new Date(r),a=Math.floor(i.getTime()-o.getTime())/n;return{range:{start:t,end:r},resolution:f().duration(a).toISOString().match(b)[0]}},D=function(){var e,t,r=arguments.length>1?arguments[1]:void 0,n=(e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],(t=arguments.length>2?arguments[2]:void 0)?e.map((function(e){var r=m(e.split("/"),2);return{start:r[0],end:r[1]}[t]})):e);return n[function(e,t){var r=h(t),n=1/0,o=-1;return e.forEach((function(e,t){var i=h(e),a=Math.abs(i-r);a<n&&(n=a,o=t)})),o}(n,r)]},E=function(e){return e&&e.indexOf&&e.indexOf("--")>0},T=function(e,t){var r=f()(e).diff(t);return{start:r>=0?t:e,end:r>=0?e:t}},C=function(e){return 6e4*e.getTimezoneOffset()},I=function(e){var t=e;!a()(e)&o()(e)&&(t=new Date(e));var r=t.getUTCHours();r=r<10?"0"+r:r;var n=t.getUTCMinutes();n=n<10?"0"+n:n;var i=t.getUTCSeconds();return i=i<10?"0"+i:i,"".concat(r,":").concat(n,":").concat(i)},k=function(e){var t=e;!a()(e)&o()(e)&&(t=new Date(e));var r=t.getUTCMonth()+1,n=t.getUTCDate();return r=r<10?"0"+r:r,n=n<10?"0"+n:n,"".concat(t.getUTCFullYear(),"-").concat(r,"-").concat(n)},x=function(e,t){var r=(0,p.mh)(e),n="HH:mm:SS";switch(t){case"time":return n;case"date":return r;default:return r+" "+n}},M=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).Domains,t=void 0===e?{}:e,r=arguments.length>1?arguments[1]:void 0,n=s()(t.DimensionDomain||[]).concat(),o=t["@version"]||t.version,i=l()(t,"SpaceDomain.BoundingBox");return i&&n.push({Identifier:"space",Domain:i}),n.map((function(e){var t=e.Identifier,n=e.Domain;return{source:{type:"multidim-extension",version:o,url:r},name:t,domain:n}}))},F=function(e,t,r){var n=h(t),o=h(r);return e.reduce((function(e,t){var r=h(t);return h(n)<r&&h(o)>r?[].concat(g(e),[t]):g(e)}),[])},A=function(e){var t=e.reduce((function(e,t){if(-1!==t.indexOf("/")){var r=m(t.split("/"),2),n=r[0],o=r[1];return[].concat(g(e),[n,o])}return[].concat(g(e),[t])}),[]).sort();return[t[0],t[t.length-1]]},Z=function(e,t,r){var n=f()(e);return("add"===r?n.add(t,"seconds"):n.subtract(t,"seconds")).toISOString()}}}]);