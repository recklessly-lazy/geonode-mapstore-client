(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[72445],{232062:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s=function(t){function e(e,i,s,o,n){t.call(this,e,i,n),this.originalEvent=s,this.pixel=i.getEventPixel(s),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==o&&o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(i(110255).Z)},486968:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s=function(t){function e(e,i,s,o,n){t.call(this,e,i,s.originalEvent,o,n),this.pointerEvent=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(232062).Z)},110255:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s=function(t){function e(e,i,s){t.call(this,e),this.map=i,this.frameState=void 0!==s?s:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(9520).ZP)},869669:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var s=i(421915),o=i(28795),n=i(432538),r=i(438667),h=function(t){function e(e,i,s){if(t.call(this),void 0!==s&&void 0===i)this.setFlatCoordinates(s,e);else{var o=i||0;this.setCenterAndRadius(e,o,s)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,s){var o=this.flatCoordinates,n=t-o[0],r=e-o[1],h=n*n+r*r;if(h<s){if(0===h)for(var a=0;a<this.stride;++a)i[a]=o[a];else{var c=this.getRadius()/Math.sqrt(h);i[0]=o[0]+c*n,i[1]=o[1]+c*r;for(var d=2;d<this.stride;++d)i[d]=o[d]}return i.length=this.stride,h}return s},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,s=t-i[0],o=e-i[1];return s*s+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return(0,s.T9)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return o.Z.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if((0,s.kK)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]||(0,s.H6)(t,this.intersectsCoordinate,this)}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],s=t.slice();s[e]=s[0]+i;for(var o=1;o<e;++o)s[e+o]=t[o];this.setFlatCoordinates(this.layout,s),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var s=this.flatCoordinates,o=(0,r.IG)(s,0,t,this.stride);s[o++]=s[0]+e;for(var n=1,h=this.stride;n<h;++n)s[o++]=s[n];s.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(n.ZP);h.prototype.transform;const a=h},372445:(t,e,i)=>{"use strict";i.d(e,{dO:()=>x,ZP:()=>N});var s=i(173381),o=i(623068),n=i(30006),r=i(486968),h=i(558493),a=i(690728),c=i(613002),d=i(9520),u=i(436403),_=i(421915),p=i(864011),l=i(869669),f=i(28795),y=i(944538),g=i(525642),v=i(552329),m=i(513987),C=i(468338),k=i(752043),T=i(640353),w=i(938024),P=i(173604),Z=i(429902),F=i(973410),E=i(831219),D="Point",L="LineString",O="Polygon",M="Circle",S="drawstart",I=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(d.ZP);function x(){return function(t,e){var i=(0,_.hI)(t),s=[[(0,_.hC)(i),(0,_.w$)(i),(0,_.Xv)(i),(0,_.rL)(i),(0,_.hC)(i)]],o=e;return o?o.setCoordinates(s):o=new T.ZP(s),o}}const N=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=p.Dv),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;return t===f.Z.POINT||t===f.Z.MULTI_POINT?e=D:t===f.Z.LINE_STRING||t===f.Z.MULTI_LINE_STRING?e=L:t===f.Z.POLYGON||t===f.Z.MULTI_POLYGON?e=O:t===f.Z.CIRCLE&&(e=M),e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===O?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:p.uX;var s,o=e.geometryFunction;if(!o)if(this.type_===f.Z.CIRCLE)o=function(t,e){var i=e||new l.Z([NaN,NaN]),s=(0,a.bI)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(s)),i};else{var n,r=this.mode_;r===D?n=k.Z:r===L?n=y.Z:r===O&&(n=T.ZP),o=function(t,e){var i=e;return i?r===O?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new n(t),i}}this.geometryFunction_=o,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Z.Z({source:new F.Z({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(s=(0,E.createEditingStyle)(),function(t,e){return s[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:u.rM,this.freehandCondition_,e.freehand?this.freehandCondition_=u.Bx:this.freehandCondition_=e.freehandCondition?e.freehandCondition:u.vY,(0,c.oL)(this,(0,h.v_)(P.Z.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===s.Z.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==D&&this.freehandCondition_(e);var i=e.type===n.Z.POINTERMOVE,o=!0;return!this.freehand_&&this.lastDragTime_&&e.type===n.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===n.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),o=!1):this.freehand_&&e.type===n.Z.POINTERDOWN?o=!1:i?(o=e.type===n.Z.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(e):(e.pointerEvent.pointerType==C.T2||e.type===n.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===n.Z.DBLCLICK&&(o=!1),t.prototype.handleEvent.call(this,e)&&o},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new r.Z(n.Z.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===M;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===D&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,s=e[0]-i[0],o=e[1]-i[1],n=s*s+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,s=[this.finishCoordinate_];if(this.mode_===L)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===O){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,s=[o[0][0],o[0][o[0].length-2]]}if(i)for(var n=t.map,r=0,h=s.length;r<h;r++){var a=s[r],c=n.getPixelFromCoordinate(a),d=t.pixel,u=d[0]-c[0],_=d[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(u*u+_*_)<=p){this.finishCoordinate_=a;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.Z(new k.Z(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===D?this.sketchCoords_=e.slice():this.mode_===O?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.Z(new y.Z(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new I(S,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,s,n=t.coordinate,r=this.sketchFeature_.getGeometry();if(this.mode_===D?i=this.sketchCoords_:this.mode_===O?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(n),r.getType()==f.Z.POLYGON&&this.mode_!==O){this.sketchLine_||(this.sketchLine_=new o.Z);var h=r.getLinearRing(0);(s=this.sketchLine_.getGeometry())?(s.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates()),s.changed()):(s=new y.Z(h.getFlatCoordinates(),h.getLayout()),this.sketchLine_.setGeometry(s))}else this.sketchLineCoords_&&(s=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,s=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===L?(this.finishCoordinate_=s.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),this.geometryFunction_(i,o)):this.mode_===O&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===L?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===O&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===L?(e.pop(),this.geometryFunction_(e,i)):this.mode_===O&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===f.Z.MULTI_POINT?t.setGeometry(new v.Z([e])):this.type_===f.Z.MULTI_LINE_STRING?t.setGeometry(new g.Z([e])):this.type_===f.Z.MULTI_POLYGON&&t.setGeometry(new m.Z([e])),this.dispatchEvent(new I("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new I(S,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(w.Z)},634681:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=function(t,e){this.dispatcher=t,this.mapping_=e};s.prototype.getEvents=function(){return Object.keys(this.mapping_)},s.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};const o=s},468338:(t,e,i)=>{"use strict";i.d(e,{yA:()=>o,T2:()=>n,R:()=>u,ZP:()=>_});var s=i(634681),o=1,n="mouse";function r(t){if(!this.isEventSimulatedFromTouch_(t)){o.toString()in this.pointerMap&&this.cancel(t);var e=u(t,this.dispatcher);this.pointerMap[o.toString()]=t,this.dispatcher.down(e,t)}}function h(t){if(!this.isEventSimulatedFromTouch_(t)){var e=u(t,this.dispatcher);this.dispatcher.move(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[o.toString()];if(e&&e.button===t.button){var i=u(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function c(t){if(!this.isEventSimulatedFromTouch_(t)){var e=u(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function d(t){if(!this.isEventSimulatedFromTouch_(t)){var e=u(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function u(t,e){var i=e.cloneEvent(t,t),s=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),s()},i.pointerId=o,i.isPrimary=!0,i.pointerType=n,i}const _=function(t){function e(e){var i={mousedown:r,mousemove:h,mouseup:a,mouseover:c,mouseout:d};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,s=t.clientY,o=0,n=e.length,r=void 0;o<n&&(r=e[o]);o++){var h=Math.abs(i-r[0]),a=Math.abs(s-r[1]);if(h<=25&&a<=25)return!0}return!1},e.prototype.cancel=function(t){var e=u(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[o.toString()]},e}(s.Z)}}]);