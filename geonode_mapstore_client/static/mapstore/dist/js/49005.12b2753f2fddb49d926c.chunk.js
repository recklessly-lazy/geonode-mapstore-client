(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[49005],{130072:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var o=r(124852),n=r.n(o),i=r(423482),a=r.n(i),s=r(409669),p=r.n(s),l=r(618446),u=r.n(l),c=r(352353),m=r.n(c),f=r(313311),g=r.n(f),y=r(984596),d=r.n(y),v=r(393546),h=r(664250),b=r(166287),O=r(169141);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,M(o.key),o)}}function S(e,t,r){return t=x(t),function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}(e,j()?Reflect.construct(t,r||[],x(e).constructor):t.apply(e,r))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function k(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=w(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:String(t)}var I=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return k(T(e=S(this,t,[].concat(o))),"addFeatures",(function(t){var r=new O.Z,o=null,n=!1;"FeatureCollection"===t.type?(o={features:m()(t.properties.visibility)||t.properties.visibility?t.features:[]},n=!!t.features):(o={geometry:t.geometry},n=!(!t.geometry||!t.geometry.geometries&&!t.geometry.coordinates)),t.container&&n&&(e._feature=r.readFeatures(E({type:t.type,properties:t.properties,id:t.msId},o),{dataProjection:t.featuresCrs}),e._feature.map((function(e){var r=e;return e.getProperties().isCircle&&(r=(0,h.aj)(e,t.crs||"EPSG:3857",t.featuresCrs)).setGeometry(r.getGeometry().transform(t.crs||"EPSG:3857",t.featuresCrs)),r})).forEach((function(e){return e.getGeometry().transform(t.featuresCrs,t.crs||"EPSG:3857")})),t.style&&t.style!==t.layerStyle&&e._feature.forEach((function(e){var r=[],o={};"FeatureCollection"===t.type?(o=g()(t.features,(function(t){return t.properties.id===e.getProperties().id})),r=(0,b.createStylesAsync)(d()(o.style))):(r=(0,b.createStylesAsync)(d()(t.style)),o={type:t.type,geometry:t.geometry,properties:t.properties,style:t.style}),p().all(r).then((function(t){e.setStyle((function(){return(0,v.Cw)(E(E({},o),{},{style:t}))}))}))})),t.container.getSource().addFeatures(e._feature))})),k(T(e),"removeFromContainer",(function(){if(e._feature)if(Array.isArray(e._feature)){var t=e.props.container.getSource();e._feature.map((function(e){var r=e.getId();void 0!==r&&t.getFeatureById(r)?t.removeFeature(t.getFeatureById(r)):t.removeFeature(e)}))}else e.props.container.getSource().removeFeature(e._feature)})),e}var r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){this.addFeatures(this.props)}},{key:"shouldComponentUpdate",value:function(e){return!(u()(e.properties,this.props.properties)&&u()(e.geometry,this.props.geometry)&&u()(e.features,this.props.features)&&u()(e.crs,this.props.crs)&&u()(e.style,this.props.style))}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.removeFromContainer(),this.addFeatures(e)}},{key:"componentWillUnmount",value:function(){this.removeFromContainer()}},{key:"render",value:function(){return null}}])&&L(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(n().Component);k(I,"propTypes",{type:a().string,layerStyle:a().object,style:a().object,properties:a().object,crs:a().string,container:a().object,features:a().array,geometry:a().object,msId:a().oneOfType([a().string,a().number]),featuresCrs:a().string}),k(I,"defaultProps",{featuresCrs:"EPSG:4326"})},145697:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var o=r(423482),n=r.n(o),i=r(124852),a=r.n(i),s=r(608010),p=r(986267),l=r(727418),u=r.n(l),c=r(49977),m=r.n(c),f=r(281763),g=r.n(f),y=r(701469),d=r.n(y),v=r(957557),h=r.n(v),b=r(618446),O=r.n(b),w=r(414293),P=r.n(w),E=r(552259),L=["minResolution","maxResolution","disableResolutionLimits"];function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,F(o.key),o)}}function C(e,t,r){return t=M(t),function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}(e,k()?Reflect.construct(t,r||[],M(e).constructor):t.apply(e,r))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function _(e,t,r){return(t=F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=S(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:String(t)}var R=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return _(I(e=C(this,t,[].concat(o))),"setLayerVisibility",(function(t){var r=e.props.options&&!1!==e.props.options.visibility,o=t.options&&!1!==t.options.visibility;o!==r&&e.layer&&e.isValid()&&e.layer.setVisible(o)})),_(I(e),"setLayerOpacity",(function(t){t!==(e.props.options&&void 0!==e.props.options.opacity?e.props.options.opacity:1)&&e.layer&&e.layer.setOpacity(t)})),_(I(e),"generateOpts",(function(t,r,o,n,i,a){var s=t.minResolution,p=t.maxResolution,l=t.disableResolutionLimits,c=x(x({},function(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(t,L)),!l&&{minResolution:s,maxResolution:p,minZoom:P()(p)?void 0:(0,E.getZoomFromResolution)(p,a),maxZoom:P()(s)?void 0:(0,E.getZoomFromResolution)(s,a)});return u()({},c,g()(r)?{zIndex:r}:null,{srs:o,onError:function(){e.props.onCreationError(c)},securityToken:n,env:i})})),_(I(e),"createLayer",(function(t,r,o,n,i,a){if(t){var l=e.generateOpts(r,o,(0,p.normalizeSRS)(e.props.srs),n,i,a);e.layer=s.default.createLayer(t,l,e.props.map,e.props.mapId);var u=s.default.isCompatible(t,l);if(e.layer&&!e.layer.detached){var c=e.props.map,m=c&&c.getView().getProjection().getExtent(),f=r&&r.bbox&&r.bbox.bounds,g=m&&(0,p.reprojectBbox)(m,e.props.srs,"EPSG:4326"),y=f&&(0,p.reprojectBbox)((0,p.getExtentFromNormalized)(f,e.props.srs).extent,"EPSG:4326");y&&2===y.length&&d()(y[1])&&(y=y[1]),(g&&y&&!(0,p.isBboxCompatible)((0,p.getPolygonFromExtent)(g),(0,p.getPolygonFromExtent)(y))||!u)&&e.props.onWarning({title:"warning",message:"notification.incompatibleDataAndProjection",action:{label:"close"},position:"tc",uid:"1"}),e.addLayer(r)}e.layer&&e.layer.get&&e.layer.get("getElevation")&&e.props.map.set("elevationLayer",e.layer),e.forceUpdate()}})),_(I(e),"updateLayer",(function(t,r){if(t.position===r.position&&t.srs===r.srs&&t.securityToken===r.securityToken){if(t.options===r.options)return;if(O()(h()(t.options,["loading"]),h()(r.options,["loading"])))return}var o=s.default.updateLayer(e.props.type,e.layer,e.generateOpts(t.options,t.position,t.projection,t.securityToken,t.env,t.resolutions),e.generateOpts(r.options,r.position,r.projection,r.securityToken,r.env,r.resolutions),e.props.map,e.props.mapId);o&&(o.detached?e.layer=o:(e.props.map.removeLayer(e.layer),e.layer=o,e.addLayer(t.options)))})),_(I(e),"addLayer",(function(t){if(e.isValid()){e.props.map.addLayer(e.layer);var r=new(m().Subject),o=new(m().Subject);t.handleClickOnLayer&&e.layer.set("handleClickOnLayer",!0),e.layer.getSource().on("tileloadstart",(function(){0===e.tilestoload?(e.props.onLayerLoading(t.id),e.tilestoload++):e.tilestoload++})),e.layer.getSource().on("tileloadend",(function(){r.next({type:"tileloadend"}),e.tilestoload--,0===e.tilestoload&&o.next()})),e.layer.getSource().on("tileloaderror",(function(t){r.next({type:"tileloaderror",event:t}),e.tilestoload--,0===e.tilestoload&&o.next()})),r.bufferWhen((function(){return o})).subscribe({next:function(r){var o=r.filter((function(e){return"tileloaderror"===e.type}));o.length>0&&(t&&!t.hideErrors||!t)?(e.props.onLayerLoad(t.id,{error:!0}),e.props.onLayerError(t.id,r.length,o.length)):e.props.onLayerLoad(t.id)}}),e.tileLoadEndStream$=r,e.tileStopStream$=o;var n=new(m().Subject),i=new(m().Subject);if(e.layer.getSource().on("imageloadstart",(function(){0===e.imagestoload?(e.props.onLayerLoading(t.id),e.imagestoload++):e.imagestoload++})),e.layer.getSource().on("imageloadend",(function(){e.imagestoload--,n.next({type:"imageloadend"}),0===e.imagestoload&&i.next()})),e.layer.getSource().on("imageloaderror",(function(t){e.imagestoload--,n.next({type:"imageloaderror",event:t}),0===e.imagestoload&&i.next()})),n.bufferWhen((function(){return i})).subscribe({next:function(r){var o=r.filter((function(e){return"imageloaderror"===e.type}));o.length>0?(e.props.onLayerLoad(t.id,{error:!0}),(t&&!t.hideErrors||!t)&&e.props.onLayerError(t.id,r.length,o.length)):e.props.onLayerLoad(t.id)}}),e.imageLoadEndStream$=n,e.imageStopStream$=i,e.layer.getSource().on("vectorerror",(function(){e.props.onLayerLoad(t.id,{error:!0})})),t.refresh){var a=0;e.refreshTimer=setInterval((function(){e.layer.getSource().updateParams(u()({},t.params,{_refreshCounter:a++}))}),t.refresh)}}})),_(I(e),"isValid",(function(){var t=s.default.isValid(e.props.type,e.layer);return e.valid=t,t})),e}var r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){this.valid=!0,this.tilestoload=0,this.imagestoload=0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken,this.props.env,this.props.resolutions)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setLayerVisibility(e);var t=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(t),e.position!==this.props.position&&this.layer&&this.layer.setZIndex&&this.layer.setZIndex(e.position),this.props.options&&this.updateLayer(e,this.props)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.tileLoadEndStream$&&(this.tileLoadEndStream$.complete(),this.tileStopStream$.complete(),this.imageLoadEndStream$.complete(),this.imageStopStream$.complete()),this.layer.detached?this.layer.remove():this.props.map.removeLayer(this.layer)),this.refreshTimer&&clearInterval(this.refreshTimer),s.default.removeLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,r=t?a().Children.map(this.props.children,(function(r){return r?a().cloneElement(r,{container:t,styleName:e.props.options&&e.props.options.styleName}):null})):null;return a().createElement(a().Fragment,null,r)}return s.default.renderLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}}])&&T(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a().Component);_(R,"propTypes",{onWarning:n().func,maxExtent:n().array,map:n().object,mapId:n().string,srs:n().string,type:n().string,options:n().object,onLayerLoading:n().func,onLayerError:n().func,onCreationError:n().func,onLayerLoad:n().func,position:n().number,observables:n().array,securityToken:n().string,env:n().array,resolutions:n().array}),_(R,"defaultProps",{observables:[],onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},onCreationError:function(){},onWarning:function(){},srs:"EPSG:3857"})},790596:(e,t,r)=>{"use strict";r.d(t,{Z:()=>J});var o=r(537566),n=r(573800),i=r(386306),a=r(370878),s=r(978471),p=r(276773),l=r(218672),u=r(99937),c=r(169141),m=r(490173),f=r(301908),g=r(423482),y=r.n(g),d=r(124852),v=r.n(d),h=r(727418),b=r.n(h),O=r(986267),w=r(737275),P=r(552259),E=r(444183);var L=r(838946),S=r(618446),j=r.n(S),x=r(313311),T=r.n(x),C=r(823493),k=r.n(C),M=r(701469),I=r.n(M),Z=r(414293),_=r.n(Z),F=(r(745902),r(893379)),R=r.n(F),D=r(464006);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function A(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function B(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,K(o.key),o)}}function z(e,t,r){return t=H(t),function(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}(e,N()?Reflect.construct(t,r||[],H(e).constructor):t.apply(e,r))}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function $(e,t,r){return(t=K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=G(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:String(t)}R()(D.Z,{insert:"head",singleton:!1}),D.Z.locals;var q=new c.Z,X=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return $(U(e=z(this,t,[].concat(o))),"getDocument",(function(){return e.props.document||document})),$(U(e),"getResolutions",(function(t){if(e.props.mapOptions&&e.props.mapOptions.view&&e.props.mapOptions.view.resolutions)return e.props.mapOptions.view.resolutions;var r=(t?(0,l.U2)(t):e.map.getView().getProjection()).getExtent();return(0,P.getResolutionsForProjection)(null!=t?t:e.map.getView().getProjection().getCode(),e.props.mapOptions.minResolution,e.props.mapOptions.maxResolution,e.props.mapOptions.minZoom,e.props.mapOptions.maxZoom,e.props.mapOptions.zoomFactor,r)})),$(U(e),"mouseMoveEvent",(function(t){if(!t.dragging&&t.coordinate){var r=e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation"),o=t.coordinate.slice(),n=(0,l.bU)(o,e.props.projection),i=n[0]/360%1*360;i<-180?i+=360:i>180&&(i-=360),e.props.onMouseMove({y:n[1]||0,x:i||0,z:e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation")(o,t.pixel)||void 0,crs:"EPSG:4326",pixel:{x:t.pixel[0],y:t.pixel[1]},latlng:{lat:n[1],lng:i,z:r&&r(o,t.pixel)||void 0},lat:n[1],lng:i,rawPos:t.coordinate.slice()})}})),$(U(e),"updateMapInfoState",(function(){var t=e.map.getView(),r=t.getCenter(),o=t.getProjection().getExtent()||(0,O.getExtentForProjection)(e.props.projection),n=t.getProjection().getCode();if(-1!==["EPSG:3857","EPSG:900913","EPSG:4326"].indexOf(n)||r&&r[0]>=o[0]&&r[0]<=o[2]&&r[1]>=o[1]&&r[1]<=o[3]){var i=e.normalizeCenter(t.getCenter()),a=t.calculateExtent(e.map.getSize()),s={width:e.map.getSize()[0],height:e.map.getSize()[1]};e.props.onMapViewChanges({x:i[0]||0,y:i[1]||0,crs:"EPSG:4326"},t.getZoom(),{bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]},crs:n,rotation:t.getRotation()},s,e.props.id,e.props.projection,void 0,t.getResolution())}})),$(U(e),"haveResolutionsChanged",(function(t){var r=e.props.mapOptions&&e.props.mapOptions.view?e.props.mapOptions.view.resolutions:void 0,o=t.mapOptions&&t.mapOptions.view?t.mapOptions.view.resolutions:void 0;return!j()(r,o)})),$(U(e),"createView",(function(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=n.restrictedExtent&&n.crs&&(0,O.reprojectBbox)(n.restrictedExtent,n.crs,(0,O.normalizeSRS)(r)),a=!o||o&&!o.view?b()({},o,{extent:i}):b()({},o),s=b()({},{projection:(0,O.normalizeSRS)(r),center:[e.x,e.y],zoom:t,minZoom:n.minZoom},a||{});return new p.ZP(s)})),$(U(e),"_updateMapPositionFromNewProps",(function(t){var r=e.map.getView(),o=e.props.center;if(t.center.y!==o.y||t.center.x!==o.x){var n=(0,O.reproject)({x:t.center.x,y:t.center.y},"EPSG:4326",t.projection,!0);r.setCenter([n.x,n.y])}Math.round(t.zoom)!==e.props.zoom&&r.setZoom(Math.round(t.zoom)),(t.bbox&&void 0!==t.bbox.rotation||e.bbox&&void 0!==e.bbox.rotation&&t.bbox.rotation!==e.props.bbox.rotation)&&r.setRotation(t.bbox.rotation)})),$(U(e),"normalizeCenter",(function(t){var r=(0,O.reproject)({x:t[0],y:t[1]},e.props.projection,"EPSG:4326",!0);return[r.x,r.y]})),$(U(e),"setMousePointer",(function(t){e.map&&(e.map.getViewport().style.cursor=t||"auto")})),$(U(e),"registerHooks",(function(){e.props.hookRegister.registerHook(P.default.RESOLUTIONS_HOOK,(function(t){return e.getResolutions(t)})),e.props.hookRegister.registerHook(P.default.RESOLUTION_HOOK,(function(){return e.map.getView().getResolution()})),e.props.hookRegister.registerHook(P.default.COMPUTE_BBOX_HOOK,(function(t,r){var o=(0,O.reproject)([t.x,t.y],"EPSG:4326",e.props.projection),n=e.createView(o,r,e.props.projection,e.props.mapOptions&&e.props.mapOptions.view,e.props.limits),i=e.map.getSize(),a=n.calculateExtent(i);return{bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]},crs:e.props.projection,rotation:e.map.getView().getRotation()}})),e.props.hookRegister.registerHook(P.default.GET_PIXEL_FROM_COORDINATES_HOOK,(function(t){return e.map.getPixelFromCoordinate(t)})),e.props.hookRegister.registerHook(P.default.GET_COORDINATES_FROM_PIXEL_HOOK,(function(t){return e.map.getCoordinateFromPixel(t)})),e.props.hookRegister.registerHook(P.default.ZOOM_TO_EXTENT_HOOK,(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.padding,n=r.crs,i=r.maxZoom,a=r.duration,s=r.nearest,p=(0,O.reprojectBbox)(t,n,e.props.projection);p&&p[0]===p[2]&&p[1]===p[3]&&"EPSG:4326"===n&&I()(t)&&-180===t[0]&&-90===t[1]&&(p=e.map.getView().getProjection().getExtent());var l=i;p&&p[0]===p[2]&&p[1]===p[3]&&_()(l)&&(l=21),e.map.getView().fit(p,{size:e.map.getSize(),padding:o&&[o.top||0,o.right||0,o.bottom||0,o.left||0],maxZoom:l,duration:a,nearest:s})}))})),e}var r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),r=t,c=[{key:"componentDidMount",value:function(){var e=this;[{code:"EPSG:4269",def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",axisOrientation:"neu",extent:[-172.54,23.81,-47.74,86.46],worldExtent:[-172.54,23.81,-47.74,86.46]}].concat(A(this.props.projectionDefs)).forEach((function(e){var t,r,o,n,i,a=m.default.defs(e.code);t=e.code,r=e.extent,o=e.worldExtent,n=e.axisOrientation||a.axis||"enu",i=a.units||"m",(0,l.Sx)(new E.Z({code:t,extent:r,worldExtent:o,axisOrientation:n,units:i}))}));var t=(0,O.reproject)([this.props.center.x,this.props.center.y],"EPSG:4326",this.props.projection);(0,f.z)(m.default);var r=b()(this.props.interactive?{}:{doubleClickZoom:!1,dragPan:!1,altShiftDragRotate:!1,keyboard:!1,mouseWheelZoom:!1,shiftDragZoom:!1,pinchRotate:!1,pinchZoom:!1},this.props.mapOptions.interactions),p=(0,o.ce)(b()({dragPan:!1,mouseWheelZoom:!1},r,{}));void 0!==r&&void 0!==r.dragPan||(this.dragPanInteraction=new n.Z({kinetic:!1}),p.extend([this.dragPanInteraction])),void 0!==r&&void 0!==r.mouseWheelZoom||(this.mouseWheelInteraction=new i.Z({duration:0}),p.extend([this.mouseWheelInteraction]));var u=(0,a.c)(b()({zoom:this.props.zoomControl,attributionOptions:b()({collapsible:!1},this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container?{target:this.getDocument().querySelector(this.props.mapOptions.attribution.container)}:{})},this.props.mapOptions.controls)),c=new s.default({layers:[],controls:u,interactions:p,maxTilesLoading:1/0,target:this.getDocument().getElementById(this.props.id)||"".concat(this.props.id),view:this.createView(t,Math.round(this.props.zoom),this.props.projection,this.props.mapOptions&&this.props.mapOptions.view,this.props.limits)});this.map=c,this.props.registerHooks&&this.registerHooks(),this.map.disabledListeners={},this.map.disableEventListener=function(t){e.map.disabledListeners[t]=!0},this.map.enableEventListener=function(t){delete e.map.disabledListeners[t]},this.map.getViewport().addEventListener("mouseout",(function(){setTimeout((function(){return e.props.onMouseOut()}),150)})),c.on("moveend",this.updateMapInfoState),c.on("singleclick",(function(t){if(e.props.onClick&&!e.map.disabledListeners.singleclick){var r=e.map.getView(),o=t.coordinate.slice(),n=r.getProjection().getExtent()||(0,O.getExtentForProjection)(e.props.projection);if("EPSG:4326"===e.props.projection&&(o[0]=(0,O.normalizeLng)(o[0])),"EPSG:900913"!==e.props.projection&&"EPSG:3857"!==e.props.projection||(o=(0,l.bU)(o,e.props.projection),n=(0,O.reprojectBbox)(n,e.props.projection,"EPSG:4326")),o[0]>=n[0]&&o[0]<=n[2]&&o[1]>=n[1]&&o[1]<=n[3]){var i,a;i="EPSG:900913"!==e.props.projection&&"EPSG:3857"!==e.props.projection?(0,O.reproject)(o,e.props.projection,"EPSG:4326"):{x:o[0],y:o[1]};var s={};e.markerPresent=!1,c.forEachFeatureAtPixel(t.pixel,(function(t,r){if(r&&r.get("handleClickOnLayer")){var o=t.getGeometry();if(!e.markerPresent&&"Point"===o.getType()){e.markerPresent=!0,a=r.get("msId");var n=(0,l.bU)(o.getFirstCoordinate(),e.props.projection);i={x:n[0],y:n[1]}}}if(null!=r&&r.get("msId")){var p=q.writeFeatureObject(t,{featureProjection:e.props.projection,dataProjection:"EPSG:4326"});s[r.get("msId")]=s[r.get("msId")]?[].concat(A(s[r.get("msId")]),[p]):[p]}}));var p=Object.keys(s).map((function(e){return{id:e,features:s[e]}})),u=(0,O.normalizeLng)(i.x),m=e.map.get("elevationLayer")&&e.map.get("elevationLayer").get("getElevation");e.props.onClick({pixel:{x:t.pixel[0],y:t.pixel[1]},latlng:{lat:i.y,lng:u,z:m&&m(o,t.pixel)||void 0},rawPos:t.coordinate.slice(),modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,metaKey:t.originalEvent.metaKey,shift:t.originalEvent.shiftKey},intersectedFeatures:p},a)}}}));var g=k()(this.mouseMoveEvent,100);c.on("pointermove",g),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.props.onResolutionsChange(this.getResolutions())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?this.map.addControl(new u.Z):this.map.removeControl(this.map.getControls().getArray().filter((function(e){return e instanceof u.Z}))[0])),this.map&&(this.props.mapOptions&&this.props.mapOptions.interactions)!==(e.mapOptions&&e.mapOptions.interactions)){var r=e.mapOptions.interactions||{},o=this.map.getInteractions().getArray();Object.keys(r).forEach((function(e){var n=L.hH[e]||{},i=n.Instance,a=n.options,s=T()(o,(function(t){return L.hH[e]&&t instanceof i}));s?s.setActive(r[e]):r[e]&&i&&t.map.addInteraction(new i(a))}))}if(this.map&&this.props.id!==e.mapStateSource&&this._updateMapPositionFromNewProps(e),this.map&&e.resize!==this.props.resize&&setTimeout((function(){t.map.updateSize()}),0),this.map&&(this.props.projection!==e.projection||this.haveResolutionsChanged(e))||this.props.limits!==e.limits){if(this.props.projection!==e.projection||this.props.limits!==e.limits){var n=e.projection,i=(0,O.reproject)([e.center.x,e.center.y],"EPSG:4326",n);this.map.setView(this.createView(i,e.zoom,e.projection,e.mapOptions&&e.mapOptions.view,e.limits)),this.props.onResolutionsChange(this.getResolutions())}this.map.getLayers().forEach((function(e){var t=e.getSource();t.getTileLoadFunction&&t.setTileLoadFunction(t.getTileLoadFunction())})),this.map.render()}}},{key:"componentWillUnmount",value:function(){var e=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&this.getDocument().querySelector(this.props.mapOptions.attribution.container);if(e&&e.querySelector(".ol-attribution"))try{e.removeChild(e.querySelector(".ol-attribution"))}catch(e){}this.map&&this.map.setTarget(null)}},{key:"render",value:function(){var e=this,t=this.map,r=t?v().Children.map(this.props.children,(function(r){return r?v().cloneElement(r,{map:t,mapId:e.props.id,onLayerLoading:e.props.onLayerLoading,onLayerError:e.props.onLayerError,onLayerLoad:e.props.onLayerLoad,projection:e.props.projection,onCreationError:e.props.onCreationError,resolutions:e.getResolutions()}):null})):null;return v().createElement("div",{id:this.props.id,style:this.props.style},r)}}],c&&B(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),t}(v().Component);$(X,"propTypes",{id:y().string,document:y().object,style:y().object,center:w.ZP.PropTypes.center,zoom:y().number.isRequired,mapStateSource:w.ZP.PropTypes.mapStateSource,projection:y().string,projectionDefs:y().array,onMapViewChanges:y().func,onResolutionsChange:y().func,onClick:y().func,mapOptions:y().object,zoomControl:y().bool,mousePointer:y().string,onMouseMove:y().func,onLayerLoading:y().func,onLayerLoad:y().func,onLayerError:y().func,resize:y().oneOfType([y().number,y().string]),measurement:y().object,changeMeasurementState:y().func,registerHooks:y().bool,hookRegister:y().object,interactive:y().bool,onCreationError:y().func,bbox:y().object,wpsBounds:y().object,onWarning:y().func,maxExtent:y().array,limits:y().object,onMouseOut:y().func}),$(X,"defaultProps",{id:"map",onMapViewChanges:function(){},onResolutionsChange:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},mapOptions:{},projection:"EPSG:3857",projectionDefs:[],onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:P.default,interactive:!0,onMouseOut:function(){},center:{x:13,y:45,crs:"EPSG:4326"},zoom:5});const J=X},505904:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Q});var o=r(124852),n=r.n(o),i=r(423482),a=r.n(i),s=r(59854),p=r.n(s),l=r(227361),u=r.n(l),c=r(618446),m=r.n(c),f=r(843624),g=r.n(f),y=r(610928),d=r.n(y),v=r(986267),h=r(808797),b=r(761868),O=r(393546),w=r(86638),P=r(838946),E=r(944538),L=r(640353),S=r(193409),j=r(973410),x=r(429902),T=r(623068),C=r(831219),k=r(898185),M=r(120767),I=r(409371),Z=r(372445),_=r(169141),F=r(756834),R=r(870295),D=["textId","type"];function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function H(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,J(o.key),o)}}function U(e,t,r){return t=$(t),function(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}(e,W()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function X(e,t,r){return(t=J(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=G(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:String(t)}var Y=function(e){return e.getView().getProjection().getCode()},Q=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return X(K(e=U(this,t,[].concat(o))),"getLength",(function(t,r){if("Bearing"===r.measurement.geomType&&t.length>1)return(0,v.calculateAzimuth)(t[0],t[1],Y(r.map));var o=e.reprojectedCoordinatesIn4326(t);return(0,v.calculateDistance)(o,r.measurement.lengthFormula)})),X(K(e),"getArea",(function(t){return e.calculateGeodesicArea(t.getLinearRing(0).getCoordinates())})),X(K(e),"updateInteraction",(function(t,r){r.some((function(e){return u()(e,"properties.disabled")}))?e.removeDrawInteraction():null===e.drawInteraction&&(e.restoreDrawState(),e.addDrawInteraction(t))})),X(K(e),"convertPolyToLineFeature",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[],o=(0,h.wd)(t[0]);return o&&(0,h.wd)(t[1])?r=e.reprojectedCoordinatesFrom4326([t[0],t[1]]):o&&(r=e.reprojectedCoordinatesFrom4326([t[0]])),r.length?new E.Z(r):null})),X(K(e),"modifyFeatures",(function(t){var r,o,n,i,a,s=t.measurement||{},p=s.currentFeature,l=s.features,u=(null===(r=l[p])||void 0===r||null===(o=r.geometry)||void 0===o?void 0:o.coordinates)||[],c=(null===(n=l[p])||void 0===n||null===(i=n.geometry)||void 0===i?void 0:i.type)||"";"Polygon"===c&&(u=(null===(a=u)||void 0===a?void 0:a[0])||[]);var f,g,y,d,v,O,w=u.length,P=u.some((function(e){return!(0,h.wd)(e)}));if(!P&&"LineString"===c&&w<2){var L=e.reprojectedCoordinatesFrom4326(u);f=new E.Z(L),l[p]=(0,b.t8)("properties.disabled",!0,(0,b.t8)("geometry.coordinates",[].concat(B(u),[["",""]]),l[p]))}else!P&&"Polygon"===c&&w<=4&&m()(u[w-1],u[w-2])&&(u.splice(2,0,["",""]),u.pop(),l[p]=(0,b.t8)("properties.disabled",!0,(0,b.t8)("geometry.coordinates",[u],l[p])));return"Polygon"===c&&w<=4&&(f=e.convertPolyToLineFeature(u)),!P&&m()(u[w-1],u[w-2])&&(null===(g=l[p])||void 0===g||null===(y=g.geometry)||void 0===y||null===(d=y.coordinates)||void 0===d||null===(v=d[0])||void 0===v||v.pop()),f&&(e.source.clear(),O=new T.Z({geometry:f})),[l,O]})),X(K(e),"updateFeatures",(function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,i,a,s=[],p=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;p=!1}else for(;!(p=(o=i.call(r)).done)&&(s.push(o.value),s.length!==t);p=!0);}catch(e){l=!0,n=e}finally{try{if(!p&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw n}}return s}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.modifyFeatures(t)||[],2),o=r[0],n=r[1],i=e.source.getFeatures();e.removeMeasureTooltips(),e.removeSegmentLengthOverlays(),e.source.clear(),e.textLabels=[],e.segmentLengths=[];var a=null;e.updateInteraction(t,o);var s=o.map((function(r,o){if(u()(r,"properties.disabled"))return a=o,[r,i&&i[o]&&i[o].getGeometry()||(null==n?void 0:n.getGeometry())];var s=r.geometry.type,p=u()(r,"properties.values",[]),l="bearing"===(p[0]||{}).type||!(p[0]||{}).type&&t.measurement.bearingMeasureEnabled,c="Polygon"===s?r.geometry.coordinates[0]:r.geometry.coordinates,m=c;"LineString"===s&&c.length>=2&&!l&&(m=(0,v.transformLineToArcs)(c));var f=e.reprojectedCoordinatesFrom4326(m),g="Polygon"===s?new L.ZP([f]):new E.Z(f),y={Point:function(){return c},LineString:function(){return l?(0,v.calculateAzimuth)(c[0],c[1],"EPSG:4326"):(0,v.calculateDistance)(c,t.measurement.lengthFormula)},Polygon:function(){return e.getArea(g)}},b={LineString:function(){return e.formatLengthValue(l?(0,v.calculateAzimuth)(c[0],c[1],"EPSG:4326"):(0,v.calculateDistance)(c,t.measurement.lengthFormula),t.uom,l,t.measurement.trueBearing)},Polygon:function(){return e.formatAreaValue(e.getArea(g),t.uom)}},O=e.reprojectedCoordinatesFrom4326(c);if(!l)for(var w=0;w<c.length-1;++w){e.createSegmentLengthOverlay();var P=(0,v.calculateAzimuth)(c[w],c[w+1],"EPSG:4326"),S=(0,v.calculateDistance)([c[w],c[w+1]],t.measurement.lengthFormula),j=e.props.measurement&&e.props.measurement.showLengthAndBearingLabel&&" | "+(0,h.rp)(P,e.props.measurement.trueBearing)||"",x=e.formatLengthValue(S,t.uom,l)+j;d()(e.segmentOverlayElements).innerHTML=x;var T=(0,v.midpoint)(c[w],c[w+1],!0),C=(0,v.midpoint)(O[w],O[w+1],!0);if("LineString"===s){var k=m[100*w+50];k&&(T=k,C=(0,v.pointObjectToArray)((0,v.reproject)(k,"EPSG:4326",Y(e.props.map))))}d()(e.segmentOverlays).setPosition(C),e.textLabels[e.segmentOverlays.length-1]={text:x,position:T},e.segmentLengths[e.segmentOverlays.length-1]={value:S,type:l?"bearing":"length"}}if(e.createMeasureTooltip(),"Polygon"===s&&e.createMeasureTooltip(),e.tooltipCoord="LineString"===s?d()(O):e.tooltipCoord=g.getInteriorPoint().getCoordinates(),d()(e.measureTooltipElements).innerHTML=b[s](),d()(e.measureTooltips).setPosition(e.tooltipCoord),e.outputValues[e.measureTooltipElements.length-1]={value:y[s](),type:"Polygon"===s?"area":l?"bearing":"length"},"Polygon"===s){var M=(0,v.calculateDistance)(c,t.measurement.lengthFormula);e.measureTooltipElements[e.measureTooltipElements.length-2].innerHTML=e.formatLengthValue(M,t.uom,!1),e.outputValues[e.measureTooltipElements.length-2]={value:M,type:"length"},e.perimeterTooltipCoord=d()(O),e.measureTooltips[e.measureTooltipElements.length-2].setPosition(e.perimeterTooltipCoord),e.measureTooltips[e.measureTooltipElements.length-2].setOffset([0,-7])}var I=V({},r);return I.properties=r.properties?V({},r.properties):{},I.properties.values=[{value:(y[s]||function(){return null})(),formattedValue:(b[s]||function(){return null})(),position:"Polygon"===s?(0,v.pointObjectToArray)((0,v.reproject)(g.getInteriorPoint().getCoordinates(),Y(t.map),"EPSG:4326")):d()(c),type:(p[0]||{}).type||(t.measurement.pointMeasureEnabled?"point":t.measurement.lineMeasureEnabled?"length":t.measurement.areaMeasureEnabled?"area":t.measurement.bearingMeasureEnabled?"bearing":void 0)}].concat(B("Polygon"===s?[{value:(0,v.calculateDistance)(c,t.measurement.lengthFormula),formattedValue:e.formatLengthValue((0,v.calculateDistance)(c,t.measurement.lengthFormula),t.uom,!1),position:d()(c),uom:t.uom,type:"length"}]:[])),[I,g]})),p=s.map((function(e){return e[0]})),l=s.map((function(e){return e[1]}));e.source.addFeatures(l.filter((function(e){return!!e})).map((function(e){return new T.Z({geometry:e})})));var c=B(e.textLabels);p.map((function(e,t){var r,o,n=!(null===(r=e.properties)||void 0===r||null===(o=r.values)||void 0===o||!o.find((function(e){return"bearing"===e.type}))),i="Polygon"===e.geometry.type,s=i||n?0:1,p=i?e.geometry.coordinates[0]:e.geometry.coordinates,l=p.some((function(e){return!(0,h.wd)(e)})),u=i?p.length-1:n?0:p.length;return e.geometry.textLabels=null!==a&&a===t&&l?e.geometry.textLabels.concat([{text:"0"}]):c.splice(0,u-s)||[],e})),e.props.changeGeometry(p),e.props.setTextLabels(B(e.textLabels));for(var m=0;m<e.measureTooltipElements.length;++m)e.measureTooltipElements[m]&&(e.measureTooltipElements[m].className="tooltip tooltip-static");for(var f=0;f<e.segmentOverlayElements.length;++f)e.segmentOverlayElements[f]&&(e.segmentOverlayElements[f].className="segment-overlay segment-overlay-static")})),X(K(e),"updateMeasures",(function(t){var r=function(r){var o=r.type,n=r.value;return"length"===o?e.formatLengthValue(n,t.uom,!1):"area"===o?e.formatAreaValue(n,t.uom):e.formatLengthValue(n,t.uom,!0,t.measurement.trueBearing)};e.outputValues=e.outputValues||[],e.segmentOverlayElements=e.segmentOverlayElements||[],e.textLabels=e.textLabels||[];for(var o=0;o<e.outputValues.length;++o)e.outputValues[o]&&(e.measureTooltipElements[o].innerHTML=r(e.outputValues[o]));for(var n=0;n<e.segmentOverlayElements.length;++n)if(e.segmentOverlayElements[n]){var i=r(e.segmentLengths[n]),a=e.textLabels[n].text,s=a.indexOf(" | ");a=a.replace(a.substring(0,-1!==s?s:a.length),i),e.segmentOverlayElements[n].innerHTML=a,e.textLabels[n].text=a}e.drawing||e.props.setTextLabels(B(e.textLabels));var p=(t.measurement.features||[]).map((function(e){return V(V({},e),e.properties?{properties:V(V({},e.properties),{},{values:(e.properties.values||[]).map((function(e){return V(V({},e),{},{formattedValue:r({type:e.type,value:e.value})})}))})}:{})}));e.props.changeGeometry(p)})),X(K(e),"addFeature",(function(t){var r=!1;e.source||(e.source=new j.Z,r=!0);var o=(0,v.reprojectGeoJson)(t,"EPSG:4326",Y(e.props.map)).geometry,n=new T.Z({geometry:(0,P.y7)(o)});e.source.addFeature(n),r&&e.measureLayer.setSource(e.source)})),X(K(e),"resetGeometry",(function(){e.source.clear(),e.props.resetGeometry()})),X(K(e),"saveDrawState",(function(){var t,r,o,n;e.savedDrawState={textLabels:e.textLabels.slice(),segmentLengths:e.segmentLengths.slice(),measureTooltipsLength:null!==(t=null===(r=e.measureTooltips)||void 0===r?void 0:r.length)&&void 0!==t?t:0,segmentOverlaysLength:null!==(o=null===(n=e.segmentOverlays)||void 0===n?void 0:n.length)&&void 0!==o?o:0}})),X(K(e),"discardDrawState",(function(){e.savedDrawState=null})),X(K(e),"restoreDrawState",(function(){if(e.savedDrawState){e.textLabels=e.savedDrawState.textLabels,e.segmentLengths=e.savedDrawState.segmentLengths;for(var t=e.savedDrawState.measureTooltipsLength;t<e.measureTooltips.length;++t)e.props.map.removeOverlay(e.measureTooltips[t]),e.measureTooltipElements[t].parentNode.removeChild(e.measureTooltipElements[t]);for(var r=e.savedDrawState.segmentOverlaysLength;r<e.segmentOverlays.length;++r)e.props.map.removeOverlay(e.segmentOverlays[r]),e.segmentOverlayElements[r].parentNode.removeChild(e.segmentOverlayElements[r]);e.measureTooltips.splice(e.savedDrawState.measureTooltipsLength),e.measureTooltipElements.splice(e.savedDrawState.measureTooltipsLength),e.outputValues.splice(e.savedDrawState.measureTooltipsLength),e.segmentOverlays.splice(e.savedDrawState.segmentOverlaysLength),e.segmentOverlayElements.splice(e.savedDrawState.segmentOverlaysLength),e.curPolygonLength=void 0,e.curLineStringLength=void 0,e.savedDrawState=null}})),X(K(e),"addDrawInteraction",(function(t){var r,o,n=t.measurement.startEndPoint;if(e.continueLineMsg=(0,w.S$)(e.context.messages,"measureSupport.continueLine"),e.continuePolygonMsg=(0,w.S$)(e.context.messages,"measureSupport.continuePolygon"),e.drawInteraction&&e.removeDrawInteraction(),!e.vector){e.source=new j.Z;var i=[new C.default({fill:new k.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new M.default({color:"#ffcc33",width:2}),image:new I.default({radius:7,fill:new k.default({color:"#ffcc33"})})})],a=[],s=n||!0===n;if(s||void 0===n){var p=s?void 0===n?{}:n:t.startEndPoint;a=(0,O.rm)(p.startPointOptions,p.endPointOptions)}var l=[].concat(i,B(a));e.vector=new x.Z({source:e.source,zIndex:1e6,style:l}),e.props.map.addLayer(e.vector)}o="Bearing"===t.measurement.geomType?"LineString":t.measurement.geomType,r=new Z.ZP({source:new j.Z,type:o,style:new C.default({fill:new k.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new M.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new I.default({radius:5,stroke:new M.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new k.default({color:"rgba(255, 255, 255, 0.2)"})})})}),e.clickListener=e.props.map.on("click",(function(){return e.updateMeasurementResults(e.props)})),e.props.updateOnMouseMove&&e.props.map.on("pointermove",(function(){return e.updateMeasurementResults(e.props)})),e.props.map.on("pointermove",(function(t){return e.pointerMoveHandler(t)})),r.on("drawstart",(function(t){var r,o;e.sketchFeature=t.feature,e.drawing=!0,e.textId=(null===(r=e.props.measurement)||void 0===r||null===(o=r.features)||void 0===o?void 0:o.length)||0,e.textLabels||(e.textLabels=[]),e.segmentLengths||(e.segmentLengths=[]),e.props.measurement.disableLabels||(e.saveDrawState(),e.createMeasureTooltip("Polygon"===e.props.measurement.geomType?[0,0]:void 0),"Polygon"===e.props.measurement.geomType&&e.createMeasureTooltip(),"Polygon"===e.props.measurement.geomType&&e.createSegmentLengthOverlay()),e.listener=e.sketchFeature.getGeometry().on("change",(function(t){var r,o,n=t.target;if(n instanceof L.ZP){o={value:e.getArea(n),type:"area"},r=e.formatAreaValue(o.value,e.props.uom),e.tooltipCoord=n.getInteriorPoint().getCoordinates();var i=n.getCoordinates()[0],a=[];if(!e.props.measurement.disableLabels&&((void 0===e.curPolygonLength||e.curPolygonLength<i.length)&&(e.createSegmentLengthOverlay(),e.curPolygonLength=i.length),i.length>2)){a.push((0,v.midpoint)(i[i.length-1],i[i.length-2],!0)),a.push((0,v.midpoint)(i[i.length-2],i[i.length-3],!0));for(var s=0;s<a.length;++s){var p=i.slice(i.length-2-s,i.length-s),l=e.getLength(p,e.props),u=e.props.measurement&&e.props.measurement.showLengthAndBearingLabel&&" | "+(0,h.rp)((0,v.calculateAzimuth)(p[0],p[1],Y(e.props.map)),e.props.measurement.trueBearing)||"",c=e.formatLengthValue(l,e.props.uom,!1)+u;e.segmentOverlayElements[e.segmentOverlays.length-s-1].innerHTML=c,e.segmentOverlays[e.segmentOverlays.length-s-1].setPosition(a[s]),e.segmentLengths[e.segmentOverlays.length-s-1]={value:l,type:"length"},e.textLabels[e.segmentOverlays.length-s-1]={text:c,position:(0,v.pointObjectToArray)((0,v.reproject)(a[s],Y(e.props.map),"EPSG:4326")),type:e.props.measurement.geomType,textId:e.textId}}}}else if(n instanceof E.Z){var m=n.getCoordinates(),f=[m[m.length-2],m[m.length-1]];e.props.measurement.disableLabels||e.props.measurement.bearingMeasureEnabled||!(void 0===e.curLineStringLength||e.curLineStringLength<m.length)||(e.createSegmentLengthOverlay(),e.curLineStringLength=m.length);var y=e.getLength(m,e.props),b=e.getLength(f,e.props);if(r=e.formatLengthValue(y,e.props.uom,"Bearing"===e.props.measurement.geomType,e.props.measurement.trueBearing),e.tooltipCoord=n.getLastCoordinate(),!e.props.measurement.disableLabels&&!e.props.measurement.bearingMeasureEnabled){var O=e.props.measurement&&e.props.measurement.showLengthAndBearingLabel&&" | "+(0,h.rp)((0,v.calculateAzimuth)(f[0],f[1],Y(e.props.map)),e.props.measurement.trueBearing)||"",w=e.formatLengthValue(b,e.props.uom,"Bearing"===e.props.measurement.geomType,e.props.measurement.trueBearing)+O;d()(e.segmentOverlayElements).innerHTML=w,d()(e.segmentOverlays).setPosition((0,v.midpoint)(f[0],f[1],!0)),e.textLabels[e.segmentOverlays.length-1]={text:w,position:(0,v.pointObjectToArray)((0,v.reproject)((0,v.midpoint)(f[0],f[1],!0),Y(e.props.map),"EPSG:4326")),type:e.props.measurement.geomType,textId:e.textId},e.segmentLengths[e.segmentOverlays.length-1]={value:b,type:"Bearing"===e.props.measurement.geomType?"bearing":"length"}}o={value:y,type:"Bearing"===e.props.measurement.geomType?"bearing":"length"}}if(!e.props.measurement.disableLabels&&(d()(e.measureTooltipElements).innerHTML=r,d()(e.measureTooltips).setPosition(e.tooltipCoord),e.outputValues[e.outputValues.length-1]=o,n instanceof L.ZP)){var P=n.getCoordinates()[0],S=e.getLength(3===P.length?g()(P):P,e.props);e.measureTooltipElements[e.measureTooltipElements.length-2].innerHTML=e.formatLengthValue(S,e.props.uom,!1),e.outputValues[e.measureTooltipElements.length-2]={value:S,type:"length"},e.perimeterTooltipCoord=n.getLastCoordinate(),e.measureTooltips[e.measureTooltipElements.length-2].setPosition(e.perimeterTooltipCoord)}}))})),r.on("drawend",(function(t){var r;e.drawing=!1;var o=u()(e.props.measurement,"features",[]),n=t.feature.getGeometry(),i=n.getCoordinates(),a=new _.Z,s={Point:function(){return(0,v.reproject)(i,Y(e.props.map),"EPSG:4326")},LineString:function(){return e.getLength(i,e.props)},Polygon:function(){return e.getArea(n)},Bearing:function(){return(0,v.calculateAzimuth)(i[0],i[1],Y(e.props.map))}},p={LineString:function(){return e.formatLengthValue(e.getLength(i,e.props),e.props.uom,!1)},Polygon:function(){return e.formatAreaValue(e.getArea(n),e.props.uom)},Bearing:function(){return e.formatLengthValue((0,v.calculateAzimuth)(i[0],i[1],Y(e.props.map)),e.props.uom,!0,e.props.measurement.trueBearing)}},l=(0,v.reprojectGeoJson)(a.writeFeatureObject(t.feature.clone()),Y(e.props.map),"EPSG:4326");l.properties=l.properties||{},l.properties.values=[{value:(s[e.props.measurement.geomType]||function(){return null})(),formattedValue:(p[e.props.measurement.geomType]||function(){return null})(),position:(0,v.pointObjectToArray)((0,v.reproject)("Polygon"===e.props.measurement.geomType?n.getInteriorPoint().getCoordinates():d()(i),Y(e.props.map),"EPSG:4326")),type:e.props.measurement.pointMeasureEnabled?"point":e.props.measurement.lineMeasureEnabled?"length":e.props.measurement.areaMeasureEnabled?"area":e.props.measurement.bearingMeasureEnabled?"bearing":void 0}].concat(B("Polygon"===e.props.measurement.geomType?[{value:(e.outputValues[e.measureTooltipElements.length-2]||{}).value||0,formattedValue:e.formatLengthValue((e.outputValues[e.measureTooltipElements.length-2]||{}).value||0,e.props.uom,!1),position:(0,v.pointObjectToArray)((0,v.reproject)(d()(i[0]),Y(e.props.map),"EPSG:4326")),uom:e.props.uom,type:"length"}]:[]));var c=V({},l);if(e.props.measurement.lineMeasureEnabled){var m=c.geometry.coordinates,f=(0,v.transformLineToArcs)(m);if(!e.props.measurement.disableLabels){e.removeLastSegment();for(var g=0;g<m.length-1;++g){var y=f[100*g+50];y&&(e.textLabels[e.segmentOverlays.length-m.length+1+g].position=y,e.segmentOverlays[e.segmentOverlays.length-m.length+1+g].setPosition((0,v.pointObjectToArray)((0,v.reproject)(y,"EPSG:4326",Y(e.props.map)))))}}c=(0,b.t8)("geometry.coordinates",f,c)}else!e.props.measurement.disableLabels&&e.props.measurement.areaMeasureEnabled&&(e.textLabels.splice(e.segmentOverlays.length-2,1),e.props.map.removeOverlay(e.segmentOverlays[e.segmentOverlays.length-2]),e.segmentOverlayElements[e.segmentOverlays.length-2].parentNode.removeChild(e.segmentOverlayElements[e.segmentOverlays.length-2]),e.segmentOverlayElements.splice(e.segmentOverlays.length-2,1),e.segmentOverlays.splice(e.segmentOverlays.length-2,1));var h="bearing"===(null===(r=l.properties.values[0])||void 0===r?void 0:r.type)?"Bearing":l.geometry.type;if(l.geometry.textLabels=e.textLabels.filter((function(t){return t.type===h&&t.textId===e.textId})).map((function(e){return e.textId,e.type,function(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,D)})),e.props.changeGeometry([].concat(B(o),[l])),e.props.setTextLabels(B(e.textLabels)),e.addFeature(c),!e.props.measurement.disableLabels&&(d()(e.measureTooltipElements).className="tooltip tooltip-static",d()(e.measureTooltips).setOffset([0,-7]),"Polygon"===e.props.measurement.geomType&&(e.measureTooltipElements[e.measureTooltipElements.length-2].className="tooltip tooltip-static",e.measureTooltips[e.measureTooltipElements.length-2].setOffset([0,-7])),e.segmentOverlayElements))for(var O=0;O<e.segmentOverlayElements.length;++O)e.segmentOverlayElements[O]&&(e.segmentOverlayElements[O].className="segment-overlay segment-overlay-static");(0,F.B)(e.listener),e.curPolygonLength=void 0,e.curLineStringLength=void 0,e.discardDrawState()})),e.props.map.addInteraction(r),e.createHelpTooltip(),e.drawInteraction=r,e.measureLayer=e.vector})),X(K(e),"removeLastSegment",(function(){e.textLabels.pop(),e.segmentLengths.pop(),e.props.map.removeOverlay(d()(e.segmentOverlays)),d()(e.segmentOverlayElements).parentNode.removeChild(d()(e.segmentOverlayElements)),e.segmentOverlays.pop(),e.segmentOverlayElements.pop()})),X(K(e),"removeDrawInteraction",(function(){null!==e.drawInteraction&&(e.removeHelpTooltip(),e.props.map.removeInteraction(e.drawInteraction),e.drawInteraction=null,e.sketchFeature=null,e.props.map.un("click",(function(){return e.updateMeasurementResults(e.props)}),K(e)),(0,F.B)(e.clickListener),e.props.updateOnMouseMove&&e.props.map.un("pointermove",(function(){return e.updateMeasurementResults(e.props)}),K(e)))})),X(K(e),"pointerMoveHandler",(function(e){if(!e.dragging){var t=(0,w.S$)(this.context.messages,"measureSupport.startDrawing");if(this.sketchFeature&&this.drawing){var r=this.sketchFeature.getGeometry();r instanceof L.ZP?t=this.continuePolygonMsg:r instanceof E.Z&&(t=this.continueLineMsg)}this.helpTooltipElement.innerHTML=t,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}})),X(K(e),"updateMeasurementResults",(function(t){if(e.sketchFeature){var r=e.sketchFeature.getGeometry().getCoordinates();if("Bearing"===t.measurement.geomType&&r.length>1&&r.length>2){for(e.drawInteraction.sketchCoords_=[r[0],r[1],r[0]];e.sketchFeature.getGeometry().getCoordinates().length>3;)e.drawInteraction.removeLastPoint();e.sketchFeature.getGeometry().setCoordinates([r[0],r[1]]),e.drawInteraction.sketchFeature_=e.sketchFeature,e.drawInteraction.finishDrawing()}}})),X(K(e),"reprojectedCoordinatesFrom4326",(function(t){return t.map((function(t){var r=(0,v.reproject)(t,"EPSG:4326",Y(e.props.map));return[r.x,r.y]}))})),X(K(e),"reprojectedCoordinatesIn4326",(function(t){return t.map((function(t){var r=(0,v.reproject)(t,Y(e.props.map),"EPSG:4326");return[r.x,r.y]}))})),X(K(e),"calculateGeodesicArea",(function(t){if(t.length>=4){var r=e.reprojectedCoordinatesIn4326(t);return Math.abs((0,R.bg)(new L.ZP([r]),{projection:"EPSG:4326"}))}return 0})),X(K(e),"createHelpTooltip",(function(){e.removeHelpTooltip(),e.helpTooltipElement=document.createElement("div"),e.helpTooltipElement.className="tooltip hidden",e.helpTooltip=new S.Z({element:e.helpTooltipElement,offset:[15,0],positioning:"center-left"}),e.props.map.addOverlay(e.helpTooltip)})),X(K(e),"createMeasureTooltip",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,-15];e.measureTooltipElements||(e.measureTooltipElements=[]),e.measureTooltips||(e.measureTooltips=[]),e.outputValues||(e.outputValues=[]);var r=document.createElement("div");r.className="tooltip tooltip-measure",r.style.display=e.props.measurement.showLabel?"":"none",e.measureTooltipElements.push(r);var o=new S.Z({element:r,offset:t,positioning:"bottom-center"});e.props.map.addOverlay(o),e.measureTooltips.push(o),e.outputValues.push(null)})),X(K(e),"createSegmentLengthOverlay",(function(t){e.segmentOverlayElements||(e.segmentOverlayElements=[]),e.segmentOverlays||(e.segmentOverlays=[]);var r=document.createElement("div");r.className="segment-overlay",r.style.display=e.props.measurement.showSegmentLengths&&!t?"":"none",e.segmentOverlayElements.push(r);var o=new S.Z({element:r,offset:[0,0],positioning:"center-center"});e.props.map.addOverlay(o),e.segmentOverlays.push(o)})),X(K(e),"formatLengthValue",(function(t,r,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(o)return(0,h.rp)(t,n);var i=r&&r.length,a=i.label,s=i.unit,l=p()((0,h.Ov)(t,"m",s),2);return e.props.formatNumber(l)+" "+a})),X(K(e),"formatAreaValue",(function(t,r){var o=r&&r.area,n=o.label,i=o.unit,a=p()((0,h.Ov)(t,"sqm",i),2);return e.props.formatNumber(a)+" "+n})),X(K(e),"removeHelpTooltip",(function(){e.helpTooltipElement&&e.helpTooltipElement.parentNode&&e.helpTooltipElement.parentNode.removeChild(e.helpTooltipElement),e.helpTooltip&&e.props.map.removeOverlay(e.helpTooltip)})),X(K(e),"removeMeasureTooltips",(function(){(e.measureTooltips||[]).forEach((function(t){e.props.map.removeOverlay(t)}));for(var t=document.getElementsByClassName("tooltip-static")||[],r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r]);t=document.getElementsByClassName("tooltip-measure")||[];for(var o=0;o<t.length;o++)t[o].parentNode.removeChild(t[o]);e.measureTooltips=[],e.measureTooltipElements=[],e.outputValues=[]})),X(K(e),"removeSegmentLengthOverlays",(function(){(e.segmentOverlays||[]).forEach((function(t){e.props.map.removeOverlay(t)})),(e.segmentOverlayElements||[]).forEach((function(e){e.parentNode.removeChild(e)})),e.segmentOverlays=[],e.segmentOverlayElements=[]})),e}var r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),r=t,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.measureTooltipElements&&e.measurement.showLabel!==this.props.measurement.showLabel)for(var t=0;t<this.measureTooltipElements.length;++t)this.measureTooltipElements[t]&&(this.measureTooltipElements[t].style.display=e.measurement.showLabel?"":"none");if(this.segmentOverlayElements&&e.measurement.showSegmentLengths)for(var r=0;r<this.segmentOverlayElements.length;++r)this.segmentOverlayElements[r]&&(this.segmentOverlayElements[r].style.display=e.measurement.showSegmentLengths?"":"none");(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&(this.restoreDrawState(),this.addDrawInteraction(e)),e.measurement.geomType||(this.removeDrawInteraction(),this.removeMeasureTooltips(),this.removeSegmentLengthOverlays(),this.textLabels=[],this.segmentLengths=[],this.props.map.removeLayer(this.measureLayer),this.vector=null,this.measureLayer=null,e.measurement.features&&e.measurement.features.length>0&&this.props.changeGeometry([]),e.measurement.textLabels&&e.measurement.textLabels.length>0&&this.props.setTextLabels([]),this.source&&(this.source.clear(),this.source=null));var o=this.props.measurement.features,n=e.measurement.features;e.measurement.updatedByUI&&!m()(o,n)?this.updateFeatures(e):e.measurement.updatedByUI&&!m()(this.props.uom,e.uom)&&this.updateMeasures(e)}},{key:"render",value:function(){return null}}])&&H(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(n().Component);X(Q,"propTypes",{startEndPoint:a().object,map:a().object,measurement:a().object,enabled:a().bool,uom:a().object,formatNumber:a().func,changeMeasurementState:a().func,updateMeasures:a().func,resetGeometry:a().func,changeGeometry:a().func,updateOnMouseMove:a().bool,setTextLabels:a().func}),X(Q,"contextTypes",{messages:a().object}),X(Q,"defaultProps",{changeMeasurementState:function(){},resetGeometry:function(){},updateMeasures:function(){},changeGeometry:function(){},formatNumber:function(e){return e},setTextLabels:function(){},startEndPoint:{startPointOptions:{radius:3,fillColor:"green",applyToPolygon:!0},endPointOptions:{radius:3,fillColor:"red",applyToPolygon:!0}},updateOnMouseMove:!1})},722404:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var o=r(423482),n=r.n(o),i=r(124852),a=r.n(i),s=r(608010),p=r(727418),l=r.n(p),u=r(797398),c=r.n(u),m=r(203728);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function g(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,w(o.key),o)}}function y(e,t,r){return t=v(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(e,d()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function O(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=f(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:String(t)}r(235309);var P={className:"ol-overviewmap ol-custom-overviewmap",collapseLabel:"",label:"",collapsed:!0,collapsible:!0},E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return O(h(e=y(this,t,[].concat(o))),"dragstart",(function(t){e.dragging||(e.dragBox=e.box.cloneNode(),e.dragBox.setAttribute("class","ol-overview-dargbox"),e.dragBox.style.position="relative",e.box.appendChild(e.dragBox),""===e.box.style.top?e.offsetStartTop=0:e.offsetStartTop=parseInt(e.box.style.top.slice(0,-2),10),""===e.box.style.left?e.offsetStartLeft=0:e.offsetStartLeft=parseInt(e.box.style.left.slice(0,-2),10),e.mouseStartTop=t.pageY,e.mouseStartLeft=t.pageX,e.dragging=!0)})),O(h(e),"draggingel",(function(t){!0===e.dragging&&(e.dragBox.style.top=e.offsetStartTop+t.pageY-e.mouseStartTop+"px",e.dragBox.style.left=e.offsetStartLeft+t.pageX-e.mouseStartLeft+"px",t.stopPropagation(),t.preventDefault())})),O(h(e),"dragend",(function(){if(!0===e.dragging){var t={};t.top=""===e.dragBox.style.top?0:parseInt(e.dragBox.style.top.slice(0,-2),10),t.left=""===e.dragBox.style.left?0:parseInt(e.dragBox.style.left.slice(0,-2),10),e.box.removeChild(e.dragBox),delete e.dragBox,e.dragging=!1,e.setNewExtent(t)}})),O(h(e),"setNewExtent",(function(t){var r=e.box.offsetWidth,o=e.box.offsetHeight,n=e.props.map.getSize(),i=t.left*Math.abs(n[0]/r),a=t.top*Math.abs(n[1]/o);i=c()(i)?i:0,a=c()(a)?a:0;var s=[0+i,n[1]+a],p=[n[0]+i,0+a],l=e.props.map.getCoordinateFromPixel(s)||[0,0],u=e.props.map.getCoordinateFromPixel(p)||[0,0],m=[l[0],l[1],u[0],u[1]];e.props.map.getView().fit(m,n,{nearest:!0})})),e}var r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){var e=this,t=[];this.props.layers.forEach((function(e){t.push(s.default.createLayer(e.type,e.options||{}))}));var r=l()({},P,this.props.overviewOpt,{layers:t});this.overview=new m.Z(r),this.props.map&&this.overview.setMap(this.props.map),this.box=this.overview.element.getElementsByClassName("ol-overviewmap-box").item(0),this.box.onmousedown=function(t){e.dragstart(t),e.box.onmousemove=function(t){e.draggingel(t)},e.overview.element.onmousemove=function(t){e.draggingel(t)},e.box.onmouseup=function(){e.dragend(),e.overview.element.onmousemove=null,e.box.onmousemove=null,e.box.onmouseup=null}}}},{key:"render",value:function(){return null}}])&&g(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a().Component);O(E,"displayName","Overview"),O(E,"propTypes",{id:n().string,map:n().object,overviewOpt:n().object,layers:n().array}),O(E,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]})},809056:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var o=r(423482),n=r.n(o),i=r(124852),a=r.n(i),s=r(727418),p=r.n(s),l=r(225303);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,v(o.key),o)}}function m(e,t,r){return t=g(t),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:String(t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,t,arguments)}var r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){this.scalebar=new l.ZP(p()({},this.props,this.props.container?{target:document.querySelector(this.props.container)}:{})),this.props.map&&this.props.map.addControl(this.scalebar)}},{key:"componentWillUnmount",value:function(){if(this.props.container&&document.querySelector(".ol-scale-line"))try{document.querySelector(this.props.container).removeChild(document.querySelector(".ol-scale-line"))}catch(e){}}},{key:"render",value:function(){return null}}])&&c(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a().Component);d(h,"propTypes",{map:n().object,className:n().string,minWidth:n().number,units:n().oneOf(["degrees","imperial","nautical","metric","us"]),container:n().string}),d(h,"defaultProps",{map:null,className:"ol-scale-line",minWidth:64,units:"metric"})},838946:(e,t,r)=>{"use strict";r.d(t,{y7:()=>b,oU:()=>O,hH:()=>w});var o=r(573800),n=r(345801),i=r(386306),a=r(718369),s=r(878516),p=r(500052),l=r(848041),u=r(978653),c=r(497950),m=r(752043),f=r(944538),g=r(552329),y=r(525642),d=r(513987),v=r(869669),h=r(640353),b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type,o=t.coordinates,n=t.radius,i=t.center;switch(r){case"Point":e=new m.Z(o||[]);break;case"LineString":e=new f.Z(o||[]);break;case"MultiPoint":e=new g.Z(o||[]);break;case"MultiLineString":e=new y.Z(o||[]);break;case"MultiPolygon":e=new d.Z(o||[]);break;default:e=n&&i?(0,h.Bb)(new v.Z([i.x,i.y],n),100):new h.ZP(o||[])}return e},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.geometry&&"Polygon"===e.geometry.type},w={dragPan:{options:{kinetic:!1},Instance:o.Z},keyboardPan:{options:{kinetic:!1},Instance:n.Z},mouseWheelZoom:{options:{duration:0},Instance:i.Z},doubleClickZoom:{options:{duration:0},Instance:a.Z},shiftDragZoom:{options:{duration:0},Instance:s.Z},keyboardZoom:{options:{},Instance:p.Z},pinchZoom:{options:{duration:0},Instance:l.Z},pinchRotate:{options:{},Instance:u.Z},altShiftDragRotate:{options:{},Instance:c.Z}}},464006:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(923645),n=r.n(o)()((function(e){return e[1]}));n.push([e.id,".msgapi .ol-control button:hover, .msgapi .ol-control button:focus {\r\n    background-color: #f4f4f4;\r\n}\r\n.msgapi .ol-zoom .ol-zoom-out, .msgapi .ol-zoom .ol-zoom-in{\r\n    width: 26px;\r\n    height: 26px;\r\n    line-height: 26px;\r\n    display: block;\r\n\r\n    color: black;\r\n    background-color: #fff;\r\n    border-width: 0;\r\n    margin:0;\r\n}\r\n.msgapi .ol-zoom.ol-unselectable.ol-control .ol-zoom-in, .msgapi .ol-zoom.ol-unselectable.ol-control .ol-zoom-out {\r\n    font-family: 'Lucida Console', Monaco, monospace;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    font-weight: bold;\r\n}\r\n\r\n.msgapi .ol-zoom .ol-zoom-out{\r\n    font-size: 18px;\r\n    border-radius: 0 0 4px 4px;\r\n}\r\n.msgapi .ol-zoom .ol-zoom-in{\r\n    border-bottom: 1px solid #ccc;\r\n    border-radius: 4px 4px 0 0;\r\n    font-size: 20px;\r\n}\r\n.msgapi .ol-zoom.ol-unselectable.ol-control{\r\n    top:10px;\r\n    left:10px;\r\n    padding:0;\r\n    box-shadow: rgba(0, 0, 0, 0.65098) 0px 1px 5px 0px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.msgapi .ol-scale-line.ol-unselectable{\r\n    background-color: rgba(255, 255, 255, 0.8);\r\n}\r\n",""]);const i=n},230062:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(923645),n=r.n(o)()((function(e){return e[1]}));n.push([e.id,".msgapi .ol-custom-overviewmap,\r\n       .msgapi .ol-custom-overviewmap.ol-uncollapsible {\r\n          bottom: 20px;\r\n          left: auto;\r\n          right: 10px;\r\n          top: auto;\r\n\r\n      }\r\n      .msgapi .ol-custom-overviewmap:not(.ol-collapsed)  {\r\n\r\n           box-shadow: 0 1px 5px rgba(0,0,0,0.65);\r\n           border-radius: 1px;\r\n           transition: all .2s;\r\n      }\r\n      .msgapi .ol-custom-overviewmap .ol-overviewmap-map {\r\n          border: none;\r\n          width: 300px;\r\n          height: 150px;\r\n\r\n      }\r\n\r\n      .msgapi .ol-custom-overviewmap .ol-overviewmap-box {\r\n          border: 1px solid black;\r\n          cursor: pointer;\r\n          border-radius: 5px;\r\n      }\r\n\r\n      .msgapi .ol-custom-overviewmap:not(.ol-collapsed) button{\r\n          bottom: auto;\r\n          left: auto;\r\n          right: 2px;\r\n          bottom: 2px;\r\n      }\r\n\r\n      .msgapi .ol-rotate {\r\n          top: 170px;\r\n          right: 0;\r\n      }\r\n      .msgapi .ol-overview-dargbox{\r\n           border: 1px solid black;\r\n           background-color: rgba(125,125,0,.5);\r\n           border-radius: 5px;\r\n      }\r\n",""]);const i=n},235309:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var o=r(893379),n=r.n(o),i=r(230062);n()(i.Z,{insert:"head",singleton:!1});const a=i.Z.locals||{}}}]);