(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62933,80717,64273,66113,93546],{501157:(e,t,n)=>{"use strict";n.d(t,{en:()=>k,FU:()=>R,gs:()=>N,tt:()=>Z,jY:()=>B,QQ:()=>F,B8:()=>U,T6:()=>G,ZP:()=>W});var r=n(472500),o=n.n(r),i=n(701469),a=n.n(i),c=n(984596),l=n.n(c),u=n(227361),s=n.n(u),f=n(441609),p=n.n(f),d=n(264721),y=n.n(d),m=n(944908),b=n.n(m),v=n(727418),g=n.n(v),h=n(505055),O=n.n(h),w=n(375875),S=n.n(w),j=n(737275),P=n(986267),E=n(396606);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==T(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={},k=function(e){var t=(a()(e)&&e||e.split(","))[0],n=o().parse(t,!0);return o().format(g()({},n,{search:null},{query:g()({service:"WMS",version:"1.3.0",request:"GetCapabilities"},n.query)}))},x=function(e){var t=e&&e.Title,n=e.LogoURL&&I(I({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),r=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:n,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:r}},D=function e(t){return t.Layer?(a()(t.Layer)&&t.Layer||[t.Layer]).reduce((function(t,n){return t.concat(e(n)).concat(n.Layer&&n.Name?[n]:[])}),[]):t.Name&&[t]||[]},M=function(){var e,t,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,u=(o.WMS_Capabilities||o.WMT_MS_Capabilities||{}).Capability,s=(o.WMS_Capabilities||o.WMT_MS_Capabilities||{}).Service,f=(r=u).Request&&r.Request.GetMap&&r.Request.GetMap.DCPType&&r.Request.GetMap.DCPType.HTTP&&r.Request.GetMap.DCPType.HTTP.Get&&r.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&r.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,p=u.Layer&&(null===(e=u.Layer.SRS||u.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],d=u.Layer&&u.Layer.Attribution&&x(u.Layer.Attribution),y=u.Request&&u.Request.GetMap&&u.Request.GetMap.Format||[],m=D(u),b=(a()(m)?m:[m]).filter((function(e){return!l||-1!==e.Name.toLowerCase().indexOf(l.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(l.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(l.toLowerCase())}));return{numberOfRecordsMatched:b.length,numberOfRecordsReturned:Math.min(c,b.length),nextRecord:i+Math.min(c,b.length)+1,service:s,layerOptions:{version:(null===(t=o.WMS_Capabilities||o.WMT_MS_Capabilities)||void 0===t||null===(n=t.$)||void 0===n?void 0:n.version)||"1.3.0"},records:b.filter((function(e,t){return t>=i-1&&t<i-1+c})).map((function(e){return g()({},e,{formats:y,onlineResource:f,SRS:p,credits:e.Attribution?x(e.Attribution):d})}))}},R=function(e,t){var r=o().parse(e,!0),i=o().format(g()({},r,{query:g()({service:"WMS",version:"1.1.1",request:"GetCapabilities"},r.query)}));return new Promise((function(e){Promise.all([n.e(99942),n.e(67260)]).then(function(){var r=n(967260).unmarshaller;e(S().get(k(i)).then((function(e){var n;if(t)return O().parseString(e.data,{explicitArray:!1},(function(e,t){n=t})),n;var o=r.unmarshalString(e.data);return o&&o.value})))}.bind(null,n)).catch(n.oe)}))},L=function(e,t,n,r){var o=A[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,j.u8)("cacheExpire")||60)?new Promise((function(e){e(M(o.data,t,n,r))})):S().get(k(e)).then((function(o){var i;return O().parseString(o.data,{explicitArray:!1},(function(e,t){i=t})),A[e]={timestamp:(new Date).getTime(),data:i},M(i,t,n,r)}))},N=function(e,t){var n=o().parse(e,!0),r=o().format(g()({},n,{query:g()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},n.query)}));return S().get(k(r)).then((function(e){var t;return O().parseString(e.data,{explicitArray:!1},(function(e,n){t=n&&n.WMS_DescribeLayerResponse&&n.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return I(I({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:I({},e&&e.query&&e.query.$||{})})}))}))},Z=function(e,t,n,r){return L(e,t,n,r)},B=function(e,t){for(var n=e,r=n.EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,P.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;!r&&n.Layer&&n.Layer.length;)r=(n=n.Layer[0]).EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,P.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;r||(r={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[r.westBoundLongitude||r.minx,r.southBoundLatitude||r.miny,r.eastBoundLongitude||r.maxx,r.northBoundLatitude||r.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},F=[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/vnd.jpeg-png8",value:"image/vnd.jpeg-png8"},{label:"image/gif",value:"image/gif"}],U=function(){return b()(Object.values((0,E.eq)()))},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return R(e).then((function(e){var n,r,o=s()(e,"capability.request.getMap.format",[]);if(p()(o))n=F;else{var i=F.map((function(e){return e.value}));n=(o=o.map((function(e){var t=e.value;return{label:t,value:t}}))).filter((function(e){var t=e.value;return y()(i,t)}))||[]}if(t){var a=s()(e,"capability.request.getFeatureInfo.format",[]),c=U();p()(a)?r=c:(a=a.map((function(e){return e.value})),r=b()(a.filter((function(e){return y()(c,e)})))||[])}return t?{imageFormats:n,infoFormats:r}:n})).catch((function(){return t?{imageFormats:F,infoFormats:U()}:F}))};const W={flatLayers:D,parseUrl:k,getDimensions:function(e){return l()(e.Dimension||e.dimension||[]).map((function(t,n){var r=e.Extent&&l()(e.Extent)[n]||e.extent&&l()(e.extent)[n];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||r&&r.$.default,values:t._&&t.split(",")||r&&r._&&r.split(",")}}))},getCapabilities:R,describeLayer:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o().parse(e,!0),a=o().format(g()({},i,{query:g()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},i.query,r.query||{})}));return new Promise((function(e){Promise.all([n.e(99942),n.e(67260)]).then(function(){var t=n(967260).unmarshaller;e(S().get(k(a)).then((function(e){var n=t.unmarshalString(e.data);return n&&n.value&&n.value.layerDescription&&n.value.layerDescription[0]})))}.bind(null,n)).catch(n.oe)}))},getRecords:L,describeLayers:N,textSearch:Z,parseLayerCapabilities:function e(t,n,r){return l()(r||s()(t,"capability.layer.layer")).reduce((function(r,o){return r||(!o.name&&o.layer?e(t,n,l()(o.layer)):2===n.name.split(":").length&&o.name&&2===o.name.split(":").length?n.name===o.name&&o:o.name&&2===o.name.split(":").length?n.name===o.name.split(":")[1]&&o:2===n.name.split(":").length?n.name.split(":")[1]===o.name&&o:n.name===o.name&&o)}),null)},getBBox:B,reset:function(){Object.keys(A).forEach((function(e){delete A[e]}))},getUniqueInfoFormats:U,getSupportedFormat:G}},735913:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(423482),o=n.n(r),i=n(124852),a=n.n(i),c=n(480681),l=n(950966),u=n(805346);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function p(e,t,n){return t=y(t),function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:String(t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.className?" "+this.props.className:"",n=a().createElement(c.Glyphicon,{className:"toc-layer-tool"+t,style:this.props.style,glyph:this.props.glyph,onClick:function(){return e.props.onClick(e.props.node)}});return this.props.tooltip?a().createElement(l.Z,{placement:"bottom",overlay:a().createElement(c.Tooltip,{id:"Tooltip-"+this.props.tooltip},a().createElement("strong",null,a().createElement(u.Z,{msgId:this.props.tooltip})))},n):n}}])&&f(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(a().Component);b(g,"propTypes",{node:o().object,onClick:o().func,style:o().object,glyph:o().string,tooltip:o().string,className:o().string}),b(g,"defaultProps",{onClick:function(){}});const h=g},497844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(124852),o=n.n(r),i=n(423482),a=n.n(i),c=n(1036),l=n(414293),u=n.n(l),s=n(701469),f=n.n(s);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function y(e,t,n){return t=b(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o().createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip&&o().createElement(c.Z,{disabled:this.props.disabled,start:[u()(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){f()(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}})||o().createElement(c.Z,{disabled:this.props.disabled,start:[u()(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}])&&d(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);g(O,"propTypes",{opacity:a().number,disabled:a().bool,hideTooltip:a().bool,onChange:a().func}),g(O,"defaultProps",{opacity:1,onChange:function(){},visibility:!0});const w=O},359294:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(423482),o=n.n(r),i=n(124852),a=n.n(i),c=n(480681),l=n(950966),u=n(359112),s=n(893379),f=n.n(s),p=n(161253);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function v(e,t,n){return t=h(t),function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(e,g()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function S(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:String(t)}f()(p.Z,{insert:"head",singleton:!1}),p.Z.locals;var P=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(O(e=v(this,t,[].concat(r))),"getFilteredTitle",(function(t){var n=t.toLowerCase().split(e.props.filterText.toLowerCase());return e.props.filterText?n.reduce((function(t,r,o){return o===n.length-1?[].concat(y(t),[r]):[].concat(y(t),[r,a().createElement("strong",{key:o},e.props.filterText.toLowerCase())])}),[]):t})),S(O(e),"renderTitle",(function(){var t=(0,u.BC)(e.props).title;return a().createElement("div",{className:"toc-title",onClick:e.props.onClick?function(t){return e.props.onClick(e.props.node.id,"layer",t.ctrlKey)}:function(){},onContextMenu:function(t){t.preventDefault(),e.props.onContextMenu(e.props.node)}},e.getFilteredTitle(t))})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=(0,u.BC)(this.props).tooltipText;return this.props.tooltip&&e?a().createElement(l.Z,{placement:this.props.node.tooltipPlacement||"top",overlay:a().createElement(c.Tooltip,{id:"tooltip-layer-title"},e)},this.renderTitle()):this.renderTitle()}}])&&b(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(a().Component);S(P,"propTypes",{node:o().object,onClick:o().func,onContextMenu:o().func,currentLocale:o().string,filterText:o().string,tooltip:o().bool,tooltipOptions:o().object}),S(P,"defaultProps",{onClick:function(){},onContextMenu:function(){},currentLocale:"en-US",filterText:"",tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}});const E=P},262770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(124852),o=n.n(r),i=n(423482),a=n.n(i),c=n(441609),l=n.n(c),u=n(281763),s=n.n(u),f=n(490079);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(e,b()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function O(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(g(n=m(this,t,[e])),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),O(g(n),"canShow",(function(e){return e.visibility||!n.props.showOnlyIfVisible})),O(g(n),"useLegendOptions",(function(){return!l()(n.props.node.legendOptions)&&s()(n.props.node.legendOptions.legendHeight)&&s()(n.props.node.legendOptions.legendWidth)})),O(g(n),"setOverflow",(function(){return n.useLegendOptions()&&n.props.node.legendOptions.legendWidth>n.state.containerWidth})),n.containerRef=o().createRef(),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,n=t&&this.useLegendOptions();return t?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(f.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}],r&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);O(S,"propTypes",{node:a().object,legendContainerStyle:a().object,legendStyle:a().object,showOnlyIfVisible:a().bool,currentZoomLvl:a().number,scales:a().array,WMSLegendOptions:a().string,scaleDependent:a().bool,language:a().string,legendWidth:a().number,legendHeight:a().number}),O(S,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const j=S},490079:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(472500),o=n.n(r),i=n(701469),a=n.n(i),c=n(414293),l=n.n(c),u=n(727418),s=n.n(u),f=n(423482),p=n.n(f),d=n(124852),y=n.n(d),m=n(233044),b=n(805346);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function h(e,t,n){return t=w(t),function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(e,O()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function P(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:String(t)}var T=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return P(S(e=h(this,t,[].concat(r))),"state",{error:!1}),P(S(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),P(S(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var n=e.layer,r=l()(t)?a()(n.url)&&Math.floor(Math.random()*n.url.length):t,i=a()(n.url)?n.url[r]:n.url.replace(/[?].*$/g,""),c=o().parse(i),u=(0,m.clearNilValuesForParams)(n.params),f=s()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:n.name,style:n.style||null,version:n.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},n.legendParams||{},e.language&&n.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,m.addAuthenticationToSLD)(u||{},e.layer),u&&u.SLD_BODY?{SLD_BODY:u.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,m.addAuthenticationParameter)(i,f),o().format({host:c.host,protocol:c.protocol,pathname:c.pathname,query:f})}return""})),P(S(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?y().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):y().createElement(b.Z,{msgId:"layerProperties.legenderror"})}}])&&g(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(y().Component);P(T,"propTypes",{layer:p().object,legendHeight:p().number,legendWidth:p().number,legendOptions:p().string,style:p().object,currentZoomLvl:p().number,scales:p().array,scaleDependent:p().bool,language:p().string}),P(T,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const C=T},323010:(e,t,n)=>{"use strict";n.d(t,{dV:()=>L,ZP:()=>Z});var r=n(124852),o=n.n(r),i=n(867076),a=n(423570),c=n.n(a),l=n(755745),u=n.n(l),s=n(165442),f=n.n(s),p=n(747359),d=n(1979),y=n(618446),m=n.n(y),b=n(624262),v=n(396606),g=n(49977),h=n(249243),O=n(313311),w=n.n(O),S=n(171703),j=n(134990),P=n(866113),E=["rawPos"],T=["PopupSupport","tools"];function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==C(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){return e&&0===e.indexOf("geostory-vector")}var L=(0,i.compose)((0,S.connect)((function(e){return{sections:(0,P.NR)(e)}}),{onClickMarker:j.Vx}),(0,i.withHandlers)({onClickMarker:function(e){var t=e.onClickMarker,n=void 0===t?function(){}:t,r=e.sections,i=void 0===r?{}:r;return function(e,t,r){var a=w()(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.queryParams,r=(void 0===n?{}:n).request,o=e.layerMetadata,i=(void 0===o?{}:o).title;return!r&&i.toLowerCase()===t}))||{},c=a.response,l=(void 0===c?{}:c).features,u=k(void 0===l?[]:l,1)[0],s=(void 0===u?{}:u).contentRefId,f=w()(i,(function(e){var t=e.contents;return w()(t,{id:s})})),p={popups:[]};if(f){var d=w()(f.contents,{id:s})||{},y=d.id,m=d.title,b=void 0===m?"":m;n('sections[{"id":"'.concat(f.id,'"}].contents[{"id":"').concat(y,'"}].carouselToggle'),!0),b&&(p={popups:r.map((function(e){return M(M({},e),{},{component:function(){return o().createElement("div",{className:"ms-geostory-carousel-viewer"},b)}})}))})}return p}}})),N=(0,i.mapPropsStream)((function(e){var t=(0,i.createEventHandler)(),n=t.stream,r=t.handler;return n.withLatestFrom(e.map((function(e){return{map:e.map,layers:e.layers,options:e.options}})).distinctUntilChanged((function(e,t){return m()(e,t)}))).switchMap((function(e){var t=k(e,2),n=t[0],r=n.point,o=n.layerInfo,i=t[1],a=i.map,l=i.layers,s=void 0===l?[]:l,p=i.options,y=(void 0===p?{}:p).mapOptions,m=(void 0===y?{}:y).mapInfoFormat,O=void 0===m?(0,d.GA)():m,w=s.filter((function(e){return(0,b.T4)(e,a.resolution)&&(0,v.y_)(e)}));R(o)&&(w=w.filter((function(e){var t=e.id;return o===t})));var S=["SLD_BODY"],j=["buffer","cql_filter","filter","propertyName"];return 0===w.length?g.Observable.of({requests:[{}],responses:[{response:{features:[]}}],validResponses:[]}):g.Observable.from(w).mergeMap((function(e){var t=(0,v.Fm)(e,{format:O,map:a,point:r,currentLocale:"en-US"}),n=t.url,o=t.request,i=t.metadata,l=n,s=o,p=M(M({},(0,v.K7)(e,j,S)),s),d=c()();return(n?(0,h.y)(l,p,e).map((function(e){return e.data.exceptions?{reqId:d,exceptions:e.data.exceptions,queryParams:s,layerMetadata:i}:{data:e.data,reqId:d,queryParams:s,layerMetadata:M(M({},i),{},{features:e.features,featuresCrs:e.featuresCrs})}})):g.Observable.of(function(e,t,n){var r={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.lng,t.lat]}},o=n&&n.units;switch(o){case"m":default:o="meters";break;case"deg":o="degrees";break;case"mi":o="miles"}var i=n&&n.resolution||1,a=u()(r,(n.buffer||1)*i,o);return{data:{crs:null,features:(e.features||[]).filter((function(e){try{return"FeatureCollection"===e.type&&e.features&&e.features.length?e.features.reduce((function(e,t){var r=t.properties.useGeodesicLines&&t.properties.geometryGeodesic?M(M({},t),{},{geometry:t.properties.geometryGeodesic}):t;return e||f()(a,i&&n.buffer&&o?u()(r,1,"meters"):r)}),!1):f()(a,i&&n.buffer&&o?u()(e,1,"meters"):e)}catch(e){return!1}})),totalFeatures:"unknown",type:"FeatureCollection"},queryParams:t,layerMetadata:n}}(e,o,i))).catch((function(e){return{error:e.data||e.statusText||e.status,reqId:d,queryParams:s,layerMetadata:i}})).startWith({start:!0,reqId:d,request:p})})).scan((function(e,t){var n=e.requests,r=e.responses,i=e.validResponses;if(t.start){var a=t.reqId,c=t.request;return{requests:n.concat({reqId:a,request:c}),responses:r,validResponses:i}}var l=t.data,u=t.queryParams,s=t.layerMetadata,f=(0,v.Te)(O),p=r.concat({response:l,queryParams:u,layerMetadata:s});return{requests:n,validResponses:f.getValidResponses(p),responses:p,layerInfo:o}}),{requests:[],responses:[],validResponses:[],layerInfo:o})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){return M(M({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{mapInfo:e,getFeatureInfoHandler:r})}))}));const Z=(0,i.branch)((function(e){var t=e.map,n=(void 0===t?{}:t).mapInfoControl,r=void 0!==n&&n;return!e.isDrawEnabled&&r}),(0,i.compose)(N,(0,i.withStateHandlers)({popups:[]},{onClick:function(e,t){var n=t.getFeatureInfoHandler,r=void 0===n?function(){}:n,o=t.map,i=(void 0===o?{}:o).mapInfoControl;return function(e,t){var n=e.rawPos,o=void 0===n?[]:n,a=A(e,E);return R(t)||i?(r({point:a,layerInfo:t}),{popups:[{position:{coordinates:o},id:c()()}]}):{popups:[]}}},onPopupClose:function(){return function(){return{popups:[]}}}}),(0,i.withPropsOnChange)(["mapInfo","popups"],(function(e){var t=e.mapInfo,n=e.popups,r=e.options,i=(void 0===r?{}:r).mapOptions,a=(void 0===i?{}:i).mapInfoFormat,c=void 0===a?(0,d.GA)():a,l=e.onClickMarker,u=void 0===l?function(){}:l,s=t.responses,f=t.requests,y=t.validResponses,m=t.layerInfo;return R(m)?u(y,m,n):{popups:n.map((function(e){return M(M({},e),{},{component:function(){return o().createElement(p.Z,{renderValidOnly:!0,responses:s,requests:f,validResponses:y,format:c,showEmptyMessageGFI:!0,missingResponses:(f||[]).length-(s||[]).length})}})}))}})),(0,i.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=e.popups,r=e.onPopupClose,i=t.PopupSupport,a=t.tools,c=void 0===a?{}:a,l=A(t,T);return i?{plugins:M(M({},l),{},{tools:M(M({},c),{},{popup:function(e){return o().createElement(i,I({},e,{popups:n,onPopupClose:r}))}})})}:{}}))))},81593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(124852),o=n(945338);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){var r;return r=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==i(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const p=function(e){var t,n=e.direction,i=void 0===n?"horizontal":n,a=e.deltaScroll,p=e.width,d=e.height,y=e.transition,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],b=u((0,r.useState)(0),2),v=b[0],g=b[1],h=u((0,r.useState)(0),2),O=h[0],w=h[1],S=(0,r.useRef)({x:0,y:0}),j=u((0,r.useState)(!1),2),P=j[0],E=j[1],T=u((0,r.useState)("start"),2),C=T[0],I=T[1],A=u((0,r.useState)(),2),k=A[0],x=A[1],D=(0,r.useRef)(),M=(0,r.useRef)({});function R(e,t){x("move:start");var n=D.current,r=n.parentNode,o=n.getBoundingClientRect(),a=r.getBoundingClientRect();if("horizontal"===i){var c=e+o.width;e<0&&c>a.width?(g(e),S.current.x=e,I("center")):e>=0?(g(0),S.current.x=0,I("start")):c<=a.width&&(g(a.width-o.width),S.current.x=a.width-o.width,I("end"))}if("vertical"===i){var l=t+o.height;t<0&&l>a.height?(w(t),S.current.y=t,I("center")):t>=0?(w(0),S.current.y=0,I("start")):l<=a.height&&(w(a.height-o.height),S.current.y=a.height-o.height,I("end"))}setTimeout((function(){x("move:end")}),y)}function L(){var e=D.current,t=e.parentNode,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return!("horizontal"===i&&r.width>=n.width||"vertical"===i&&r.height>=n.height)}(0,r.useEffect)((function(){function e(e){e.preventDefault();var t=L();return E(L()),t?R(S.current.x-(e.deltaY>0?a:-a),S.current.y-(e.deltaY>0?a:-a)):null}var t=L();E(t);var n=D.current.parentNode;return t&&R(S.current.x,S.current.y),t&&n&&n.addEventListener&&n.addEventListener("wheel",e),function(){t&&n&&n.removeEventListener&&n.removeEventListener("wheel",e)}}),[p,d].concat(function(e){if(Array.isArray(e))return f(e)}(t=m)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));var N=(0,o.QS)({onSwiping:function(e){e.event.stopPropagation();var t=L();return E(L()),t?R(v-e.deltaX*e.velocity,O-e.deltaY*e.velocity):null},trackTouch:!0,trackMouse:!0});function Z(e){var t=M.current[e];if(t){var n=D.current,r=(n&&n.parentNode).getBoundingClientRect(),o=t.getBoundingClientRect();if("horizontal"===i){var a=r.width,c=r.left,l=o.width,u=o.left,s=c+a,f=u+l;return c<=u&&s>=u||c<=f&&s>=f}}return!1}return{status:k,canSwipe:P,isStartControlActive:P&&("end"===C||"center"===C),isEndControlActive:P&&("start"===C||"center"===C),positionLabel:C,coordinates:{x:v,y:O},containerPropsHandlers:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{}:e;return c(c({},N),{},{style:c({position:"relative",overflow:"hidden",width:"100%",height:"100%"},t)})},contentPropsHandlers:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{}:e;return{ref:D,style:c(c(c(c({position:"absolute",display:"flex"},y&&{transition:"transform ".concat(y,"ms ease 0s")}),{},{flexDirection:"horizontal"===i?"row":"column"},P&&"horizontal"===i&&{transform:"translateX(".concat(v,"px)")}),P&&"vertical"===i&&{transform:"translateY(".concat(O,"px)")}),t)}},itemPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onClick;return c({key:t,ref:function(e){return e&&function(e,t){M.current=c(c({},M.current),{},l({},e,t))}(t,e)}},n?{onClick:n,tabindex:Z(t)?0:-1,onKeyDown:function(e){"Enter"===e.key&&n()}}:{tabindex:-1})},updateCoordinates:R,moveItemInViewById:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).margin,n=void 0===t?0:t,r=M.current[e];if(r){var o=D.current,a=(o&&o.parentNode).getBoundingClientRect(),c=r.getBoundingClientRect();if("horizontal"===i){var l=a.width,u=a.left,s=c.width,f=c.left;u<=f&&u+l>=f+s||R(-(f-o.getBoundingClientRect().left)+n,void 0)}}},moveToDeltaSize:function(e){R(v+e,O+e)}}}},240986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(124852),o=n(423482),i=n.n(o),a=n(986267),c=n(752043);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={openlayers:{fit:function(e){var t,n=e.map,r=e.geometry,o=e.padding,i=e.geometryProjection,l=e.fixedZoom,u=e.maxZoom,s=e.duration,f=n.getView(),p=f.getProjection().getCode();if(2===r.length){var d=(0,a.reproject)(r,i,p),y=d.x,m=d.y;t=new c.Z([y,m])}else t=(0,a.reprojectBbox)(r,i,p);var b=o||{},v=b.top,g=void 0===v?0:v,h=b.right,O=void 0===h?0:h,w=b.bottom,S=void 0===w?0:w,j=b.left,P=void 0===j?0:j;f.fit(t,{padding:[g,O,S,P],maxZoom:l?f.getZoom():u,duration:s})}},leaflet:{fit:function(e){var t,n,r,o=e.map,i=e.geometry,c=e.padding,u=e.geometryProjection,s=e.fixedZoom,f=e.maxZoom,p=e.duration,d=s?o.getZoom():f,y=c.top,m=void 0===y?0:y,b=c.right,v=void 0===b?0:b,g=c.bottom,h=void 0===g?0:g,O=c.left,w=void 0===O?0:O;if(2===i.length){var S=(0,a.reproject)(i,u,"EPSG:4326"),j=S.x,P=S.y;t=[[P,j],[P,j]]}else{var E=(n=(0,a.reprojectBbox)(i,u,"EPSG:4326"),r=4,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(n,r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),T=E[0],C=E[1],I=E[2];t=[[C,T],[E[3],I]]}o.flyToBounds(t,{paddingTopLeft:[w,m],paddingBottomRight:[v,h],maxZoom:d,animate:!!p,duration:p/1e3})}}};function s(e){var t=e.map,n=e.mapType,o=e.active,i=e.geometry,a=e.geometryProjection,c=void 0===a?"EPSG:4326":a,l=e.padding,s=e.maxZoom,f=e.fixedZoom,p=e.duration,d=(0,r.useRef)();return d.current=function(){t&&u[n]&&u[n].fit({map:t,geometry:i,padding:l,geometryProjection:c,maxZoom:s,fixedZoom:f,duration:p})},(0,r.useEffect)((function(){o&&i&&d.current()}),[i,o]),null}s.propTypes={id:i().string,map:i().object,mapType:i().string,active:i().bool,geometry:i().array,geometryProjection:i().string,padding:i().object,maxZoom:i().number,fixedZoom:i().bool,duration:i().number},s.defaultProps={geometryProjection:"EPSG:4326",padding:{top:0,right:0,bottom:0,left:0}};const f=s},743837:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(124852),o=n.n(r),i=n(423482),a=n.n(i),c=n(706909);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var u=["map","active","method","mapId","mapType","features","options","onChange"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t,n,i=e.map,a=e.active,l=e.method,f=e.mapId,y=e.mapType,m=e.features,b=e.options,v=e.onChange,g=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,u),h=(t=(0,r.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=h[0],w=h[1];return(0,r.useEffect)((function(){w(a?"drawOrEdit":"clean")}),[a]),"openlayers"!==y?null:o().createElement(c.Z,s({},g,{map:i,drawOwner:f,drawStatus:O,drawMethod:l,features:m,options:p({drawEnabled:a,addClickCallback:!0,editEnabled:!0,featureProjection:"EPSG:4326",geodesic:!1,stopAfterDrawing:!1,transformToFeatureCollection:!0,translateEnabled:!1,useSelectedStyle:!0},b),onDrawingFeatures:v.bind(null,f)}))}y.propTypes={active:a().bool,method:a().string,features:a().array,onChange:a().func,options:a().object},y.defaultProps={active:!1,method:"Point",features:[],onChange:function(){},options:{}};const m=y},916788:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(124852),o=n.n(r),i=n(423482),a=n.n(i),c=n(1206),l=n.n(c),u=n(196797),s=n.n(u),f=n(867076);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function b(e,t,n){return t=g(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function O(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){s()(this._node)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&s()(this._node)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.src,i=t.fit,a=void 0===i?"cover":i,c=t.enableFullscreen,u=void 0===c||c,s=t.fullscreen,f=t.onClick,p=t.description,d=t.showCaption,m=t.caption,b=void 0===m?p:m,v=t.credits,g=t.loaderStyle,h=this.props.loaderComponent,O=this.props.errorComponent;return o().createElement("div",{id:n,className:"ms-media ms-media-image"},r&&"error"!==this.props.status&&o().createElement("img",{ref:function(t){e._node=t},src:r,onLoad:function(){return e.props.onChangeStatus("loaded")},onError:function(){return e.props.onChangeStatus("error")},onClick:u?function(){return f(!0)}:void 0,style:{objectFit:a,fontFamily:"object-fit: ".concat(a),cursor:u?"pointer":"default"}}),r&&!this.props.status&&h&&o().createElement(h,{style:y({},g)}),"error"===this.props.status&&O&&o().createElement(O,null),v&&o().createElement("div",{className:"ms-media-credits"},o().createElement("small",null,v)),d&&b&&o().createElement("div",{className:"ms-media-caption"},o().createElement("small",null,b)),u&&s?o().createElement(l(),{mainSrc:r,onCloseRequest:function(){return f(!1)}}):null)}}])&&m(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(r.Component);O(S,"propTypes",{src:a().string,id:a().string,fit:a().string,description:a().string,showCaption:a().bool,credits:a().string,altText:a().string,enableFullscreen:a().bool,fullscreen:a().bool,onClick:a().func,onChangeStatus:a().func,status:a().string,loaderComponent:a().oneOfType([a().element,a().func]),errorComponent:a().oneOfType([a().element,a().func]),caption:a().string,loaderStyle:a().object});const j=(0,f.compose)((0,f.withState)("fullscreen","onClick",!1),(0,f.withState)("status","onChangeStatus",""))(S)},437034:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var r=n(124852),o=n.n(r),i=n(867076),a=n(480681),c=n(319180),l=n(91812),u=n(937981),s=n(469705),f=n(57068),p=n(1979),d=n(323010),y=n(461928);const m=(0,i.compose)(s.Z,(0,l.Z)(0),c.Z,d.ZP,p.yM,u.Z,f.e)(y.Z);var b=n(192579),v=n(727693),g=n(399534),h=n(815135),O=n(580628),w=n(38560);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}var j=["id","map","fit","editMap","onMapViewChanges","eventHandlers","expandable","active","setActive","width","height","size","showCaption","caption","mapType","onMapTypeLoaded","layers","children"],P=["layers","mapOptions","description"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function T(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==S(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var x=(0,h.Z)(w.Z);const D=(0,i.compose)((0,i.withState)("active","setActive",!1),O.Z)((function(e){var t=e.id,n=e.map,i=void 0===n?{layers:[v.D]}:n,c=e.fit,l=e.editMap,u=void 0!==l&&l,s=e.onMapViewChanges,f=e.eventHandlers,p=e.expandable,d=void 0!==p&&p,y=e.active,h=e.setActive,O=e.width,w=e.height,S=e.size,C=e.showCaption,I=e.caption,D=e.mapType,M=void 0===D?"leaflet":D,R=e.onMapTypeLoaded,L=e.layers,N=e.children,Z=k(e,j),B=i.data?i.data:i,F=B.layers,U=void 0===F?[]:F,G=B.mapOptions,W=void 0===G?{}:G,_=B.description,z=k(B,P),V=I||_,q=d?y?{zoomControl:!1,interactive:!0,mapOptions:{scrollWheelZoom:!0,interactions:{mouseWheelZoom:!0,dragPan:!0}}}:{zoomControl:!1,interactive:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!1}}}:{mapOptions:W},H=u?{mapOptions:A(A({},W),{},{interactions:A(A({},W.interactions),{},{mouseWheelZoom:z.zoomControl})})}:q,Y=!Z.isDrawEnabled&&z.mapInfoControl&&!(d&&!y),Q=o().createElement(o().Fragment,null,o().createElement(m,E({},Z,{key:d?"overlay":"block",onMapViewChanges:s,eventHandlers:f,map:A(A({},z),{},{id:"media-".concat(t),resize:O+"-"+w+"_"+S,className:"aaaa",style:A({cursor:Y?"pointer":"default"},d&&!y&&{pointerEvents:"none",touchAction:"none"})}),layers:L?[].concat(T(U),T(L)):U,tools:Y?["popup"]:[],options:(0,b.kn)(H),mapType:M,onMapTypeLoaded:R}),r.Children.map(N,(function(e){return e?(0,r.cloneElement)(e,{mapType:M}):null}))),d&&!u&&o().createElement(x,{className:"ms-expand-media-button",onClick:function(){return h(!y)},tooltipId:y?"geostory.closeFullscreenMap":"geostory.showFullscreenMap",tooltipPosition:"left"},o().createElement(a.Glyphicon,{glyph:y?"1-close":"1-full-screen"})));return o().createElement("div",{className:"ms-media ms-media-map ".concat(W.zoomPosition||""),style:{objectFit:c}},y&&d?o().createElement(g.Z,null,o().createElement("div",{className:"ms-expanded-media-container"},Q)):Q,C&&V&&o().createElement("div",{className:"ms-media-caption"},o().createElement("small",null,V)))}))},882017:(e,t,n)=>{"use strict";n.d(t,{Ln:()=>y,ZP:()=>b});var r=n(124852),o=n.n(r),i=n(423482),a=n.n(i),c=n(916788),l=n(437034),u=n(452826),s=["debounceTime","mediaViewer","children"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=c.Z,y={image:c.Z,map:l.Z,video:u.Z},m=function(e){var t,n,i=e.debounceTime,a=e.mediaViewer,c=e.children,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s),u="".concat(l.id).concat(l.resourceId?"-".concat(l.resourceId):""),m=(t=(0,r.useState)({}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],v=m[1],g=void 0===b[u]||b[u],h=a||y[l.mediaType||l.type]||d;return o().createElement(h,f({sectionType:l.sectionType,debounceTime:i,loading:b,isLoading:g,onLoad:v,loadingId:u},l),c)};m.propTypes={id:a().string,lazy:a().bool,mediaType:a().string,type:a().string,debounceTime:a().number},m.defaultProps={id:"",lazy:!0,mediaType:"",type:""};const b=m},965539:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(124852),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){var r,o,a,c;r=e,o=t,a=n[t],c=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(c)?c:String(c))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const l=function(e){var t=e.id,n=e.children,r=e.header,i=e.footer,a=e.columns,l=e.height,u=e.style,s=void 0===u?{}:u,f=e.className,p=e.bodyClassName,d=void 0===p?"ms2-border-layout-body":p;return o().createElement("div",{id:t,className:f,style:c({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},s)},r,o().createElement("div",{className:d,style:{display:"flex",flex:1,overflowY:"auto"}},o().createElement("main",{className:"ms2-border-layout-content",style:{flex:1,overflowX:"hidden"}},l?o().createElement("div",{style:{height:l}},n):n),l?o().createElement("div",{style:{height:l}},a):a),i)}},393546:(e,t,n)=>{"use strict";n.d(t,{jF:()=>Le,Fc:()=>Ie,EC:()=>Me,C2:()=>De,Cw:()=>xe,rm:()=>Re});var r=n(414293),o=n.n(r),i=n(92742),a=n.n(i),c=n(747037),l=n.n(c),u=n(701469),s=n.n(u),f=n(984596),p=n.n(f),d=n(91175),y=n.n(d),m=n(610928),b=n.n(m),v=n(313311),g=n.n(v),h=n(513218),O=n.n(h),w=n(421915),S=n(443143),j=n(986267),P=n(433506),E=n(281763),T=n.n(E),C=n(831219),I=n(162875),A=n(315565),k=n(898185),x=n(438097),D=n.n(x),M=P.Z.markers.extra,R=M.icons[0],L=M.icons[1],N=M.size[1],Z=P.Z.getGlyphs("fontawesome"),B=function(e,t){var n=e.highlight,r=e.rotation,o=void 0===r?0:r;return n?[new C.default({image:new I.default({anchor:[.5,t],rotation:o,anchorXUnits:"fraction",anchorYUnits:"pixels",src:D(),scale:.5})})]:[]},F=function(e,t){var n,r,o=null==Z?void 0:Z[null==e||null===(n=e.style)||void 0===n?void 0:n.iconGlyph],i="FontAwesome",a=2;return null!=e&&null!==(r=e.style)&&void 0!==r&&r.iconText&&(o=e.style.iconText,i="sans-serif",a=1.6),new A.default({rotation:t,text:o,font:"14px ".concat(i),offsetY:-N*a/3,fill:new k.default({color:"#FFFFFF"})})};const U={extra:{getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o()(e.style&&e.style.rotation)?0:e.style.rotation;return[new C.default({image:new I.default({rotation:t,anchor:[12,12],anchorXUnits:"pixels",anchorYUnits:"pixels",src:L})}),new C.default({image:new I.default({rotation:t,src:R,anchor:[M.size[0]/2,M.size[1]],anchorXUnits:"pixels",anchorYUnits:"pixels",size:M.size,offset:[M.colors.indexOf(e.style.iconColor||"blue")*M.size[0],M.shapes.indexOf(e.style.iconShape||"circle")*M.size[1]]}),text:F(e,t)})].concat(B(e.style,2*(N+15)))}},standard:{getIcon:function(e){var t=e.style,n=e.iconAnchor,r=o()(t&&t.rotation)?0:t.rotation,i=t.iconAnchor||n,a=[new C.default({image:new I.default({anchor:i||[.5,1],anchorXUnits:t.anchorXUnits||(i||0===i?"pixels":"fraction"),anchorYUnits:t.anchorYUnits||(i||0===i?"pixels":"fraction"),size:s()(t.size)?t.size:T()(t.size)?[t.size,t.size]:void 0,rotation:r,anchorOrigin:t.anchorOrigin||"top-left",src:t.iconUrl||t.symbolUrlCustomized||t.symbolUrl})})];t.shadowUrl&&(a=[new C.default({image:new I.default({anchor:[12,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:t.shadowUrl})}),a[0]]);var c=s()(t.size)?t.size[1]:T()(t.size)?t.size:0;return c=c>32?c+.75*c:N+10,a.concat(B(t,c))}},html:{getIcon:function(){return null}}};var G=n(166287),W=n(409371),_=n(120767),z=n(752043),V=n(944538),q=n(882702),H=n(375875),Y=n.n(H),Q=n(903918),$=n.n(Q),X=n(51205),K=n.n(X),J=n(727418),ee=n.n(J),te=n(761868);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==ne(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=[0,153,255,1],le=new W.default({radius:5,fill:null,stroke:new _.default({color:"red",width:1})}),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,i=e.applyToPolygon,a=void 0!==i&&i;return new C.default({image:new W.default({radius:n,fill:new k.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new z.Z(y()(r)):null}})},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,i=e.applyToPolygon,a=void 0!==i&&i;return new C.default({image:new W.default({radius:n,fill:new k.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new z.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:b()(r))}})},fe=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),se(e)]},pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new C.default({text:new A.default({offsetY:void 0!==e.offsetY?e.offsetY:-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",textBaseline:e.verticalAlign||"middle",text:t||"",font:e.font,fill:new k.default({color:(0,S.qq)(e.stroke||e.color||"#000000",e.opacity||1)}),stroke:e.labelOutlineColor?new _.default({color:(0,S.qq)(e.labelOutlineColor,e.labelOutlineOpacity||1),width:e.labelOutlineWidth||1}):n?new _.default({color:[255,255,255,1],width:2}):null,rotation:e.rotation?e.rotation*Math.PI/180:0}),image:n?new W.default({radius:5,fill:null,stroke:new _.default({color:(0,S.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null})},de={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,radius:10},ye={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},me={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},be={Marker:{iconColor:"orange",iconShape:"circle",iconGlyph:"comment"},Text:{fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1},Circle:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},Point:de,MultiPoint:de,LineString:ye,MultiLineString:ye,Polygon:me,MultiPolygon:me},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"blue",width:3,lineDash:[6]};return{stroke:new _.default(e.style?e.style.stroke||{color:e.style.color||t.color,lineDash:l()(e.style.dashArray)&&a()(e.style.dashArray).split(" ")||t.lineDash,width:e.style.weight||t.width,lineCap:e.style.lineCap||"round",lineJoin:e.style.lineJoin||"round",lineDashOffset:e.style.dashOffset||0}:ae({},t))}},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"rgba(0, 0, 255, 0.1)"};return{fill:new k.default(e.style?e.style.fill||{color:(0,S.qq)(e.style.fillColor,e.style.fillOpacity)||t.color}:ae({},t))}},he={Point:function(){return[new C.default({image:le})]},LineString:function(e){return[new C.default(ee()({},ve(e,{color:"blue",width:3})))]},MultiLineString:function(e){return[new C.default(ee()({},ve(e,{color:"blue",width:3})))]},MultiPoint:function(){return[new C.default({image:le})]},MultiPolygon:function(e){return[new C.default(ee()({},ve(e),ge(e)))]},Polygon:function(e){return[new C.default(ee()({},ve(e),ge(e)))]},GeometryCollection:function(e){return[new C.default(ee()({},ve(e),ge(e),{image:new W.default({radius:10,fill:null,stroke:new _.default({color:"magenta"})})}))]},Circle:function(){return[new C.default({stroke:new _.default({color:"red",width:2}),fill:new k.default({color:"rgba(255,0,0,0.2)"})})]},marker:function(e){return[new C.default({image:new I.default({anchor:[14,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:K()})}),new C.default({image:new I.default({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:$()}),text:new A.default({text:e.label,scale:1.25,offsetY:8,fill:new k.default({color:"#000000"}),stroke:new _.default({color:"#FFFFFF",width:2})})})]}},Oe=function(e,t){var n=e.getGeometry().getType();return he[n](t&&t.style&&t.style[n]&&{style:ae({},t.style[n])}||t||{})};function we(e){if(e.style.iconUrl)return U.standard.getIcon(e);var t=e.style.iconLibrary||"extra";return U[t]?U[t].getIcon(e):null}var Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{style:be},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=t.style[e]||t.style;if("MultiLineString"===e||"LineString"===e){var l=[new C.default({stroke:t.style.useSelectedStyle?new _.default({color:[255,255,255,1],width:c.weight+2}):null}),new C.default(c?{stroke:new _.default(c&&c.stroke?c.stroke:{color:(0,S.qq)(t.style&&c.color||"#0000FF",c.opacity||1),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),image:n?le:null}:{stroke:new _.default(be[e]&&be[e].stroke?be[e].stroke:{color:(0,S.qq)(t.style&&be[e].color||"#0000FF",be[e].opacity||1),lineDash:t.style.highlight?[10]:[0],width:be[e].weight||1})})],u=t.style.useSelectedStyle?fe({radius:c.weight,applyToPolygon:!0},{radius:c.weight,applyToPolygon:!0}):[];return[].concat(re(u),l)}if(("MultiPoint"===e||"Point"===e)&&(c.iconUrl||c.iconGlyph))return n?new C.default({image:le}):we({style:ae(ae({},c),{},{highlight:t.style.highlight||t.style.useSelectedStyle})});if("Circle"===e&&a)return[new C.default({stroke:t.style.useSelectedStyle?new _.default({color:[255,255,255,1],width:c.weight+4}):null}),new C.default({stroke:new _.default(c&&c.stroke?c.stroke:{color:t.style.useSelectedStyle?ce:(0,S.qq)(t.style&&c.color||"#0000FF",c.opacity||1),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),fill:new k.default(c.fill?c.fill:{color:(0,S.qq)(t.style&&c.fillColor||"#0000FF",c.fillOpacity||.2)})}),new C.default({image:t.style.useSelectedStyle?new W.default({radius:3,fill:new k.default(c.fill?c.fill:{color:ce})}):null,geometry:function(e){var t=e.getGeometry();if("Circle"===t.getType()){var n=t.getCenter();return new z.Z(n)}return null}})];if("Text"===e&&c.font)return[pe(c,r[0],t.style.useSelectedStyle||t.style.highlight)];if("MultiPolygon"===e||"Polygon"===e){var s=[new C.default({stroke:t.style.useSelectedStyle?new _.default({color:[255,255,255,1],width:c.weight+2}):null}),new C.default({stroke:new _.default(c.stroke?c.stroke:{color:t.style.useSelectedStyle?ce:(0,S.qq)(t.style&&c.color||"#0000FF",o()(c.opacity)?1:c.opacity),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),image:n?le:null,fill:new k.default(c.fill?c.fill:{color:(0,S.qq)(t.style&&c.fillColor||"#0000FF",o()(c.fillOpacity)?1:c.fillOpacity)})})],f=t.style.useSelectedStyle?fe({radius:c.weight,applyToPolygon:!0},{radius:c.weight,applyToPolygon:!0}):[];return[].concat(s,re(f))}return i};function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==je(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={white:[255,255,255,1],blue:[0,153,255,1],width:3},Ie=function(e){if((0,G.isMarkerStyle)(e)){if(e.iconUrl)return U.standard.getIcon({style:e});var t=e.iconLibrary||"extra";if(U[t])return U[t].getIcon({style:e})}return null};(0,G.registerGeometryFunctions)("centerPoint",(function(e){var t=e.getGeometry(),n=e.getProperties().isGeodesic,r=void 0!==n&&n,o=t.getExtent(),i=r?(0,w.qg)(o):t.getCenter&&t.getCenter()||[o[2]-o[0],o[3]-o[1]];return new z.Z(i)}),"Point"),(0,G.registerGeometryFunctions)("lineToArc",(function(e){var t=e.getGeometry().getType();if("LineString"===t||"MultiPoint"===t){var n=e.getGeometry().getCoordinates();return n=(0,j.transformLineToArcs)(n.map((function(e){var t=(0,j.reproject)(e,"EPSG:3857","EPSG:4326");return[t.x,t.y]}))),new V.Z(n.map((function(e){var t=(0,j.reproject)(e,"EPSG:4326","EPSG:3857");return[t.x,t.y]})))}return e.getGeometry()}),"LineString"),(0,G.registerGeometryFunctions)("startPoint",(function(e){var t=e.getGeometry(),n="Polygon"===t.getType()?t.getCoordinates()[0]:t.getCoordinates();return n.length>1?new z.Z(y()(n)):null}),"Point"),(0,G.registerGeometryFunctions)("endPoint",(function(e){var t=e.getGeometry(),n=t.getType(),r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new z.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:b()(r))}),"Point");var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.geometry?function(t){var n=e.geometry||"centerPoint";return G.geometryFunctions[n].func(t)}:function(e){return e.getGeometry()}},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!o()(e.filtering)||e.filtering}(t,e);if(r){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,G.isStrokeStyle)(e)?new _.default(e.stroke&&O()(e.stroke)?e.stroke:{color:e.highlight?Ce.blue:(0,S.qq)(e.color||e.stroke||"#0000FF",o()(e.opacity)?1:e.opacity),width:o()(e.weight)?1:e.weight,lineDash:l()(e.dashArray)&&a()(e.dashArray).split(" ")||s()(e.dashArray)&&e.dashArray||[0],lineCap:e.lineCap||"round",lineJoin:e.lineJoin||"round",lineDashOffset:e.dashOffset||0}):null}(t),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,G.isFillStyle)(e)?new k.default(e.fill&&O()(e.fill)?e.fill:{color:(0,S.qq)(e.fillColor||"#0000FF",o()(e.fillOpacity)?1:e.fillOpacity)}):null}(t),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,G.isCircleStyle)(e)?new W.default({stroke:t,fill:n,radius:e.radius||5}):null}(t,i,c);if((0,G.isMarkerStyle)(t))return Ie(t).map((function(e){return e.setGeometry(Ae(t)),e}));if((0,G.isSymbolStyle)(t))return U.standard.getIcon({style:t}).map((function(e){return e.setGeometry(Ae(t)),e}));var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,G.isTextStyle)(e)?new A.default({fill:n,offsetY:e.offsetY||-4*Math.sqrt(e.fontSize),rotation:e.textRotationDeg?e.textRotationDeg/180*Math.PI:0,textAlign:e.textAlign||"center",text:e.label||r&&r.properties&&r.properties.valueText||"New",font:e.font||"Arial",stroke:e.highlight?new _.default({color:[255,255,255,1],width:2}):t,image:e.highlight?new W.default({radius:5,fill:null,stroke:new _.default({color:(0,S.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null}):null}(t,i,c,e),p=t.zIndex;return[new C.default({geometry:Ae(t),image:u,text:f,stroke:!f&&!u&&i||null,fill:!f&&!u&&c||null,zIndex:p})].concat(e&&e.properties&&e.properties.canEdit&&!e.properties.isCircle?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{radius:3,fillColor:"green",applyToPolygon:!0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{radius:3,fillColor:"red",applyToPolygon:!0},r=[];return g()(e,(function(e){return"startPoint"===e.geometry&&e.filtering}))||r.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,i=e.applyToPolygon,a=void 0!==i&&i;return new C.default({image:new W.default({radius:n,fill:new k.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new z.Z(y()(r)):null}})}(Te({},t))),g()(e,(function(e){return"endPoint"===e.geometry&&e.filtering}))||r.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,i=e.applyToPolygon,a=void 0!==i&&i;return new C.default({image:new W.default({radius:n,fill:new k.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new z.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:b()(r))}})}(Te({},n))),r}(n):[])}return new C.default({})},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=e.style;if(t){var n=s()(t)?t:p()(t);return n.reduce((function(t,r){return t.concat(ke(e,r,n))}),[])}return[]},De=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.style&&e.style.url)return Y().get(e.style.url).then((function(t){return q.Promise.all([(0,G.getStyleParser)(e.style.format),(0,G.getStyleParser)("openlayers")]).then((function(e){var n,r,o=(r=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return i.readStyle(t.data).then((function(e){return a.writeStyle(e)}))}))}));if(e.style&&"geostyler"===e.style.format)return(0,G.getStyleParser)("openlayers").then((function(t){return t.writeStyle(e.style.styleObj||e.style.body)}));var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.styleName&&!e.overrideOLStyle)return function(t){if("marker"===e.styleName)switch(t.getGeometry().getType()){case"Point":case"MultiPoint":return he.marker(e)}return he[e.styleName](e)};var r,i=e.nativeStyle,a=n,c=0,l=e.style&&e.style.type||(e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:void 0);if("FeatureCollection"===l||e.features&&e.features[0]&&"FeatureCollection"===e.features[0].type)return function(n){var o=this||n;r=o.getGeometry()&&o.getGeometry().getType();var i=o&&o.getProperties();i&&i.isCircle&&(r="Circle",c=i.radius),i&&i.isText&&(r="Text",a=[i.valueText]);var l=(0,te.t8)("style.useSelectedStyle",i.canEdit,e);return Se(r,l,t,a,null,c)};if(e&&e.properties&&e.properties.isText)return r="Text",a=[e.properties.valueText],Se(r,e,t,a,null,c);if(e&&e.properties&&e.properties.isCircle)return r="Circle",c=e.properties.radius,Se(r,e,t,a,null,c);if(!i&&e.style){if(i={stroke:new _.default(e.style.stroke?e.style.stroke:{color:(0,S.qq)(e.style&&e.style.color||"#0000FF",o()(e.style.opacity)?1:e.style.opacity),lineDash:e.style.lineDash||(e.style.highlight?[10]:[0]),width:e.style.weight||1}),fill:new k.default(e.style.fill?e.style.fill:{color:(0,S.qq)(e.style&&e.style.fillColor||"#0000FF",o()(e.style.fillOpacity)?1:e.style.fillOpacity)})},"Point"!==l&&"MultiPoint"!==l||(i={image:new W.default(ee()({},i,{radius:e.style.radius||5}))}),e.style.iconUrl||e.style.iconGlyph){var u=we(e);return function(t){var n=this||t;switch(r=n.getGeometry().getType()){case"Point":case"MultiPoint":return u;default:return Oe(n,e)}}}return i=new C.default(i),"GeometryCollection"===l?i=function(o){var i,a=this||o;r=a.getGeometry().getType();var c=a.get("textGeometriesIndexes")||[],l=a.get("circles")||[],u=a.get("textValues");return"GeometryCollection"===a.getGeometry().getType()?a.getGeometry().getGeometries().reduce((function(o,a,f){if(("Point"===(r=a.getType())||"MultiPoint"===r)&&c.length&&-1!==c.indexOf(f)){var p=Se("Text",e,t,[u[c.indexOf(f)]]);return p.setGeometry(a),o.concat([p])}if("Polygon"===r&&l.length&&-1!==l.indexOf(f)){var d=Se("Circle",e,t,[]);return d.setGeometry(a),o.concat([d])}if("Point"===r||"MultiPoint"===r)return i=we({style:ae(ae({},e.style[r]),{},{highlight:e.style.highlight})}),o.concat(i.map((function(e){return e.setGeometry(a),e})));var y=Se(r,e,t,n);return s()(y)?y.forEach((function(e){return e.setGeometry(a)})):y.setGeometry(a),o.concat([y])}),[]):"Point"===r||"MultiPoint"===r?(i=we({style:ae(ae({},e.style[r]),{},{highlight:e.style.highlight})}),t?new C.default({image:le,geometry:a.getGeometry()}):i.map((function(e){return e.setGeometry(a.getGeometry()),e}))):Se(r,e,t,n)}:("Circle"===l&&(c=e.features&&e.features.length&&e.features[0].properties&&e.features[0].properties.radius||10),Se(l,e,t,n,i,c))}return i||Oe}(e,t,n);return e.asPromise?new q.Promise((function(e){e(r)})):r},Me=we,Re=fe,Le=be},771335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(124852),o=n.n(r),i=n(423482),a=n.n(i),c=n(805346),l=n(913718),u=n(314068);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function d(e,t,n){return t=m(t),function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(e,y()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:String(t)}var O={FORMAT:o().createElement(c.Z,{msgId:"map.errorFormat"}),SIZE:o().createElement(c.Z,{msgId:"map.errorSize"})},w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return g(b(e=d(this,t,[].concat(r))),"state",{}),g(b(e),"getThumbnailUrl",(function(){return e.props.map&&e.props.map.newThumbnail&&"NODATA"!==e.props.map.newThumbnail?decodeURIComponent(e.props.map.newThumbnail):null})),g(b(e),"getDataUri",(function(e,t){var n=e;if(n&&n.length>0){var r=n[0],o=new FileReader;return o.onload=function(e){return t(e.target.result,r.size)},o.readAsDataURL(r)}return t(null)})),g(b(e),"getThumbnailDataUri",(function(t){e.getDataUri(e.files,t)})),g(b(e),"generateUUID",(function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))})),g(b(e),"processUpdateThumbnail",(function(t,n,r){var o=e.generateUUID(),i="THUMBNAIL";!e.props.map||r||!e.props.map.thumbnail||e.refs.imgThumbnail||n||e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!0),e.props.map&&!r&&e.props.map.newThumbnail&&!e.refs.imgThumbnail&&n&&(e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id)),e.props.map.newThumbnail&&r&&e.refs.imgThumbnail&&(e.deleteThumbnail(e.props.map.thumbnail,null,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id)),e.props.map.newThumbnail&&!r&&e.refs.imgThumbnail&&e.props.onSaveAll(t,n,o,r,i,e.props.map.id),e.props.map.newThumbnail||r||e.refs.imgThumbnail||(e.props.map.thumbnail&&n&&e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id))})),g(b(e),"updateThumbnail",(function(t,n){e.props.map.errors&&e.props.map.errors.length||e.getDataUri(e.files,(function(r){return e.processUpdateThumbnail(t,n,r),r}))})),g(b(e),"deleteThumbnail",(function(t,n){if(t&&-1!==t.indexOf("geostore")){var r=(0,l.C)(t);r&&e.props.onDeleteThumbnail(r,n)}})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,(r=[{key:"renderThumbnailErrors",value:function(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?o().createElement("div",{className:"dropzone-errorBox alert-danger"},o().createElement("p",null,o().createElement(c.Z,{msgId:"map.error"})),this.props.thumbnailErrors.map((function(e){return o().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},O[e])}))):null}},{key:"render",value:function(){var e=this;return o().createElement(u.Z,f({ref:"imgThumbnail",thumbnail:this.getThumbnailUrl(),className:null,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.map.saving?"none":"auto"},label:this.props.withLabel&&o().createElement("label",{className:"control-label"},o().createElement(c.Z,{msgId:"map.thumbnail"})),ù:!0,message:o().createElement(o().Fragment,null,this.props.message,o().createElement("br",null),this.props.suggestion),error:this.renderThumbnailErrors(),onUpdate:function(t,n){var r;e.props.onError([],e.props.map.id),e.files=n,e.props.onUpdate(t,null==n||null===(r=n[0])||void 0===r?void 0:r.preview)},onError:function(t,n){e.props.onError(t,e.props.map.id),e.files=n,e.props.onUpdate(null,null)},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemoveThumbnail(),e.props.onError([],e.props.map.id)}},this.props.thumbnailOptions&&{thumbnailOptions:this.props.thumbnailOptions}))}}])&&p(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);g(w,"propTypes",{glyphiconRemove:a().string,style:a().object,thumbnailErrors:a().array,loading:a().bool,withLabel:a().bool,map:a().object,maxFileSize:a().number,thumbnailOptions:a().object,onDrop:a().func,onError:a().func,onUpdate:a().func,onSaveAll:a().func,onCreateThumbnail:a().func,onDeleteThumbnail:a().func,onRemoveThumbnail:a().func,message:a().oneOfType([a().string,a().element]),suggestion:a().oneOfType([a().string,a().element])}),g(w,"contextTypes",{messages:a().object}),g(w,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:function(){},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemoveThumbnail:function(){},onCreateThumbnail:function(){},onDeleteThumbnail:function(){},message:o().createElement(c.Z,{msgId:"map.message"}),suggestion:o().createElement(c.Z,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[],thumbnailOptions:null});const S=w},38560:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(480681),o=n(124852),i=n.n(o),a=n(294184),c=n.n(a),l=["disabled","className","onClick"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}const s=(f=r.Button,i().forwardRef((function(e,t){var n=e.disabled,r=e.className,o=e.onClick,a=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return i().createElement(f,u({ref:t,className:n?c()("disabled",r):r,onClick:function(){n||a.apply(void 0,arguments)}},s),s.children)})));var f},807472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(727418),o=n.n(r),i=n(423482),a=n.n(i),c=n(124852),l=n.n(c),u=n(485294),s=n.n(u),f=n(472986),p=n.n(f),d=n(805346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function g(e,t,n){return t=O(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(e,h()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function j(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:String(t)}var E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return j(w(e=g(this,t,[].concat(r))),"renderLoading",(function(){return e.props.maskLoading?l().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},l().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},l().createElement(d.Z,{msgId:"loading"}),l().createElement(p(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),j(w(e),"renderRole",(function(t){return l().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),j(w(e),"hasRole",(function(t){return l().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),j(w(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=l().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},l().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),l().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?l().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):l().createElement("span",null)),n=this.props.draggable?l().createElement(s(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,r=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?l().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:r,className:"fade in modal "+this.props.containerClassName,role:"dialog"},n):n}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(l().Component);j(E,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),j(E,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const T=E},487320:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(124852),o=n.n(r),i=n(423482),a=n.n(i),c=n(396606),l=n(743129),u=n(480681),s=n(352595);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t,n,i=e.text,a=e.placement,c=e.bsStyle,l=e.left,p=e.top,d=e.title,y=e.glyph,m=e.id,b=(0,r.useRef)(),v=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],h=v[1];return o().createElement("span",{className:"mapstore-info-popover",onMouseLeave:function(){return h(!1)}},o().createElement(u.Glyphicon,{onMouseEnter:function(){h(!0)},ref:function(e){b.current=e},className:"text-".concat(c),glyph:y}),o().createElement(s.Z,{placement:a,show:g,target:function(){return b.current}},o().createElement(u.Popover,{id:m,placement:a,positionLeft:l,positionTop:p,title:d},o().createElement("div",{style:{display:"flex"}},i))))};p.propTypes={id:a().string,title:a().string,text:a().string,glyph:a().string,bsStyle:a().string,placement:a().string,left:a().number,top:a().number,trigger:a().oneOfType([a().array,a().bool])},p.defaultProps={id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info"};const d=p;var y=n(615402);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){var r;return r=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==m(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=e.id,n=e.label,r=e.infoFormat,i=e.availableInfoFormat,a=e.popoverMessage,c=e.disabled,s=e.onInfoFormatChange,f=e.selectProps,p=Object.keys(i).reduce((function(e,t){return Object.keys(e).map((function(t){return e[t]})).some((function(e){return e===i[t]}))?e:g(g({},e),{},h({},t,i[t]))}),{}),m=Object.keys(p).map((function(e){return{value:p[e],label:e}})),v=o().createElement(o().Fragment,null,"   ",a&&o().createElement(d,{text:o().createElement(y.Z,{msgId:a})}),o().createElement(l.ZP,b({},f,{id:t,value:r,clearable:!1,disabled:c,options:m,onChange:function(e){return s(null==e?void 0:e.value)}})));return n?o().createElement(u.FormGroup,{bsSize:"small"},o().createElement(u.ControlLabel,null,n),v):v}O.propTypes={id:a().string,label:a().oneOfType([a().func,a().string,a().object]),availableInfoFormat:a().object,infoFormat:a().string,popoverMessage:a().string,onInfoFormatChange:a().func,disabled:a().bool,selectProps:a().object},O.defaultProps={id:"mapstore-feature-format-selector",availableInfoFormat:(0,c.eq)(),infoFormat:(0,c.wR)(),popoverMessage:"",onInfoFormatChange:function(){},selectProps:{}};const w=O},532425:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(423482),o=n.n(r),i=n(124852),a=n.n(i);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){return e>100?"full":e>40?"medium":"small"},f=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:u({width:t,height:t,overflow:"hidden"},r)},!i&&a().createElement("div",{className:"mapstore-".concat(s(t),"-size-loader")}))};f.propTypes={size:o().number,className:o().string,style:o().object};const p=f},352595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(461365).Z)(n(480681).Overlay)},1036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(618446),o=n.n(r);const i=(0,n(867076).shouldUpdate)((function(e,t){return!o()(e.start,t.start)||e.disabled!==t.disabled}))(n(185552))},212610:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(124852),o=n.n(r),i=n(867076),a=n(957557),c=n.n(a),l=n(815135);const u=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,n=e.noTooltipWhenDisabled;return!(void 0!==n&&n&&t)}),l.Z,(function(e){return function(t){return o().createElement(e,c()(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},5993:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(423482),o=n.n(r),i=n(984596),a=n.n(i),c=n(867076),l=n(86638),u=["locale"];function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){var r;return r=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==s(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y=function(e){return(0,c.compose)((0,c.getContext)({locale:o().string}),(0,c.mapProps)((function(t){var n=t.locale,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,u);return p(p({},r),a()(e).reduce(function(e,t){return function(){var n=arguments.length>1?arguments[1]:void 0;return p(p({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},d({},n,e[n]&&(0,l.MZ)(t,e[n])))}}(r,n),{}))})))}},617252:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(124852),o=n.n(r),i=n(867076),a=n(423482),c=n.n(a),l=n(957557),u=n.n(l),s=n(480681),f=n(950966);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function y(e,t,n){return t=b(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}const O=(0,i.branch)((function(e){return e.popover}),(function(e){var t;return t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),y(this,n,arguments)}var r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(n,t),r=n,(a=[{key:"renderPopover",value:function(){return o().createElement(s.Popover,u()(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,u()(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(f.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&d(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),n}(o().Component),g(t,"propTypes",{popover:c().object}),g(t,"defaultProps",{popover:{trigger:!0}}),t}))},979105:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(867076);const o=function(e,t,n){return(0,r.branch)((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})[t]}),(0,r.withState)(e,t,n))}},80717:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(124852),o=n.n(r),i=n(819081),a=n.n(i),c=n(480681),l=n(90085),u=["visible","Element","renderButton"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,n=void 0===t?[]:t,r=e.btnGroupProps,i=void 0===r?{}:r,f=e.btnDefaultProps,p=void 0===f?{}:f,d=e.transitionProps,y=void 0===d?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:d,m=function(){return n.map((function(e,t){var n=e.visible,r=void 0===n||n,i=e.Element,a=e.renderButton,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,u);return r?a||i&&o().createElement(i,s({key:c.key||t},c))||o().createElement(l.Z,s({key:c.key||t},p,c)):null}))};return o().createElement(c.ButtonGroup,i,y?o().createElement(a(),y,m()):m())}},90085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(124852),o=n.n(r),i=n(867076),a=n(805346),c=n(957557),l=n.n(c),u=n(480681),s=n(532425),f=n(212610),p=n(617252),d=n(38560),y=["glyph","loading","text","textId","glyphClassName","loaderProps","children"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}const b=(0,i.compose)(f.Z,p.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,n=e.loading,r=e.text,i=void 0===r?"":r,c=e.textId,f=e.glyphClassName,p=void 0===f?"":f,b=e.loaderProps,v=void 0===b?{}:b,g=e.children,h=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,y);return o().createElement(d.Z,l()(h,["pullRight","confirmNo","confirmYes"]),t&&!n?o().createElement(u.Glyphicon,{glyph:t,className:p}):null,c?o().createElement(a.Z,{msgId:c}):i,n?o().createElement(s.Z,m({className:"ms-loader".concat(h.bsStyle&&" ms-loader-"+h.bsStyle||"").concat(h.bsSize&&" ms-loader-"+h.bsSize||"")},v)):null,g)}))},75927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(513218),o=n.n(r),i=n(124852),a=n.n(i),c=n(480681),l=n(805346),u=n(815135);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var f=["settings","element","tabs","activeTab","width","groups","isLocalizedLayerStylesEnabled","setActiveTab","onUpdateParams","onRetrieveLayerData","realtimeUpdate"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var d=(0,u.Z)(c.NavItem);const y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,n=e.element,r=void 0===n?{}:n,i=e.tabs,u=void 0===i?[]:i,y=e.activeTab,m=e.width,b=e.groups,v=e.isLocalizedLayerStylesEnabled,g=e.setActiveTab,h=void 0===g?function(){}:g,O=e.onUpdateParams,w=void 0===O?function(){}:O,S=e.onRetrieveLayerData,j=void 0===S?function(){}:S,P=e.realtimeUpdate,E=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,f);return a().createElement(c.Row,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},a().createElement(c.Col,{xs:12},a().createElement(c.Nav,{bsStyle:"tabs",activeKey:y,justified:!0},u.map((function(e){return a().createElement(d,{key:"ms-tab-settings-"+e.id,tooltip:a().createElement(l.Z,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){return h(e.id)}},a().createElement(c.Glyphicon,{glyph:e.glyph}))})))),a().createElement(c.Col,{xs:12},u.filter((function(e){return e.id&&e.id===y})).filter((function(e){return e.Component})).map((function(e){return a().createElement(e.Component,p({},E,{key:"ms-tab-settings-body-"+e.id,containerWidth:m,element:r,groups:b,nodeType:t.nodeType,settings:t,retrieveLayerData:j,isLocalizedLayerStylesEnabled:v,onChange:function(e,t){return o()(e)?w(e,P):w(function(e,t,n){var r;return r=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==s(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t),P)}}))}))))}},616701:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(124852),o=n.n(r),i=n(867076),a=n(581859),c=n(905419),l=n(229423),u=n(221338),s=n(91175),f=n.n(s);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==p(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function e(t,n){return t.reduce((function(t,r){var o=y({},r);return o.nodes&&(o=y(y({},o),{},{nodes:e(o.nodes,n)})),n.forEach((function(e){o.nodes&&e.func(o)?o=y(y({},o),e.options):o.nodes&&(o=y({},o))})),t.push(o),t}),[])},b=function(e){var t=e.nodes,n=e.filterText;return e.currentLocale,m(t,[{options:{showComponent:!0},func:function(){return!n}},{options:{loadingError:!0},func:function(e){return f()(e.nodes.filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return n&&f()(e.nodes.filter((function(e){return!0})))}}])};const v=(0,i.withProps)((function(e){return{nodes:b(e)}}));var g=n(803307),h=n(117802);const O=(0,i.compose)(h.Z,v,g.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.changeLayerPropertyByGroup,n=void 0===t?function(){}:t,r=e.changeLayerProperty,i=void 0===r?function(){}:r,s=e.changeGroupProperty,f=void 0===s?function(){}:s,p=e.onSort,d=e.onSelect,y=e.selectedNodes,m=e.nodes,b=void 0===m?[]:m;return o().createElement(u.Z,{onSort:p,selectedNodes:y,onSelect:d,nodes:b},o().createElement(l.Z,{groupElement:o().createElement(a.Z,{onSort:p,selectedNodes:y,onSelect:d,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(r){return n(e,r,t[r])}))},onToggle:function(e,t){return f(e,"expanded",!t)},groupVisibilityCheckbox:!0}),layerElement:o().createElement(c.Z,{selectedNodes:y,onSelect:d,titleTooltip:!0,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(n){return i(e,n,t[n])}))},onUpdateNode:function(e,t,n){return Object.keys(n).map((function(t){return i(e,t,n[t])}))},onToggle:function(e,t){return i(e,"expanded",!t)}})}))}))},803307:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(984596),o=n.n(r),i=n(630998),a=n.n(i),c=n(867076),l=n(624262),u=function(e){return"".concat(e.mapId?"maps[".concat(e.mapId,"]"):"map")};const s=(0,c.withHandlers)({changeLayerProperty:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(e,t,r){var i=a()(o.layers||[],{id:e});n("".concat(u(o),".layers[").concat(i,"].").concat(t),r)}},changeLayerPropertyByGroup:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(e,t,r){return o.layers.filter((0,l.CK)(e)).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return a()(o.layers||[],{id:e})})).filter((function(e){return e>=0})).map((function(e){return n("".concat(u(o),".layers[").concat(e,"].").concat(t),r)}))}},changeGroupProperty:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,i=void 0===r?{}:r;return function(e,t,r){var c,l=i.groups?o()(i.groups):[],s=a()(l,(function(t){return e===t.id})),f=-1===s?l.length:s;"expanded"!==t||null!=l&&null!==(c=l[f])&&void 0!==c&&c.id||n("".concat(u(i),".groups[").concat(f,"].id"),e),n("".concat(u(i),".groups[").concat(f,"].").concat(t),r)}},updateMapEntries:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return n("".concat(u(o),"[").concat(t,"]"),e[t])}))}}})},648860:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(630998),o=n.n(r),i=n(867076);function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e,t){return(t.layers||[]).filter((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).group;return(void 0===t?"Default":t)===e})).map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id}))};const u=(0,i.compose)((0,i.withStateHandlers)((function(){return{selectedLayers:[],selectedGroups:[]}}),{onNodeSelect:function(e,t){var n=e.selectedLayers,r=void 0===n?[]:n,i=e.selectedGroups,c=void 0===i?[]:i,u=t.map,s=void 0===u?{}:u;return function(e,t,n){return{selectedLayers:"group"===t?o()(c,(function(t){return t===e}))>=0?r.filter((function(t){return o()(l(e,s),(function(e){return e===t}))<0})):n?[].concat(a(r),a(l(e,s))):a(l(e,s)):o()(r,(function(t){return t===e}))>=0?r.filter((function(t){return t!==e})):n?[].concat(a(r),[e]):[e],selectedGroups:"group"===t?o()(c,(function(t){return t===e}))>=0?c.filter((function(t){return t!==e})):n?[].concat(a(c),[e]):[e]:n?c:[]}}}}),(0,i.withProps)((function(e){var t=e.selectedLayers,n=e.selectedGroups;return{selectedNodes:[].concat(a(t),a(n))}})))},117802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(867076),o=n(624262);const i=(0,r.withProps)((function(e){var t,n,r,i=e.map;return{nodes:(t=(0,o.DN)(i),n=t.layers,r=void 0===n?{}:n,(0,o.C1)(r.flat||[],r.groups||[]).groups)}}))},651768:(e,t,n)=>{"use strict";n.d(t,{Z:()=>X});var r=n(227361),o=n.n(r),i=n(867076),a=n(624262),c=n(979105),l=n(487427),u=n(518842),s=n(363209),f=n(630998),p=n.n(f),d=n(423482),y=n.n(d),m=n(124852),b=n.n(m),v=n(480681),g=n(743129),h=n(38560),O=n(805346);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function j(e,t,n){return t=E(t),function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}(e,P()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function I(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:String(t)}var k=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return I(T(e=j(this,t,[].concat(r))),"renderLegend",(function(){return null})),I(T(e),"renderItemLabel",(function(e){return b().createElement("div",null,b().createElement("div",{key:"item-title"},e.title||e.name),b().createElement("div",null,b().createElement("small",{className:"text-muted",key:"item-key-description"},e.name)))})),I(T(e),"renderError",(function(){return e.props.element&&e.props.element.capabilities&&e.props.element&&e.props.element.capabilities.error?b().createElement(v.Alert,{bsStyle:"danger"},b().createElement(O.Z,{msgId:"layerProperties.styleListLoadError"})):null})),I(T(e),"updateEntry",(function(t,n){var r=n.target.value;e.props.onChange(t,r)})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=[{label:"Default Style",value:""}].concat((this.props.element.availableStyles||[]).map((function(t){return{label:e.renderItemLabel(t),value:t.name}})));return(this.props.element.style&&this.props.element.availableStyles&&p()(this.props.element.availableStyles,(function(t){return t.name===e.props.element.style})))>=0||!this.props.element.style||t.push({label:this.props.element.style,value:this.props.element.style}),b().createElement(v.Grid,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},b().createElement("form",{ref:"style"},b().createElement(g.ZP.Creatable,{key:"styles-dropdown",options:t,isLoading:this.props.element&&this.props.element.capabilitiesLoading,value:this.props.element.style||"",onOpen:function(){!e.props.element||e.props.element.capabilities&&e.props.element.availableStyles||e.props.retrieveLayerData(e.props.element)},promptTextCreator:function(e){return b().createElement(O.Z,{msgId:"layerProperties.styleCustom",msgParams:{value:e}})},onChange:function(t){e.updateEntry("style",{target:{value:t&&t.value||""}})}}),b().createElement("br",null),this.renderLegend(),this.renderError(),b().createElement(h.Z,{bsStyle:"primary",style:{float:"right"},onClick:function(){return e.props.retrieveLayerData(e.props.element)}},b().createElement(v.Glyphicon,{glyph:"refresh"})," ",b().createElement(O.Z,{msgId:"layerProperties.stylesRefreshList"})),b().createElement("br",null)))}}])&&S(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(b().Component);I(k,"propTypes",{retrieveLayerData:y().func,onChange:y().func,element:y().object,groups:y().array}),I(k,"defaultProps",{element:{},retrieveLayerData:function(){},onChange:function(){}});const x=k;var D=n(803307),M=n(117802),R=n(49977),L=n.n(R),N=n(680833);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Z(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const U=(0,i.mapPropsStream)((function(e){var t=(0,i.createEventHandler)(),n=t.stream,r=t.handler;return e.pluck("element").distinctUntilChanged((function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id===e.id})).switchMap((function(){return n.switchMap((function(e){return(0,N.kB)(e).map((function(e){return{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}})).startWith({capabilitiesLoading:!0})})).catch((function(e){return L().Observable.of({capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:e},description:null})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return F(F({},t),{},{retrieveLayerData:r,element:F(F({},t.element),e)})}))}));var G=n(666379),W=n.n(G);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}var z=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;for(var o in t)null!==t[o]&&"object"===_(t[o])&&(W()(t[o],n)&&r.apply(void 0,[t[o]]),e(t[o],n,r))};const V=(0,i.withProps)((function(e){var t=e.nodes,n=void 0===t?{}:t,r=e.editNode,o={};return r&&z(n,{id:r},(function(e){o=e})),{selectedNode:o}}));function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==q(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=U(x),$=(0,i.withProps)((function(e){return{tabs:e.tabs||[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:s.Z},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:e.settings&&"layers"===e.settings.nodeType,Component:u.Z},{id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:e.settings&&"layers"===e.settings.nodeType&&e.element&&"wms"===e.element.type,Component:Q}]}}));const X=(0,i.compose)(M.Z,V,(0,i.withState)("settings","onUpdateSettings",{}),(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{}:t,r=e.selectedNode,i=e.settings,c=void 0===i?{}:i;return{element:r,settings:Y(Y({},c),{},{nodeType:r&&r.nodes?"groups":"layers",options:{opacity:c.opacity>=0?c.opacity:r.opacity>=0?r.opacity:1}}),groups:o()((0,a.DN)(n),"layers.groups")}})),(0,i.compose)(D.Z,(0,i.withHandlers)({onUpdateNode:function(e){var t=e.changeLayerProperty,n=void 0===t?function(){}:t,r=e.changeGroupProperty,o=void 0===r?function(){}:r,i=e.editNode;return function(e,t,r){"layers"===t&&Object.keys(r).map((function(e){return n(i,e,r[e])})),"groups"===t&&Object.keys(r).map((function(e){return o(i,e,r[e])}))}}}),(0,i.withHandlers)({onUpdateParams:function(e){var t=e.settings,n=void 0===t?{}:t,r=e.onUpdateNode,o=void 0===r?function(){}:r;return function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&o(n.node,n.nodeType,Y(Y({},n.props),e))}}})),l.kZ,(0,c.Z)("activeTab","setActiveTab","general"),$)},202576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(124852),o=n.n(r),i=n(180307),a=n.n(i),c=n(423482),l=n.n(c),u=n(480681),s=n(352595),f=n(950966);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function y(e,t,n){return t=b(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,(r=[{key:"renderPopover",value:function(){return o().createElement(u.Popover,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title},this.props.text)}},{key:"renderContent",value:function(){var e=this;return o().createElement(u.Glyphicon,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return o().createElement("span",{className:"mapstore-info-popover"},this.props.trigger?o().createElement(f.Z,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),o().createElement(s.Z,{placement:this.props.placement,show:!0,target:function(){return a().findDOMNode(e.target)}},this.renderPopover())])}}])&&d(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o().Component);g(O,"propTypes",{id:l().string,title:l().string,text:l().string,glyph:l().string,bsStyle:l().string,placement:l().string,left:l().number,top:l().number,trigger:l().oneOfType([l().array,l().bool])}),g(O,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]});const w=O},589919:(e,t,n)=>{"use strict";n.d(t,{hP:()=>u});var r=n(984596),o=n.n(r),i=n(49977),a=n.n(i);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,function(e){if(Array.isArray(e))return c(e)}(t=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},u=function(e,t,n){return function(r){return(n?l(r,o()(e)).catch(n):l(r,o()(e))).concat(a().Observable.from(o()(t)))}}},680833:(e,t,n)=>{"use strict";n.d(t,{kB:()=>b,HI:()=>v});var r=n(472500),o=n.n(r),i=(n(91175),n(490173)),a=n(49977),c=n(501157),l=n(375875),u=n.n(l),s=(n(986267),n(624262)),f=n(510284),p=n(233044);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==d(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}i.default;var b=function(e){return a.Observable.defer((function(){return c.ZP.getCapabilities((0,s.Fh)(e))})).let(f.oB).map((function(t){return c.ZP.parseLayerCapabilities(t,e)}))},v=function(e){return function(e){return a.Observable.defer((function(){return u().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.search,r=void 0===n?{}:n,i=e.url,a=o().parse(r.url||i,!0);return o().format(m(m({},a),{},{search:void 0,query:m(m({},a.query),{},{service:"WMS",version:"1.1.1",layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(f.oB)}(e).map((function(e){var t=e.data,n=void 0===t?{}:t;return n&&n.layerDescriptions[0]})).map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return m(m({},e),{},{params:{},search:t?{type:"wfs",url:(0,p.cleanAuthParamsFromURL)(t)}:void 0})}))}},505567:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>nc});var r={};n.r(r),n.d(r,{cleanUpEmptyStoryContainers:()=>ve,closeShareOnGeostoryChangeMode:()=>Se,editMediaForBackgroundEpic:()=>ye,editWebPageComponent:()=>fe,exportGeostory:()=>Ie,handlePendingGeoStoryChanges:()=>je,hideCarouselItemsOnUpdateCurrentPage:()=>Oe,importGeostory:()=>Ae,inlineEditorEditMap:()=>we,loadGeostoryEpic:()=>me,loadStoryOnHistoryPop:()=>Te,openMediaEditorForNewMedia:()=>le,openWebPageComponentCreator:()=>se,reloadGeoStoryOnLoginLogout:()=>be,saveGeoStoryResource:()=>pe,scrollOnLoad:()=>Ee,scrollSideBar:()=>Ce,scrollToContentEpic:()=>de,setFocusOnMapEditing:()=>he,sortContentEpic:()=>ge,urlUpdateOnScroll:()=>Pe});var o=n(124852),i=n.n(o),a=n(171703),c=n(22222),l=n(375933),u=n.n(l),s=n(322843),f=n(192579),p=n(86638),d=n(531398),y=n(134990),m=n(93848),b=n(49977),v=n(91175),g=n.n(v),h=n(807654),O=n.n(h),w=n(747037),S=n.n(w),j=n(414293),P=n.n(j),E=n(595825),T=n.n(E),C=n(158748),I=n.n(C),A=n(227361),k=n.n(A),x=n(701469),D=n.n(x),M=n(441609),R=n.n(M),L=n(275982),N=n(423570),Z=n.n(N),B=n(375875),F=n.n(B),U=n(291312),G=n(782904),W=n(197395),_=n(263516),z=n(274621),V=n(866113),q=n(107501),H=n(589919),Y=n(989077),Q=n(727693),$=n(282385);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}var K=["status","statusText","data","message"],J=["data","isStatic"];function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==X(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function oe(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e,t,n){return function(r){return r.ofType(m.AQ).switchMap((function(r){var o=r.resource,i=void 0===o?{}:o,a=[],c=e.getState(),l=(0,q.hb)(c),u=(0,q.IQ)(c),s=g()((0,V.jq)(c).filter((function(e){return e.data&&(u!==Q.r.GEOSTORY&&e.data.id||e.id)===i.id}))),p=i.id;s?p=s.id:R()(i)?a=[].concat(oe(a),[(0,y.Od)("".concat(t)),(0,m.Cp)()]):(p=i.id||Z()(),a=[].concat(oe(a),[(0,y.rp)(p,l,i.data?i.data:i)]));var d=l===f.Tr.MAP?{resourceId:p,type:l,map:void 0}:{resourceId:p,type:l},v=[(0,y.Vx)("".concat(t),d,"merge")];return n===f.ID.CAROUSEL&&v.push((0,y.Vx)("".concat(t,".map"),{mapInfoControl:!0},"merge")),a=[].concat(oe(a),v,[(0,m.Cp)()]),b.Observable.from(a)}))}},le=function(e,t){return e.ofType(y.D7).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===f.bT.MEDIA||(0,f.lt)(n)})).switchMap((function(n){var r=n.path,o=n.element,i="";(0,f.lt)(o)&&"sections"===r&&(i=".contents[0].contents[0]");var a="".concat(r,'[{"id":"').concat(o.id,'"}]').concat(i),c=(0,V.X6)(t.getState());return b.Observable.of((0,m.$Z)("geostory",c)).merge(e.let(ce(t,a)),e.ofType(m.B8).switchMap((function(){return b.Observable.of((0,y.Od)(a))})).takeUntil(e.ofType(y.wb))).takeUntil(e.ofType(m.wd))}))},ue=function(e){return function(t){return t.ofType(y.Hb).switchMap((function(t){var n=t.src;return b.Observable.of((0,y.Vx)("".concat(e),{src:n,editURL:!1},"merge"))}))}},se=function(e){return e.ofType(y.D7).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===f.bT.WEBPAGE&&!1!==n.editURL||(0,f.NC)(n)})).switchMap((function(t){var n=t.path,r=t.element,o="";(0,f.NC)(r)&&"sections"===n&&(o=".contents[0].contents[0]");var i="".concat(n,'[{"id":"').concat(r.id,'"}]').concat(o);return b.Observable.of((0,y.Vx)(i,{editURL:!0},"merge")).merge(e.let(ue(i))).takeUntil(e.ofType(y.cc))}))},fe=function(e){return e.ofType(y.cc).switchMap((function(t){var n=t.path;return b.Observable.of((0,y.Vx)(n,{editURL:!0},"merge")).merge(e.let(ue(n))).takeUntil(e.ofType(y.D7))}))},pe=function(e){return e.ofType(y.LE).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resource,n=e.delay,r=void 0===n?1e3:n;return(t.id?(0,U.id)(t):(0,U.SN)(t)).switchMap((function(e){return b.Observable.of((0,y.GD)(e),(0,y.g5)(f.ZX.SHOW_SAVE,!1),t.id?(0,y.wJ)(e):(0,L.VF)("/geostory/".concat(e))).merge(b.Observable.of((0,W.$Z)({id:"STORY_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(t.id?0:r))})).let((0,H.hP)((0,y.YP)(!0,"loading"),(0,y.YP)(!1,"loading"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n=e.statusText,r=e.data,o=e.message,i=re(e,K);return b.Observable.of((0,y.y6)(t?{status:t,statusText:n,data:r}:o||i),(0,y.YP)(!1,"loading"))}))}))},de=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,n=void 0===t?function(){}:t;return e.ofType(y.D7).switchMap((function(e){var t=e.path,r=e.element;return b.Observable.of(r).switchMap((function(){if(document.getElementById(r.id)){var e=(0,f.u0)(t).sectionId,o=(0,V.I0)(e)(n())?e:r.id;return(0,f.M1)(o,{behavior:"auto",block:"center"}),b.Observable.empty()}throw new Error("Item not mounted yet")})).retryWhen((function(e){return e.delay(200).take(10)}))}))},ye=function(e,t){return e.ofType(m.wd).switchMap((function(n){var r=n.path,o=n.owner,i=n.sectionType,a=(0,V.vv)(r)(t.getState()),c=(0,V.Tr)(a)(t.getState());return b.Observable.of((0,q.hb)(t.getState())).filter((function(e){return c&&c.type!==e})).map((function(){return(0,m.y5)(c.type)})).merge(b.Observable.of((0,m.$Z)(o,(0,V.X6)(t.getState())),(0,m.Gh)(a),(0,m.Tk)(i===f.ID.CAROUSEL?["image","video"]:[])).merge(e.let(ce(t,r,i)).takeUntil(e.ofType(m.B8,y.D7))))}))},me=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.XH).switchMap((function(e){var t=e.id;return b.Observable.defer((function(){return t&&O()(parseInt(t,10))?F().get("configs/".concat(t,".json")).then((function(e){var t=e.data,n=t.sections,r=D()(n)&&n.map((function(e){return ne(ne({},e),{},{id:Z()()})}));return{data:r.length?ne(ne({},t),{},{sections:r}):t,isStatic:!0,canEdit:!0}})):(0,U.RX)(t)})).do((function(e){if(!e.data)throw Error("Wrong data format");return!0})).switchMap((function(e){var n=e.data,o=e.isStatic,i=void 0!==o&&o,a=re(e,J),c=r(),l=(0,z.qg)(c),u=(0,z.jl)(c),s=S()(n)?JSON.parse(n):n;if(!u&&O()(parseInt(t,10)))return b.Observable.of((0,y.Ct)({status:403}));var p=(0,V.eK)(c)===f.nl.EDIT;return b.Observable.from([].concat(oe(i||p?[(0,y.D_)(a&&a.canEdit||l)]:[]),[(0,y.OS)(t),(0,y.K0)(s),(0,y.DF)(a)]))})).let((0,H.hP)((0,y.YP)(!0,"loading"),(0,y.YP)(!1,"loading"),(function(e){var t=(0,f.of)(),n=t+".errors.loading.unknownError";return 403===e.status?(n=t+".errors.loading.pleaseLogin",((0,z.jl)(r())||(0,V.JM)(r()))&&(n=t+".errors.loading.geostoryNotAccessible")):404===e.status?n=t+".errors.loading.geostoryDoesNotExist":P()(e.status)&&(n=e.message),b.Observable.of((0,W.vU)({title:t+".errors.loading.title",message:n}),(0,y.K0)({}),(0,y.Ct)(ne(ne({},e),{},{messageId:n})))}))).startWith((0,y.K0)({}))}))},be=function(e){return e.ofType(y.XH).switchMap((function(t){var n=t.id;return e.ofType(_.XP,_.Nv).switchMap((function(){return b.Observable.of((0,y.wJ)(n)).delay(500)})).takeUntil(e.ofType(L.nk))}))},ve=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.Dq).switchMap((function(e){var t=e.path,n=(0,f.Ll)(t,(0,V.Kg)(r())),o=T()(n,"contents");if(o>0){var i=n.splice(0,o),a=(0,V.$F)(i.join("."))(r());if(a&&a.contents&&0===a.contents.length)return b.Observable.of((0,y.Od)(i.join(".")))}return b.Observable.empty()}))},ge=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.tP).switchMap((function(e){var t=e.source,n=e.target,o=e.position,i=r(),a=(0,V.$F)(t)(i);return b.Observable.from([(0,y.Od)(t),(0,y.IH)(n,o,a)])}))},he=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.wb).filter((function(e){var t=e.path;return(void 0===t?"":t).endsWith("editMap")})).switchMap((function(e){var t=e.path,n=e.element,o=(0,f.ln)(t,(0,V.Kg)(r())),i=o.flatPath,a=o.path,c=1===i.length,l=c?i[0]:i.pop(),u=c?i[0]:i.shift(),s="background"===a[a.length-2],p=s&&"#".concat(u.id," .ms-section-background-container")||"#".concat(l.id);return(0,f.M1)(l.id),b.Observable.from([(0,y.$A)(n,l,p,s,t.replace(".editMap",""))])}))},Oe=function(e,t){var n=t.getState;return e.ofType(y.wb).filter((function(e){var t=e.path,n=e.element;return t&&t.endsWith("carouselToggle")&&n})).switchMap((function(e){var t=e.path,r=(0,f.u0)(t)||{},o=r.sectionId,i=r.contentId,a=(0,V.eB)(o)(n())||[];return i&&!R()(a)?b.Observable.from([(0,y.fD)(o,i)]).concat(b.Observable.of((0,y.Vx)(t,!1))):b.Observable.empty()}))},we=function(e,t){var n=t.getState;return e.ofType($.nr).filter((function(e){var t=e.owner,n=e.map;return"inlineEditor"===t&&!!n})).switchMap((function(){return e.ofType($.LE).switchMap((function(t){var r=t.map,o=(0,V.FW)(n()).path;return b.Observable.of((0,y.Vx)("".concat(o,".map"),r,"merge"),(0,y.Vx)("".concat(o,".editMap"),!1),(0,$.Cp)()).takeUntil(e.ofType($.B8))}))}))},Se=function(e){return e.ofType(y.vb).switchMap((function(){return b.Observable.of((0,G.Xg)("share","enabled",!1))}))},je=function(e){return b.Observable.merge(e.ofType(y.XH).switchMap((function(){return e.ofType(y.Zf)}))).switchMap((function(){return e.ofType(y.D7,y.wb,y.Dq,y.mN,y.QK,y.km).take(1).switchMap((function(){return b.Observable.of((0,y.c0)(!0)).concat(e.ofType(y.si,L.nk,_.Nv).take(1).switchMap((function(){return b.Observable.of((0,y.c0)(!1))})))}))}))},Pe=function(e,t){var n=t.getState;return e.ofType(y.un).let(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(r){return r.withLatestFrom(e.startWith(t)).filter((function(e){var t=ee(e,2)[1];return n(t)})).map((function(e){return ee(e,1)[0]}))}}(e.ofType(y.Gx).map((function(e){return!e.status})).startWith(!0))).debounceTime(50).switchMap((function(e){var t=e.sectionId,r=e.columnId;if("edit"!==(0,V.eK)(n())&&(r||t)&&(0,V.bU)(n())){var o,i,a=k()(n(),"geostory.resource.id"),c=(0,f.NP)(window.location.href,null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.hash,a,t,r);c&&history.pushState(null,"",c)}return b.Observable.empty()}))},Ee=function(e){return e.ofType(y.ij).switchMap((function(e){var t,n,r,o=e.delay,i=void 0===o?2e3:o,a=null===(t=window)||void 0===t||null===(n=t.location)||void 0===n||null===(r=n.hash)||void 0===r?void 0:r.split("/");return b.Observable.of(a).do((function(){var e,t,n;null!==(e=window)&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(n=t.hash)&&void 0!==n&&n.includes("shared")?(0,f.M1)(a[7]||a[5],{block:"start",behavior:"auto"}):a.length>5?(0,f.M1)(a[6],{block:"start",behavior:"auto"}):5===a.length&&(0,f.M1)(a[4],{block:"start",behavior:"auto"})})).ignoreElements().startWith((0,y.WE)(!0)).concat(b.Observable.of((0,y.WE)(!1)).delay(i))}))},Te=function(e){return e.ofType(L.nk).switchMap((function(e){var t,n=e.payload;if((null==n||null===(t=n.location)||void 0===t?void 0:t.pathname.includes("/geostory/"))&&"POP"===n.action&&!n.isFirstRendering){var r,o=I()(null==n||null===(r=n.location)||void 0===r?void 0:r.pathname);return o.find((function(e){return"shared"===e}))?b.Observable.of((0,y.wJ)(o[2])).delay(500):b.Observable.of((0,y.wJ)(o[1])).delay(500)}return b.Observable.empty()}))},Ce=function(e,t){var n=t.getState;return e.ofType(y.un).filter((function(e){var t=e.columnId,r=e.sectionId;return!("edit"!==(0,V.eK)(n())||!t&&!r)})).debounceTime(50).switchMap((function(){return b.Observable.of(Array.from(document.querySelectorAll(".ms-geostory-builder .mapstore-side-card.ms-highlight")).pop()).filter((function(e){return!!e})).withLatestFrom(b.Observable.of(document.querySelector(".ms-geostory-builder .ms2-border-layout-body")).filter((function(e){return!!e}))).map((function(e){var t=ee(e,2),n=t[0],r=t[1];return function(){var e=n.getBoundingClientRect(),t=e.top,o=e.bottom,i=r.getBoundingClientRect(),a=i.top,c=i.bottom;t<a?r.scrollBy({top:t-a-10,behavior:"smooth"}):o>c&&r.scrollBy({top:o-c+10,behavior:"smooth"})}})).do((function(e){return window.requestAnimationFrame(e)})).ignoreElements()}))},Ie=function(e){return e.ofType(y.U3).switchMap((function(e){var t=e.data,n=e.fileName;return b.Observable.of([JSON.stringify(ne({},t)),n,"application/json"]).do((function(e){return Y.LR.apply(void 0,oe(e))})).map((function(){return(0,y.g5)("export",!1)}))}))},Ae=function(e){return e.ofType(y.aF).switchMap((function(e){var t=e.file;return b.Observable.defer((function(){return(0,Y.zr)(t[0]).then((function(e){return e}))})).switchMap((function(e){return b.Observable.of((0,y.K0)(e),(0,y.g5)("import",!1))})).catch((function(e){return b.Observable.of((0,W.vU)({title:"dashboard.errors.loading.title"}),(0,y.Ct)(ne({},e)))}))}))},ke=n(308316),xe=n(166190),De=n(965539),Me=n(496259),Re=n(867076),Le=n(828878);function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ne(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(0,Re.setObservableConfig)(Le.Z);var Ue=(0,Re.compose)((0,Re.mapPropsStream)((function(e){var t=(0,Re.createEventHandler)(),n=t.handler,r=t.stream,o="EMPTY",i="EMPTY";return b.Observable.combineLatest(e,r.filter((function(e){var t=e.columnId,n=e.sectionId;return t&&o!==t?(o=t,!0):!(!n||i===n||(i=n,0))})).withLatestFrom(e.pluck("updateCurrentPage")).do((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return i&&i(o)})).ignoreElements().startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Be(Be({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return Be(Be({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{updateCurrentPage:n})}))}))),Ge=n(982030),We=n(322762),_e=n.n(We);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){var r;return r=function(e,t){if("object"!=ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ze(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Re.setObservableConfig)(Le.Z);const Ye=(0,Re.compose)((0,Re.mapPropsStream)((function(e){var t=(0,Re.createEventHandler)(),n=t.handler,r=t.stream;return b.Observable.combineLatest(e,function(e,t){return t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{interceptorTime:e.interceptorTime,updateCurrentPage:e.updateCurrentPage}})).distinctUntilKeyChanged("interceptorTime").switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.interceptorTime,r=void 0===n?100:n,o=t.updateCurrentPage;return e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return qe(qe({},e),{},He({},n,{visible:r,entry:o}))}),{}).debounceTime(r).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _e()(Object.keys(e),(function(t){return e[t].visible?k()(e[t],"entry.boundingClientRect.top"):1/0}))})).do((function(e){o&&o({sectionId:e})})).ignoreElements()}))}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return qe(qe({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return qe(qe({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{onVisibilityChange:n})}))})));var Qe=n(423482),$e=n.n(Qe),Xe=n(218291),Ke=n(882017),Je=n(807472),et=n(480681);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}var nt=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rt.apply(this,arguments)}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==tt(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const at=function(e){var t=e.show,n=e.style,r=void 0===n?{}:n,o=e.modal,a=e.draggable,c=void 0!==a&&a,l=e.closeGlyph,u=void 0===l?"1-close":l,s=e.closable,f=void 0===s||s,p=e.onClose,d=void 0===p?function(){}:p,y=e.title,m=e.header,b=e.footer,v=e.children,g=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,nt);return t?i().createElement(Je.Z,rt({modal:o,onClickOut:f&&o?function(){return d()}:null,style:it(it({},r),{},{display:t?"block":"none"}),draggable:c},g),i().createElement("span",{role:"header"},y||m||i().createElement("span",null," "),f?i().createElement("button",{onClick:function(){return d()},className:"settings-panel-close close"},i().createElement(et.Glyphicon,{glyph:u})):null),i().createElement("span",{role:"body"},v),b?i().createElement("span",{role:"footer"},b):null):null};var ct=n(38560),lt=n(805346),ut=n(399534),st=(0,Re.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.viewHeight,o=e.size;return!n||!r||!o}),(0,Ge.Z)((function(){return!0}),(function(){return{glyph:"code"}})));const ft=(0,Re.compose)(st)((function(e){var t=e.src,n=e.size,r=e.viewHeight;return i().createElement("div",{className:"ms-webpage-wrapper"},i().createElement("iframe",{src:t,height:"".concat((0,f.t4)(n,r),"px")}))}));var pt=n(611847),dt=n(737275),yt=n(748759),mt=n(23279),bt=n.n(mt);function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==vt(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wt=function(e){var t,n,r=e.id,a=e.onLoad,c=e.loading,l=e.debounceTime,u=e.children,s=e.loaderComponent,f=e.loaderStyle,p=(t=(0,yt.YD)(),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=p[0],y=p[1],m=(0,o.useRef)(null),b=s;return(0,o.useEffect)((function(){return m.current=bt()((function(e){a(e)}),l),function(){m.current.cancel()}}),[]),(0,o.useEffect)((function(){y&&c&&m.current(r),!y&&c&&m.current.cancel()}),[y,c,r]),i().createElement("div",{ref:d,className:"ms-visibility-container"},c?b?i().createElement(b,{style:ht({},f)}):null:(0,o.cloneElement)(u,{inView:y}))};wt.propTypes={id:$e().string,debounceTime:$e().number,loading:$e().bool,onLoad:$e().func,loaderComponent:$e().oneOfType([$e().element,$e().func])},wt.defaultProps={id:"",debounceTime:300,loading:!0,onLoad:function(){},loaderComponent:null};const St=wt;var jt=n(532425);function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dt(r.key),r)}}function Tt(e,t,n){return t=It(t),function(e,t){if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return At(e)}(e,Ct()?Reflect.construct(t,n||[],It(e).constructor):t.apply(e,n))}function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ct=function(){return!!e})()}function It(e){return It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},It(e)}function At(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}function xt(e,t,n){return(t=Dt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e){var t=function(e,t){if("object"!=Pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pt(t)?t:String(t)}var Mt=function(){return i().createElement("div",{className:"ms-media-loader"},i().createElement(jt.Z,{size:52}))},Rt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return xt(At(e=Tt(this,t,[].concat(r))),"state",{url:e.props.src||"",error:!1,loading:!0}),xt(At(e),"updateURL",(function(t){var n=t.target.value;e.setState({url:n})})),xt(At(e),"save",(function(){var t=e.state.url,n=!(0,pt.K2)(t,(0,dt.u8)("GeoStoryValidIframeURLRegex"));e.setState({error:n}),n||e.props.onChange(t)})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.editURL,o=this.state,a=o.url,c=o.error;return i().createElement(i().Fragment,null,i().createElement(ut.Z,null,i().createElement(at,{modal:!0,show:r,onClickOut:function(e){return e.preventDefault()&&e.stopPropagation()},title:i().createElement(lt.Z,{msgId:"geostory.webPageCreator.title"}),onClose:n,id:"web-page-creator",footer:i().createElement(ct.Z,{bsSize:"small",onClick:this.save},i().createElement(lt.Z,{msgId:"geostory.webPageCreator.saveButton"}))},c&&i().createElement("div",{className:"dropzone-errorBox alert-danger"},i().createElement(lt.Z,{msgId:"geostory.webPageCreator.error"})),i().createElement(et.FormGroup,{controlId:"WEBPAGE_URL",validationState:c&&"error"},i().createElement(et.ControlLabel,null,i().createElement(lt.Z,{msgId:"geostory.webPageCreator.url.label"})),i().createElement(et.FormControl,{label:"URL",type:"text",value:a,onChange:this.updateURL,required:!0})))),this.props.lazy?i().createElement(St,{key:this.props.id,id:this.props.id,debounceTime:this.props.debounceTime,loading:this.state.loading,onLoad:function(){return e.setState({loading:!1})},loaderComponent:Mt},i().createElement(ft,this.props)):i().createElement(ft,this.props))}}])&&Et(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(i().PureComponent);xt(Rt,"propTypes",{editURL:$e().bool,onClose:$e().func,onChange:$e().func,src:$e().string,id:$e().string,debounceTime:$e().number,lazy:$e().bool}),xt(Rt,"defaultProps",{lazy:!0});var Lt=(0,Re.compose)((0,Re.withHandlers)({onClose:function(e){var t=e.update,n=void 0===t?function(){}:t;return function(){return n("editURL",!1,"merge")}}}))(Rt);const Nt=(0,a.connect)(null,{onChange:y.YM})(Lt);var Zt=["type"];function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bt.apply(this,arguments)}var Ft=(0,Xe.Z)()((0,o.lazy)((function(){return Promise.all([n.e(82515),n.e(25403)]).then(n.bind(n,525403))}))),Ut=function(e){var t=e.type;return i().createElement("div",{className:"ms-content ms-content-unknown"},'warning: unknown content type "'.concat(t,'"'))};const Gt=function(e){var t=e.type,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Zt),r=function(e){switch(e){case f.bT.TEXT:return Ft;case f.bT.MEDIA:case f.Tr.IMAGE:case f.Tr.MAP:case f.Tr.VIDEO:return Ke.ZP;case f.bT.WEBPAGE:return Nt;default:return Ut}}(t);return i().createElement(r,Bt({type:t},n))};var Wt=n(725288),_t=n(80717),zt=["onClick"];function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){Jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,en(r.key),r)}}function Qt(e,t,n){return t=Xt(t),function(e,t){if(t&&("object"===Vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$t()?Reflect.construct(t,n||[],Xt(e).constructor):t.apply(e,n))}function $t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($t=function(){return!!e})()}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function Kt(e,t){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kt(e,t)}function Jt(e,t,n){return(t=en(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e){var t=function(e,t){if("object"!=Vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vt(t)?t:String(t)}var tn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qt(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kt(e,t)}(t,e),n=t,r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.trigger||e.containerWidth===this.props.containerWidth&&e.containerHeight===this.props.containerHeight||this.trigger.hide()}},{key:"render",value:function(){var e=this;return i().createElement(Wt.Z,{className:"add-bar",popoverClassName:"add-bar-popover",content:i().createElement(_t.Z,{btnDefaultProps:{className:"square-button btn-tray"},buttons:this.props.buttons.map((function(t){var n=t.onClick,r=void 0===n?function(){}:n;return Ht(Ht({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,zt)),{},{onClick:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];r.apply(void 0,n),e.trigger.hide(),n[0]&&n[0].preventDefault&&n[0].preventDefault()}})}))}),ref:function(t){t&&(e.trigger=t.trigger)},placement:"top"},i().createElement(ct.Z,{className:this.props.addButtonClassName},i().createElement(et.Glyphicon,{glyph:"plus"})))}}],r&&Yt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(i().Component);Jt(tn,"propTypes",{id:$e().string,type:$e().string,buttons:$e().array,containerWidth:$e().oneOfType([$e().number,$e().string]),containerHeight:$e().oneOfType([$e().number,$e().string]),addButtonClassName:$e().string}),Jt(tn,"defaultProps",{id:"",type:"",buttons:[],containerWidth:0,containerHeight:0,addButtonClassName:""});const nn=tn;function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}var on=["id"];function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=rn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==rn(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(){return un=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},un.apply(this,arguments)}const sn=function(e){var t=e.viewWidth,n=e.viewHeight,r=e.className,o=e.contentProps,a=void 0===o?{}:o,c=e.addButtons,l=void 0===c?[]:c,u=e.tools,s=void 0===u?[]:u,p=e.contents,d=void 0===p?[]:p,y=e.ContentComponent,m=void 0===y?Gt:y,b=e.mode,v=e.sectionType,g=e.editMedia,h=void 0===g?function(){}:g,O=e.editWebPage,w=void 0===O?function(){}:O,S=e.add,j=void 0===S?function(){}:S,P=e.update,E=void 0===P?function(){}:P,T=e.remove,C=void 0===T?function(){}:T,I=e.bubblingTextEditing,A=void 0===I?function(){}:I,k=e.storyTheme,x=e.sections,D=void 0===x?[]:x,M=e.storyFonts,R=e.innerRef;return i().createElement("div",{ref:R,className:r},d.reduce((function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,c=o.id,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(o,on),p=[i().createElement(m,un({id:c,key:"".concat(c,"-content"),mode:b,viewWidth:t,sectionType:v,viewHeight:n,editMedia:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return h.apply(void 0,[{path:'contents[{"id": "'.concat(c,'"}]')+n}].concat(o))},editWebPage:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return w.apply(void 0,[{path:'contents[{"id": "'.concat(c,'"}]')+n}].concat(o))},add:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return j.apply(void 0,['contents[{"id": "'.concat(c,'"}].')+e].concat(n))},update:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return E.apply(void 0,['contents[{"id": "'.concat(c,'"}].')+e].concat(n))},remove:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return C.apply(void 0,['contents[{"id": "'.concat(c,'"}]')+(e?"."+e:"")].concat(n))}},a,u,{storyTheme:k,storyFonts:M,bubblingTextEditing:A,tools:s&&s[u.type],sections:D}))];return b===f.nl.EDIT&&l.length>0&&p.push(i().createElement(nn,{key:"".concat(c,"-content-add-buttons"),containerWidth:t,containerHeight:n,buttons:l.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ln(ln({},e),{},{onClick:function(){return j("contents",c,e.template)}})}))})),[].concat(function(e){if(Array.isArray(e))return an(e)}(e=r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p)}),[]))};n(966337);var fn=["onVisibilityChange","rootSelector"],pn=["intersectionObserverOptions","onVisibilityChange"];function dn(){return dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dn.apply(this,arguments)}function yn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const mn=function(e){return(0,Re.compose)((0,Re.withHandlers)({onVisibilityChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onVisibilityChange,r=void 0===n?function(){}:n;return function(e,n){return r({id:t,visible:e,entry:n})}}}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onVisibilityChange,n=(e.rootSelector,yn(e,fn));return function(e){return function(r){var o=r.intersectionObserverOptions,a=void 0===o?{}:o,c=r.onVisibilityChange,l=yn(r,pn),u=t||c;return i().createElement(yt.df,dn({},n,a,{onChange:u}),(function(t){var n=t.inView,r=t.ref,o=t.entry;return i().createElement(e,dn({},l,{inView:n,inViewRef:r,inViewEntry:o}))}))}}}(e))};var bn=n(90085),vn=n(212610),gn=n(313311),hn=n.n(gn),On=n(623560),wn=n.n(On),Sn=n(618446),jn=n.n(Sn);function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tn=(0,vn.Z)(et.DropdownButton);function Cn(e){var t=e.value,n=e.options,r=void 0===n?[]:n,a=e.onSelect,c=void 0===a?function(){}:a,l=e.glyph,u=void 0===l?"":l,s=e.tooltipId,f=e.pullRight,p=void 0!==f&&f,d=e.className,y=void 0===d?"square-button-md no-border":d,m=e.disabled,b=e.noTooltipWhenDisabled,v=void 0!==b&&b,g=e.hideMenuItem,h=void 0===g?function(){return!1}:g,O=e.shouldClose,w=e.showSelectionInTitle,S=void 0===w||w,j=Pn((0,o.useState)(!1),2),E=j[0],T=j[1],C=Pn((0,o.useState)(!1),2),I=C[0],A=C[1],k=(hn()(r,(function(e){return jn()(e.value,t)}))||{}).glyph;return(0,o.useEffect)((function(){m&&T(!1)}),[m]),i().createElement(Tn,{noCaret:!0,open:E,noTooltipWhenDisabled:v,tooltipId:s,pullRight:p,className:y,disabled:m,title:i().createElement(et.Glyphicon,{glyph:S&&k||u}),onToggle:function(e,n,r){return I||"select"===(null==r?void 0:r.source)||O&&!O(t,n)?null:T(e)}},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null==e?void 0:e.Component)||et.MenuItem;return h(t,e)?null:i().createElement(n,{key:e.value,selected:t,value:e.value,active:wn()(null==e?void 0:e.isActive)&&e.isActive(t)||!P()(t)&&t===e.value,onClick:null!=e&&e.Component?c:function(){return c(e.value)},onActive:function(e){return A(e)}},e.label)})))}var In=n(312122),An=n(911766),kn=n(513218),xn=n.n(kn);function Dn(e){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dn(e)}function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Dn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Dn(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ln(){return Ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ln.apply(this,arguments)}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zn=(0,In.Z)(bn.Z),Bn={primary:"btn-primary",default:"btn-default"},Fn=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,a=e.size,c=e.update,l=void 0===c?function(){}:c,u=e.filterOptions,s=e.pullRight,f=e.sizeType,p=function(e,t){var n,r,o="horizontal",i="",a=(n=e&&e.split(",")||[],r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nn(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],l=a[1],u=e,s="resize-horizontal";return t===o?(i="h-",u=c):"vertical"===t&&(i="v-",u=l,s="resize-vertical"),{sizeProp:function(e){return t?"".concat(t===o?e:c,",").concat("vertical"===t?e:l):e},pre:i,_size:u,glyph:s}}(a,f),d=p.pre,y=p._size,m=p.glyph,b=p.sizeProp;return i().createElement(Cn,Ln({value:y,noTooltipWhenDisabled:!0,disabled:n,glyph:m,pullRight:s||("right"===r||y==="".concat(d,"full")||y==="".concat(d,"large"))&&!o,tooltipId:"geostory.contentToolbar.contentSize",options:[{value:"".concat(d,"small"),glyph:"size-small",label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.smallSizeLabel"})},{value:"".concat(d,"medium"),glyph:"size-medium",label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.mediumSizeLabel"})},{value:"".concat(d,"large"),glyph:"size-large",label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.largeSizeLabel"})},{value:"".concat(d,"full"),glyph:"size-extra-large",label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.fullSizeLabel"})}].filter((function(e){return!u||u(e)})),onSelect:function(e){return l("size",b(e))}},f&&{showSelectionInTitle:!1}))},Un=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,a=e.size,c=e.update,l=void 0===c?function(){}:c;return i().createElement(Cn,{value:r,noTooltipWhenDisabled:!0,disabled:"full"===a||n,glyph:"align-center",pullRight:("right"===r||"full"===a||"large"===a)&&!o,tooltipId:"geostory.contentToolbar.contentAlign",options:[{value:"left",label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.leftAlignLabel"}),glyph:"align-left"},{value:"center",label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.centerAlignLabel"}),glyph:"align-center"},{value:"right",label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.rightAlignLabel"}),glyph:"align-right"}],onSelect:function(e){return l("align",e)}})},Gn=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.theme,o=e.storyTheme,a=e.align,c=e.sectionType,l=e.update,u=void 0===l?function(){}:l,s=e.themeProps,f=e.size;return i().createElement(Cn,{value:r,noTooltipWhenDisabled:!0,pullRight:("right"===a||"full"===f||"large"===f)&&!c,glyph:"dropper",tooltipId:"geostory.contentToolbar.contentTheme",disabled:n,shouldClose:function(e,t){var n,r;return xn()(e)&&"ms-color-picker-cover"!==(null==t||null===(n=t.target)||void 0===n||null===(r=n.getAttribute)||void 0===r?void 0:r.call(n,"class"))||S()(e)||void 0===e},hideMenuItem:function(e,t){return"custom"===(null==e?void 0:e.value)&&"custom"!==(null==t?void 0:t.value)},options:[{value:"",isActive:function(e){return void 0===e||""===e||xn()(e)&&(void 0===e.value||""===e.value)},label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.defaultThemeLabel"})},{value:"bright",isActive:function(e){return"bright"===(null==e?void 0:e.value)||"bright"===e},label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.brightThemeLabel"})},{value:"dark",isActive:function(e){return"dark"===(null==e?void 0:e.value)||"dark"===e},label:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.darkThemeLabel"})},{value:"custom",Component:function(e){return i().createElement(An.H,Ln({},e,{disableBackgroundAlpha:null==s?void 0:s.disableBackgroundAlpha,disableShadow:null==s?void 0:s.disableShadow,disableTextColor:null==s?void 0:s.disableTextColor,onUpdate:u,storyTheme:o}))}}],onSelect:function(e){return u("theme",Rn(Rn({},xn()(r)&&r),{},{value:e}))}})},Wn=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.forceDelBtnDisable,o=void 0!==r&&r,a=e.path,c=e.remove,l=void 0===c?function(){}:c,u=e.bsStyle;return i().createElement(Zn,{glyph:"trash",visible:!0,noTooltipWhenDisabled:!0,disabled:n||o,className:"".concat("square-button-md no-border"," ").concat(u&&Bn[u]),tooltipId:"geostory.contentToolbar.remove",confirmTitle:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.removeConfirmTitle"}),confirmContent:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.removeConfirmContent"}),onClick:function(){l(a)}})},_n=n(455877),zn=n.n(_n);function Vn(e){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(e)}var qn=["editMap","map","update"],Hn=["tools","children"];function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Vn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Vn(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $n(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Xn={size:function(e){return{renderButton:i().createElement(Fn,e)}},align:function(e){return{renderButton:i().createElement(Un,e)}},theme:function(e){return{renderButton:i().createElement(Gn,e)}},fit:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.fit,o=e.update,i=void 0===o?function(){}:o;return{value:r,glyph:"contain"===r?"fit-cover":"fit-contain",disabled:n,visible:!0,tooltipId:"contain"===r?"geostory.contentToolbar.cover":"geostory.contentToolbar.fit",onClick:function(){return i("fit","contain"===r?"cover":"contain")}}},cover:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.cover,o=e.updateSection,i=void 0===o?function(){}:o;return{value:r,glyph:r?"height-auto":"height-view",visible:!0,disabled:n,tooltipId:r?"geostory.contentToolbar.contentHeightAuto":"geostory.contentToolbar.contentHeightView",onClick:function(){return i({cover:!r},"merge")}}},editMedia:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.path,o=e.editMedia,i=void 0===o?function(){}:o,a=e.sectionType;return{glyph:"pencil","data-button":"pencil",visible:!0,disabled:n,tooltipId:"geostory.contentToolbar.editMedia",onClick:function(){i({path:r},r?a:"")}}},remove:function(e){return{renderButton:i().createElement(Wn,e)}},editMap:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.map,o=e.update,i=void 0===o?function(){}:o,a=$n(e,qn);return{glyph:"map-edit",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editMap",onClick:function(){var e=null!=r?r:a,t=e.center,o=e.zoom,c=e.resolution;i("editMap",!n),!n&&i("map",{center:t,zoom:o,mapStateSource:zn()(),resolution:c,resetPanAndZoom:!1},"merge")}}},editURL:function(e){var t=e.editURL,n=void 0!==t&&t,r=e.path,o=e.editWebPage,i=void 0===o?function(){}:o;return{glyph:"pencil",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editURL",onClick:function(){i({path:r})}}},muted:function(e){var t=e.update,n=e.muted;return{glyph:n?"muted":"audio",visible:!0,active:!n,tooltipId:n?"geostory.contentToolbar.enableAudio":"geostory.contentToolbar.disableAudio",onClick:function(){t("muted",!n)}}},autoplay:function(e){var t=e.update,n=e.autoplay;return{glyph:"play-circle",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableAutoplay":"geostory.contentToolbar.enableAutoplay",onClick:function(){t("autoplay",!n)}}},loop:function(e){var t=e.update,n=e.loop;return{glyph:"loop",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableLoop":"geostory.contentToolbar.enableLoop",onClick:function(){t("loop",!n)}}},showCaption:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.update,o=e.showCaption,i=e.caption,a=e.description;return{glyph:"caption",visible:!(!i&&!a),disabled:n,active:!(!o||n),tooltipId:o?"geostory.contentToolbar.hideCaption":"geostory.contentToolbar.showCaption",onClick:function(){r("showCaption",!o)}}},add:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.addDisabled,o=void 0!==r&&r,i=e.add,a=void 0===i?function(){}:i,c=e.bsStyle;return{glyph:"plus",visible:!0,bsStyle:void 0===c?"default":c,tooltipId:"geostory.contentToolbar.add",disabled:n||o,onClick:a}},edit:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.edit,o=void 0===r?function(){}:r,i=e.bsStyle;return{glyph:"pencil",visible:!0,bsStyle:void 0===i?"default":i,tooltipId:"geostory.contentToolbar.edit",disabled:n,onClick:o}},marker:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.markerDisabled,o=void 0!==r&&r,i=e.marker,a=void 0===i?function(){}:i,c=e.bsStyle;return{glyph:"map-marker",visible:!0,tooltipId:"geostory.contentToolbar.marker",bsStyle:void 0===c?"default":c,disabled:n||o,onClick:a}},closeDraw:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.bsStyle,o=void 0===r?"default":r,i=e.update,a=void 0===i?function(){}:i,c=e.onEnableDraw,l=void 0===c?function(){}:c;return{glyph:"1-close",visible:!0,tooltipId:"geostory.contentToolbar.closeMapEditing",bsStyle:o,disabled:!n,onClick:function(){l(null),a("editMap",!n)}}}};function Kn(e){var t=e.tools,n=void 0===t?[]:t,r=e.children,o=$n(e,Hn);return i().createElement("div",{className:"ms-content-toolbar"},i().createElement(_t.Z,{btnDefaultProps:{className:"square-button-md no-border",noTooltipWhenDisabled:!0},buttons:n.filter((function(e){return(null==e?void 0:e.id)&&Xn[e.id]||Xn[e]})).map((function(e){return(null==e?void 0:e.id)&&Xn[e.id](Qn(Qn({},o),e))||Xn[e](o)}))}),r)}function Jn(e){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(e)}var er=["id","inViewRef","innerRef","children","type","contentWrapperStyle","contentToolbar","mode"];function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Jn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Jn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Jn(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const rr=function(e){var t=e.id,n=e.inViewRef,r=e.innerRef,o=e.children,a=e.type,c=e.contentWrapperStyle,l=e.contentToolbar,u=e.mode,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,er),p=l||Kn;return i().createElement("div",{id:t,ref:n,style:nr(nr({},c),s.hideContent&&{display:"none"}),className:"ms-content ms-content-".concat(a).concat((0,f.w)(s))},i().createElement("div",{className:"ms-content-body",ref:r,style:(0,f.cy)(s)},u===f.nl.EDIT&&i().createElement(p,s),o))};function or(e){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(e)}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e,t,n){var r;return r=function(e,t){if("object"!=or(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==or(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cr=(0,Re.compose)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Re.nest.apply(void 0,t.concat([e]))}}(rr),(0,Re.setDisplayName)("ColumnContent"))(Gt),lr=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})};const ur=(0,Re.compose)((0,Re.branch)((function(e){var t=e.type,n=e.sectionType;return[f.ID.IMMERSIVE,f.ID.CAROUSEL].includes(n)&&t===f.bT.COLUMN}),mn({threshold:[0,.25,.5,.75]})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Re.nest.apply(void 0,t.concat([e]))}}(rr),(0,Re.setDisplayName)("SectionContent"),(0,Re.branch)((function(e){return e.type===f.bT.COLUMN}),(0,Re.renderComponent)((function(e){var t=e.viewWidth,n=e.viewHeight,r=e.contents,o=void 0===r?[]:r,a=e.mode,c=e.add,l=void 0===c?function(){}:c,u=e.editMedia,s=void 0===u?function(){}:u,p=e.editWebPage,d=void 0===p?function(){}:p,y=e.update,m=void 0===y?function(){}:y,b=e.remove,v=void 0===b?function(){}:b,g=e.bubblingTextEditing,h=void 0===g?function(){}:g,O=e.expandable,w=e.mediaViewer,S=e.contentToolbar,j=e.sections,P=void 0===j?[]:j,E=e.sectionType,T=e.overrideTools,C=void 0===T?function(e){return e}:T,I=e.storyFonts;return i().createElement(sn,{className:"ms-column-contents",ContentComponent:cr,contents:o,mode:a,add:l,editMedia:s,editWebPage:d,update:m,remove:v,viewWidth:t,viewHeight:n,bubblingTextEditing:h,sectionType:E,contentProps:{expandable:O,mediaViewer:w,contentToolbar:S},sections:P,storyFonts:I,tools:C(ar(ar(ar(ar(ar({},f.bT.TEXT,["remove"]),f.Tr.IMAGE,["editMedia",lr(),"showCaption","remove"]),f.Tr.MAP,["editMedia","editMap",lr(!0),"showCaption","remove"]),f.bT.WEBPAGE,[lr(!0,{sizeType:"horizontal"}),"editURL",lr(!0,{sizeType:"vertical",filterOptions:function(e){return"v-full"!==e.value}}),"remove"]),f.Tr.VIDEO,["editMedia","muted","autoplay","loop","showCaption","remove"])),addButtons:[{glyph:"sheet",tooltipId:"geostory.addTextContent",template:f.bT.TEXT},{glyph:"picture",tooltipId:"geostory.addMediaContent",template:f.bT.MEDIA},{glyph:"webpage",tooltipId:"geostory.addWebPageContent",template:f.bT.WEBPAGE}]})}))))(Gt),sr=(0,Re.compose)((0,Re.defaultProps)({ContentComponent:ur}),(0,Re.withHandlers)({editMedia:function(e){var t=e.editMedia,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},editWebPage:function(e){var t=e.editWebPage,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},add:function(e){var t=e.add,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},update:function(e){var t=e.update,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},remove:function(e){var t=e.remove,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}}}),(0,Re.setDisplayName)("SectionContents"))(sn);var fr=n(630998),pr=n.n(fr),dr=n(84753),yr=n.n(dr);function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hr(e,t,n){var r;return r=function(e,t){if("object"!=mr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==mr(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Re.setObservableConfig)(Le.Z);var Or=function(e,t){var n=pr()(e,{id:t});return e[-1!==n&&n?n:0]},wr=(0,Re.withProps)((function(e){var t=e.id,n=e.backgroundId,r=e.contents,o=Or(void 0===r?[]:r,n)||{},i=o&&o.id;return{background:k()(o,"background")||{type:"none"},contentId:i,sectionId:t,path:'sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(i,'"}].background')}})),Sr=(0,Re.withHandlers)({updateBackground:function(e){var t=e.sectionId,n=e.contentId,r=e.update,o=void 0===r?function(){}:r;return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return o.apply(void 0,['sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(n,'"}].background.')+e].concat(i))}},updateSection:function(e){var t=e.sectionId,n=e.update,r=void 0===n?function(){}:n;return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,['sections[{"id": "'.concat(t,'"}]')].concat(n))}}}),jr=(0,Re.compose)(wr,Sr),Pr=(0,Re.mapPropsStream)((function(e){var t=(0,Re.createEventHandler)(),n=t.handler,r=t.stream;return b.Observable.combineLatest(e,function(e,t){var n=e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return gr(gr({},e),{},hr({},n,{visible:r,entry:o}))}),{}).debounceTime(100).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{maxItem:yr()(Object.keys(e),(function(t){return e[t].visible?k()(e[t],"entry.intersectionRatio"):-1/0})),items:e}}));return b.Observable.merge(n.pluck("maxItem").distinctUntilChanged().map((function(e){return{backgroundId:e}})),n.map((function(e){var t=e.maxItem,n=e.items;return 0===k()(n[t],"entry.intersectionRatio")?"EMPTY":t})).withLatestFrom(t.pluck("updateCurrentPage")).do((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return i&&i({columnId:o})})).ignoreElements())}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return gr(gr({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return gr(gr({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{onVisibilityChange:n})}))}));const Er=(0,Re.compose)(Pr,jr);var Tr=n(689438);function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir.apply(this,arguments)}function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){Zr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Br(r.key),r)}}function Dr(e,t,n){return t=Rr(t),function(e,t){if(t&&("object"===Cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lr(e)}(e,Mr()?Reflect.construct(t,n||[],Rr(e).constructor):t.apply(e,n))}function Mr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mr=function(){return!!e})()}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rr(e)}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e,t){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nr(e,t)}function Zr(e,t,n){return(t=Br(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Br(e){var t=function(e,t){if("object"!=Cr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cr(t)?t:String(t)}var Fr=n(356936),Ur=n(683255),Gr=n.n(Ur);function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach((function(t){Xr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vr(){return Vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr.apply(this,arguments)}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kr(r.key),r)}}function Hr(e,t,n){return t=Qr(t),function(e,t){if(t&&("object"===Wr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yr()?Reflect.construct(t,n||[],Qr(e).constructor):t.apply(e,n))}function Yr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yr=function(){return!!e})()}function Qr(e){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qr(e)}function $r(e,t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$r(e,t)}function Xr(e,t,n){return(t=Kr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kr(e){var t=function(e,t){if("object"!=Wr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wr(t)?t:String(t)}var Jr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hr(this,t,arguments)}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$r(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=(0,f.cy)(this.props),t=!this.props.disableToolbarPortal&&this.refs&&this.refs.div&&this.refs.div.parentNode,n=this.props.sectionType===f.ID.TITLE?["editMedia","cover"]:["editMedia"],r=this.props.contentToolbar||Kn,o=i().createElement(r,Vr({},this.props,{themeProps:{disableBackgroundAlpha:!0,disableTextColor:!0,disableShadow:!0},tools:this.props.tools&&this.props.type&&this.props.tools[this.props.type]||this.props.sectionType===f.ID.BANNER&&[].concat(n,["cover","remove"])||n}),this.props.contentToolbarChildren),a="".concat(this.props.sectionId||"ms","-media-").concat(this.props.id||this.props.resourceId);return i().createElement("div",{ref:"div",className:"ms-section-background",style:zr({},this.props.style)},i().createElement("div",{className:"ms-section-background-container".concat((0,f.w)(this.props)),ref:this.props.innerRef,style:zr(zr({height:this.props.height},e),null!==Ke.Ln&&void 0!==Ke.Ln&&Ke.Ln[this.props.type]?{}:this.props.backgroundPlaceholder)},i().createElement(Ke.ZP,Vr({id:a},this.props,{enableFullscreen:!1,descriptionEnabled:!1,mediaViewer:this.props.mediaViewer,containerInView:this.props.inView}),this.props.children),this.props.mode===f.nl.EDIT&&(t?i().createElement(Fr.h_,{container:t},o):o)))}}])&&qr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o.Component);Xr(Jr,"propTypes",{id:$e().string,resourceId:$e().string,sectionId:$e().string,mode:$e().string,fit:$e().string,size:$e().string,path:$e().string,credits:$e().string,description:$e().string,height:$e().number,width:$e().number,tools:$e().object,style:$e().object,add:$e().func,editMedia:$e().func,update:$e().func,updateSection:$e().func,remove:$e().func,type:$e().oneOf(f.lg.MediaTypes),disableToolbarPortal:$e().bool,backgroundPlaceholder:$e().object,sectionType:$e().string,src:$e().string,theme:$e().string,mediaViewer:$e().func,contentToolbar:$e().func,inView:$e().bool,sections:$e().array,innerRef:$e().oneOfType([$e().func,$e().object]),contentToolbarChildren:$e().node}),Xr(Jr,"defaultProps",{height:0,size:"full",width:0,style:{},backgroundPlaceholder:{background:"url(".concat(Gr(),")"),backgroundSize:"256px auto"}});const eo=(to=Jr,no=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Zr(Lr(e=Dr(this,t,[].concat(r))),"state",{style:{}}),Zr(Lr(e),"update",(function(t){if(e._stickybits){var n=document.querySelector(t);-1===e._stickybits.definePosition().indexOf("sticky")&&n&&(e._stickybits.update(),setTimeout((function(){var t=n.getBoundingClientRect(),r=t.top,o=t.left;e.setState({style:{top:r,left:o,width:n.scrollWidth-2}})})))}})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nr(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._stickybits=this._node&&(0,Tr.Z)(this._node,{scrollEl:this.props.scrollContainerSelector,noStyles:!0,useGetBoundingClientRect:!0}),this.update(this.props.scrollContainerSelector)}},{key:"componentWillReceiveProps",value:function(e){!this._stickybits||e.viewWidth===this.props.viewWidth&&e.viewHeight===this.props.viewHeight||this.update(e.scrollContainerSelector)}},{key:"componentWillUnmount",value:function(){this._stickybits&&this._stickybits.cleanup()}},{key:"render",value:function(){var e=this;return i().createElement(to,Ir({ref:function(t){t&&t.refs&&t.refs[e.props.refId]&&(e._node=t.refs[e.props.refId])},style:kr({},this.state.style)},this.props),this.props.children)}}])&&xr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(o.Component),Zr(no,"propTypes",{scrollContainerSelector:$e().string,height:$e().number,width:$e().number,refId:$e().string}),Zr(no,"defaultProps",{scrollContainerSelector:"body",height:0,width:0,refId:"div"}),no);var to,no,ro=n(911636),oo=n.n(ro);function io(e){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},io(e)}function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ao.apply(this,arguments)}function co(e,t,n){var r;return r=function(e,t){if("object"!=io(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==io(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const lo=(0,Re.compose)(Er,(0,Re.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.add,n=void 0===t?function(){}:t,r=e.editMedia,o=void 0===r?function(){}:r,a=e.editWebPage,c=void 0===a?function(){}:a,l=e.onVisibilityChange,u=void 0===l?function(){}:l,s=e.update,p=void 0===s?function(){}:s,d=e.updateBackground,y=void 0===d?function(){}:d,m=e.updateCurrentPage,b=void 0===m?function(){}:m,v=e.remove,g=void 0===v?function(){}:v,h=e.id,O=e.background,w=void 0===O?{}:O,S=e.path,j=e.contents,P=void 0===j?[]:j,E=e.mode,T=e.sectionType,C=e.inViewRef,I=e.viewWidth,A=e.viewHeight,x=e.focusedContent,D=e.contentId,M=e.bubblingTextEditing,R=void 0===M?function(){}:M,L=e.textEditorActiveClass,N=void 0===L?"":L,Z=e.expandableMedia,B=void 0!==Z&&Z,F=e.storyTheme,U=e.mediaViewer,G=e.contentToolbar,W=e.inView,_=e.sections,z=void 0===_?[]:_,V=e.storyFonts,q=x&&x.hideContent&&k()(x,"target.id")===D,H=q?"hidden":"visible",Y=B&&w&&"map"===w.type?" ms-expandable-background":"",Q=(null==F?void 0:F.overlay)||{},$=(null==F?void 0:F.general)||{};return i().createElement("section",{className:"ms-section ms-section-immersive".concat(Y),id:h,ref:C},i().createElement(eo,ao({},w,{mode:E,disableToolbarPortal:!0,tools:co(co(co({},f.Tr.IMAGE,["editMedia","fit","size","align","theme"]),f.Tr.MAP,["editMedia","editMap","size","align","theme"]),f.Tr.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),scrollContainerSelector:"#ms-sections-container",add:n,editMedia:o,expandable:B,path:S,update:y,updateCurrentPage:b,remove:g,sectionType:T,sectionId:h,backgroundId:w.id,key:w.id,width:I,height:A,backgroundPlaceholder:{background:"url(".concat(oo(),")"),backgroundSize:"600px auto"},storyTheme:$,mediaViewer:U,contentToolbar:G,inView:W})),i().createElement(sr,{tools:co({},f.bT.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(N),contents:P,mode:E,add:n,updateCurrentPage:b,editMedia:o,editWebPage:c,update:p,remove:g,sectionId:h,viewWidth:I,viewHeight:A,contentProps:{onVisibilityChange:u,contentWrapperStyle:{minHeight:A,visibility:H},expandable:B,mediaViewer:U,contentToolbar:G},focusedContent:x,bubblingTextEditing:R,sectionType:T,storyTheme:Q,sections:z,storyFonts:V}),E===f.nl.EDIT&&!q&&i().createElement(nn,{containerWidth:I,containerHeight:A,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){n("sections",h,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){n("sections",h,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){n("sections",h,f.ID.PARAGRAPH)}},{glyph:"story-immersive-content",tooltipId:"geostory.addImmersiveContent",onClick:function(){n('sections[{"id": "'.concat(h,'"}].contents'),void 0,f.bT.COLUMN,"geostory.builder.defaults.titleImmersiveContent")}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){n("sections",h,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){n("sections",h,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){n("sections",h,f.tQ.WEBPAGE)}}]}))}));function uo(e){return uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(e)}function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?so(Object(n),!0).forEach((function(t){po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function po(e,t,n){var r;return r=function(e,t){if("object"!=uo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==uo(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const yo=function(e){var t=e.id,n=e.contents,r=e.mode,o=e.add,a=void 0===o?function(){}:o,c=e.update,l=void 0===c?function(){}:c,u=e.editMedia,s=void 0===u?function(){}:u,p=e.editWebPage,d=void 0===p?function(){}:p,y=e.remove,m=void 0===y?function(){}:y,b=e.inViewRef,v=e.viewWidth,g=e.viewHeight,h=e.expandableMedia,O=e.mediaViewer,w=e.contentToolbar,S=e.sections,j=void 0===S?[]:S,P=e.sectionType,E=e.storyFonts;return i().createElement("section",{className:"ms-section ms-section-paragraph",id:t,ref:b},i().createElement(sr,{className:"ms-section-contents",contents:n,mode:r,add:a,editMedia:s,editWebPage:d,update:l,remove:m,sectionId:t,viewWidth:v,viewHeight:g,sectionType:P,contentProps:{expandable:h,mediaViewer:O,contentToolbar:w,overrideTools:function(e){return fo(fo({},e),{},po({},f.bT.TEXT,[(!0,{id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:true}),"remove"]))}},sections:j,storyFonts:E}),r===f.nl.EDIT&&i().createElement(nn,{containerWidth:v,containerHeight:g,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){a("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){a("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",t,f.tQ.WEBPAGE)}}]}))};var mo=n(875492),bo=n.n(mo);function vo(e){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(e)}function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},go.apply(this,arguments)}function ho(e,t,n){var r;return r=function(e,t){if("object"!=vo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==vo(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Oo=(0,Re.compose)(jr,(0,Re.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.contents,a=void 0===o?[]:o,c=e.mode,l=e.contentId,u=e.path,s=e.sectionType,p=e.cover,d=e.viewWidth,y=e.viewHeight,m=e.inViewRef,b=e.add,v=void 0===b?function(){}:b,g=e.update,h=void 0===g?function(){}:g,O=e.updateSection,w=void 0===O?function(){}:O,S=e.remove,j=void 0===S?function(){}:S,P=e.updateBackground,E=void 0===P?function(){}:P,T=e.editMedia,C=void 0===T?function(){}:T,I=e.focusedContent,A=e.bubblingTextEditing,x=void 0===A?function(){}:A,D=e.textEditorActiveClass,M=void 0===D?"":D,R=e.expandableMedia,L=void 0!==R&&R,N=e.storyTheme,Z=e.mediaViewer,B=e.contentToolbar,F=e.inView,U=e.sections,G=void 0===U?[]:U,W=e.storyFonts,_=k()(I,"target.id")===l,z=_?"hidden":"visible",V=L&&r&&"map"===r.type?" ms-expandable-background":"",q=(null==N?void 0:N.overlay)||{},H=(null==N?void 0:N.general)||{};return i().createElement("section",{ref:m,className:"ms-section ms-section-title".concat(V),id:t},i().createElement(Me.Z,null,(function(e){var t=e.height;return i().createElement(eo,go({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:c,id:l,path:u,update:E,add:v,editMedia:C,expandable:L,updateSection:w,cover:p,remove:j,width:d,sectionType:s,backgroundPlaceholder:{background:"url(".concat(p?Gr():bo(),")"),backgroundSize:"".concat(p?64:600,"px auto")},tools:ho(ho(ho({},f.Tr.IMAGE,["editMedia","cover","fit","size","align","theme"]),f.Tr.MAP,["editMedia","cover","editMap","size","align","theme"]),f.Tr.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop"]),height:t>=y?y:t,storyTheme:H,mediaViewer:Z,contentToolbar:B,inView:F}))})),i().createElement(sr,{className:"ms-section-contents".concat(M),contents:a,mode:c,add:v,sectionType:s,update:h,remove:j,sectionId:t,contentProps:{contentWrapperStyle:p?{minHeight:y,visibility:z}:{visibility:z},mediaViewer:Z,contentToolbar:B},tools:ho({},f.bT.TEXT,["size","align","theme","remove"]),focusedContent:I,bubblingTextEditing:x,storyTheme:q,sections:G,storyFonts:W}),c===f.nl.EDIT&&!_&&i().createElement(nn,{containerWidth:d,containerHeight:y,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){v("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){v("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){v("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){v("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){v("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){v("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){v("sections",t,f.tQ.WEBPAGE)}}]}))}));function wo(e){return wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(e)}function So(){return So=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},So.apply(this,arguments)}function jo(e,t,n){var r;return r=function(e,t){if("object"!=wo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==wo(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Po=(0,Re.compose)(jr,(0,Re.withStateHandlers)({textEditorActive:!1}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.mode,a=e.contentId,c=e.path,l=e.sectionType,u=void 0===l?f.ID.BANNER:l,s=e.cover,p=e.viewWidth,d=e.viewHeight,y=e.inViewRef,m=e.add,b=void 0===m?function(){}:m,v=e.updateSection,g=void 0===v?function(){}:v,h=e.remove,O=void 0===h?function(){}:h,w=e.updateBackground,S=void 0===w?function(){}:w,j=e.editMedia,P=void 0===j?function(){}:j,E=e.focusedContent,T=e.expandableMedia,C=void 0!==T&&T,I=e.storyTheme,A=e.mediaViewer,x=e.contentToolbar,D=e.inView,M=k()(E,"target.id")===a,R=C&&r&&"map"===r.type?" ms-expandable-background":"",L=c.replace(".background","");return i().createElement("section",{ref:y,className:"ms-section ms-section-banner".concat(R),id:t},i().createElement(Me.Z,null,(function(e){var t=e.height;return i().createElement(eo,So({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:o,id:a,path:c,update:S,add:b,editMedia:P,expandable:C,updateSection:g,cover:s,remove:function(){return O(L)},width:p,sectionType:u,backgroundPlaceholder:{background:"url(".concat(s?Gr():bo(),")"),backgroundSize:"".concat(s?64:600,"px auto")},tools:jo(jo(jo({},f.Tr.IMAGE,["editMedia","cover","fit","size","align","theme","remove"]),f.Tr.MAP,["editMedia","cover","editMap","size","align","theme","remove"]),f.Tr.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop","remove"]),height:t>=d?d:t,storyTheme:I,mediaViewer:A,contentToolbar:x,inView:D}))})),i().createElement("div",{style:{minHeight:s?d:300,pointerEvents:"none"}}),o===f.nl.EDIT&&!M&&i().createElement(nn,{containerWidth:p,containerHeight:d,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){b("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){b("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){b("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){b("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){b("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){b("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){b("sections",t,f.tQ.WEBPAGE)}}]}))}));var Eo=n(294184),To=n.n(Eo),Co=n(771335),Io=n(694745),Ao=n(993451);function ko(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Do=(0,Ao.Z)("placeholder")(et.FormControl);const Mo=function(e){var t,n,r,a=ko((0,o.useState)([]),2),c=a[0],l=a[1],u=ko((0,o.useState)({data:null==e||null===(t=e.thumbnail)||void 0===t?void 0:t.image}),2),s=u[0],f=u[1],p=ko((0,o.useState)(null==e?void 0:e.title),2),d=p[0],y=p[1];return i().createElement(Io.Z,{fitContent:!0,title:i().createElement(lt.Z,{msgId:e.editing?"geostory.carouselEditTitle":"geostory.carouselAddTitle"}),show:!0,fade:!0,clickOutEnabled:!1,bodyClassName:"ms-flex modal-properties-container background-dialog",onClose:e.onClose,buttons:e.loading?[]:[{text:i().createElement(lt.Z,{msgId:e.editing?"save":"backgroundDialog.add"}),bsStyle:"primary",onClick:function(){e.update("thumbnail",{image:s.data}),e.update("title",d),e.onClose()}}]},i().createElement(et.Form,{style:{width:"100%"}},(r={FORMAT:i().createElement(lt.Z,{msgId:"map.errorFormat"}),SIZE:i().createElement(lt.Z,{msgId:"map.errorSize"})},c.length>0?i().createElement("div",{className:"dropzone-errorBox alert-danger"},i().createElement("p",null,i().createElement(lt.Z,{msgId:"map.error"})),c.map((function(e){return i().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},r[e])}))):null),i().createElement(Co.Z,{onUpdate:function(e,t){return f({data:e,url:t})},onError:function(e){return l(e)},message:i().createElement(lt.Z,{msgId:"backgroundDialog.imageUploadMessage"}),suggestion:"",map:{newThumbnail:k()(s,"url")||(null===(n=e.thumbnail)||void 0===n?void 0:n.image)||"NODATA"},thumbnailOptions:{contain:!1,width:128,height:128,quality:1,type:"image/jpeg"}}),i().createElement(et.FormGroup,null,i().createElement(et.ControlLabel,null,i().createElement(lt.Z,{msgId:"layerProperties.title"})),i().createElement(Do,{value:d,placeholder:"backgroundDialog.titlePlaceholder",onChange:function(e){return y(e.target.value)}}))))};var Ro=n(625311),Lo=n(245567),No=n(773723),Zo=n.n(No),Bo=n(615402);const Fo=function(e){return t=e.type,n="",r="","addMap"===t?(n="ms-carousel-map-info",r="geostory.carouselAddMapInfo"):"addMarker"===t?(n="ms-carousel-marker-info",r="geostory.carouselPlaceMarkerInfo"):(n="ms-carousel-add-info",r="geostory.carouselAddItemInfo"),i().createElement("div",{className:n},i().createElement(Bo.Z,{msgId:r}));var t,n,r};var Uo=n(81593);function Go(e){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(e)}var Wo=["title","thumbnail","index","isSelected"],_o=["onSort","sectionId","contents","onEnableDraw","isEditMap","isDrawEnabled"];function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Go(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Go(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Go(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qo(){return qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qo.apply(this,arguments)}function Ho(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var $o=(0,Ro.Z)((function(e){var t=e.title,n=e.thumbnail,r=e.index,o=e.isSelected,a=Qo(e,Wo),c=i().createElement("div",{className:To()("ms-geo-carousel-item",{"ms-geo-carousel-item-selected":o}),onClick:a.onClick},i().createElement("div",{className:"ms-geo-carousel-item-inner-wrapper",style:{backgroundImage:"url(".concat((null==n?void 0:n.image)||Zo(),")")}},i().createElement("span",{className:"ms-geo-carousel-item-inner"},t||"Item ".concat(r+1)),i().createElement("span",{className:"ms-geo-carousel-item-inner-index"},r+1)));return a.isDraggable&&a.connectDragSource?a.connectDragSource(c):c})),Xo=(0,Lo.Z)((function(e){var t=e.mode,n=e.add,r=e.update,a=void 0===r?function(){}:r,c=e.remove,l=e.sectionId,u=e.isMapBackground,s=e.contentId,p=e.items,d=e.contentToolbar,y=void 0===d?Kn:d,m=e.cardComponent,b=e.containerWidth,v=e.isDrawEnabled,g=e.onEnableDraw,h=e.isEditMap,O=e.innerRef,w=e.deltaSwipeSize,S=void 0===w?200:w,j=e.transition,P=void 0===j?300:j,E=e.style,T=e.controlStyle,C=Ho((0,o.useState)(!1),2),I=C[0],A=C[1],k=Ho((0,o.useState)(void 0),2),x=k[0],D=k[1],M=Ho((0,o.useState)(""),2),L=M[0],N=M[1],Z=Ho((0,o.useState)({}),2),B=Z[0],F=Z[1],U=(0,Uo.Z)({direction:"horizontal",width:b,deltaScroll:S,transition:P},[p.length]),G=U.isStartControlActive,W=U.isEndControlActive,_=U.containerPropsHandlers,z=U.contentPropsHandlers,V=U.itemPropsHandlers,q=U.moveToDeltaSize,H=U.moveItemInViewById,Y=t===f.nl.EDIT;(0,o.useEffect)((function(){s&&H(s,{margin:32})}),[s]);var Q=!(u&&!hn()(p,(function(e){var t;return 0===((null==e||null===(t=e.features)||void 0===t?void 0:t.length)||0)})));return i().createElement(i().Fragment,null,i().createElement("div",{ref:O,style:E,className:"ms-geo-carousel"},Y&&1===p.length&&Q&&!h&&i().createElement(Fo,{type:"addInfo"}),h&&Y&&v&&!!hn()(p,(function(e){var t;return e.id===s&&0===((null==e||null===(t=e.features)||void 0===t?void 0:t.length)||0)}))&&i().createElement(Fo,{type:"addMarker"}),Y&&i().createElement(y,{addDisabled:Q,add:n,editMap:h,remove:function(){return c('sections[{"id":"'.concat(l,'"}]'))},tools:["add","remove"]}),i().createElement("div",qo({},_(),{className:"ms-horizontal-menu"}),i().createElement("div",z(),p.map((function(e,t){var r=V({id:e.id,onClick:h?void 0:function(){a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(e.id,'"}].carouselToggle'),!0)}});return i().createElement("div",qo({key:t},r,{className:"ms-geo-carousel-item-wrapper",style:h?{pointerEvents:"none"}:{}}),Y&&i().createElement(y,{editMap:h,markerDisabled:!u||(null==e?void 0:e.id)!==s,edit:function(t){t.stopPropagation(),function(e){D(null==e?void 0:e.id),A(!0),F(null==e?void 0:e.thumbnail),N(null==e?void 0:e.title)}(e)},remove:function(){var n,r,o,i;return o=null==e?void 0:e.id,i=0===t&&p.length>0?null===(n=p[t+1])||void 0===n?void 0:n.id:null===(r=p[t-1])||void 0===r?void 0:r.id,c('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(o,'"}]')),void(s===o&&a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(i,'"}].hideContent'),!1))},forceDelBtnDisable:(null==e?void 0:e.id)===s,add:n,marker:function(t){t.stopPropagation(),g(e)},tools:["edit","remove","marker"]}),i().createElement(m,qo({key:t,index:t,items:p,update:a,sectionId:l,selectedId:s,isSelected:(null==e?void 0:e.id)===s},e)))}))),G&&i().createElement(ct.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:Vo(Vo({},T),{},{position:"absolute"}),onClick:function(){return q(S)}},i().createElement(et.Glyphicon,{glyph:"chevron-left"})),W&&i().createElement(ct.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:Vo(Vo({},T),{},{position:"absolute",right:0}),onClick:function(){return q(-S)}},i().createElement(et.Glyphicon,{glyph:"chevron-right"})))),I&&i().createElement(Mo,{title:L,thumbnail:B,update:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=R()(e)?"":".".concat(e);a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(n,'"}]')+o,t,r)},onClose:function(){return A(!1)}}))}));const Ko=function(e){var t=e.onSort,n=e.sectionId,r=e.contents,o=void 0===r?[]:r,a=e.onEnableDraw,c=void 0===a?function(){}:a,l=e.isEditMap,u=e.isDrawEnabled,s=Qo(e,_o);return i().createElement(Xo,qo({containerId:n,isDraggable:s.mode===f.nl.EDIT,onSort:function(e,r,o,i){if(o.containerId===i.containerId){var a='sections[{ "id": "'.concat(n,'" }].contents[{"id":"').concat(i.id,'"}]'),c='sections[{ "id": "'.concat(n,'" }].contents'),l=e,u=zn()();t(a,c,l,u,'sections[{ "id": "'.concat(n,'" }].contents[{"id":"').concat(u,'"}]'))}}},Vo(Vo({},s),{},{sectionId:n}),{cardComponent:$o,items:o.map((function(e){var t=e.id,n=e.thumbnail;return{id:t,thumbnail:void 0===n?{}:n,features:e.features,title:e.title}})),isDrawEnabled:u,onEnableDraw:c,isEditMap:l}))};var Jo=n(743837),ei=n(240986);const ti=function(e){var t=e.currentIndex,n=e.contents,r=void 0===n?[]:n,o=e.onTraverseCard,a=void 0===o?function(){}:o;return i().createElement(i().Fragment,null,i().createElement(ct.Z,{className:"ms-carousel-slider left-arrow",disabled:0===t,onClick:function(){return a()}},i().createElement(et.Glyphicon,{style:{fontSize:22},glyph:"chevron-left"})),i().createElement(ct.Z,{className:"ms-carousel-slider right-arrow",onClick:function(){return a("right")},disabled:t===r.length-1},i().createElement(et.Glyphicon,{style:{fontSize:22},glyph:"chevron-right"})))};function ni(e){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ni(e)}function ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ii(){return ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ii.apply(this,arguments)}function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach((function(t){li(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function li(e,t,n){var r;return r=function(e,t){if("object"!=ni(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ni(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ui=(0,Re.compose)(Pr,(function(e){return function(t){var n=Or(t.contents||[],t.backgroundId)||{},r=n&&n.id,o=gr(gr({},t),{},{contentId:r,sectionId:t.id,path:'sections[{"id": "'.concat(t.id,'"}].background')});return i().createElement(e,o)}}),(function(e){return function(t){var n=gr(gr({},t),{},{updateBackground:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.update.apply(t,['sections[{"id": "'.concat(t.sectionId,'"}].background.')+e].concat(r))},updateSection:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.update.apply(t,['sections[{"id": "'.concat(t.sectionId,'"}]')].concat(n))}});return i().createElement(e,n)}}),(function(e){return function(t){var n=ri((0,o.useState)(""),2),r=n[0],a=n[1];return i().createElement(e,ii({},t,{textEditorActiveClass:r,bubblingTextEditing:function(e){return a(e?" ms-text-editor-active":"")}}))}}))((function(e){var t,n,r=e.add,a=void 0===r?function(){}:r,c=e.editMedia,l=void 0===c?function(){}:c,u=e.editWebPage,s=void 0===u?function(){}:u,p=e.onVisibilityChange,d=void 0===p?function(){}:p,y=e.update,m=void 0===y?function(){}:y,b=e.updateBackground,v=void 0===b?function(){}:b,g=e.updateCurrentPage,h=void 0===g?function(){}:g,O=e.remove,w=void 0===O?function(){}:O,S=e.id,j=e.background,P=void 0===j?{}:j,E=e.path,T=e.contents,C=void 0===T?[]:T,I=e.mode,A=e.sectionType,x=e.inViewRef,D=e.viewWidth,M=e.viewHeight,R=e.focusedContent,L=e.contentId,N=e.bubblingTextEditing,Z=void 0===N?function(){}:N,B=e.textEditorActiveClass,F=void 0===B?"":B,U=e.expandableMedia,G=void 0!==U&&U,W=e.storyTheme,_=e.mediaViewer,z=e.contentToolbar,V=e.inView,q=e.sections,H=void 0===q?[]:q,Y=e.storyFonts,Q=e.onSort,$=void 0===Q?function(){}:Q,X=e.onEnableDraw,K=void 0===X?function(){}:X,J=e.isDrawEnabled,ee=e.defaultMarkerStyle,te=void 0===ee?{iconColor:"cyan",iconShape:"circle"}:ee,ne=e.highlightedMarkerStyle,re=void 0===ne?{iconColor:"green",iconShape:"circle"}:ne,oe=(0,o.useRef)(),ie=(0,o.useRef)(),ae=(0,o.useRef)();function ce(e,t){return t-(e.left+e.right)<128?{top:0,left:0,bottom:0,right:0}:e}var le=R&&R.hideContent&&k()(R,"target.id")===S,ue=le?"hidden":"visible",se=G&&P&&"map"===P.type?" ms-expandable-background":"",fe=ci(ci({},null==W?void 0:W.overlay),I===f.nl.VIEW&&{maxHeight:M-350,overflowY:"auto"})||{},pe=(null==W?void 0:W.general)||{},de=M-(I===f.nl.EDIT?220:200),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(hn()(C,{id:L})||{}).contents,n=void 0===t?[]:t;return e.filter((function(e){return f.ID.CAROUSEL===A&&1===n.length?"remove"!==e:e}))},me=(null==P?void 0:P.type)===f.Tr.MAP,be=(C.find((function(e){return e.id===L}))||{}).features,ve=void 0===be?[]:be,ge=pr()(C,(function(e){var t=e.id;return L===t})),he=(0,f.Yh)({id:S,contents:C.filter((function(e){return e.id!==L})),featureStyle:function(e){var t=e.content,n=e.feature;return(0,f.c0)(te,C,t,L,n)}}),Oe=(0,f.Yh)({id:"".concat(S,"-highlighted"),contents:C.filter((function(e){return e.id===L})),featureStyle:function(e){var t=e.content,n=e.feature;return(0,f.c0)(re,C,t,L,n)}});return i().createElement("section",{className:"ms-section ms-section-carousel".concat(se),id:S,ref:x},i().createElement(eo,ii({},P,{mode:I,innerRef:oe,disableToolbarPortal:!0,tools:li(li(li({},f.Tr.IMAGE,["editMedia","fit","size","align","theme"]),f.Tr.MAP,["editMedia","editMap","size","align","theme"].concat(J?"closeDraw":[])),f.Tr.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),scrollContainerSelector:"#ms-sections-container",add:a,editMedia:l,expandable:G,path:E,update:v,updateCurrentPage:h,remove:w,sectionType:A,sectionId:S,backgroundId:P.id,key:P.id,width:D,height:M,backgroundPlaceholder:{background:"url(".concat(oo(),")"),backgroundSize:"600px auto"},storyTheme:pe,mediaViewer:_,contentToolbar:z,inView:V,layers:[he,Oe],isDrawEnabled:J,onEnableDraw:K,contentToolbarChildren:!me&&I===f.nl.EDIT&&i().createElement(Fo,{type:"addMap"})}),i().createElement(Jo.Z,{active:J,features:ve,method:"Point",onChange:function(e,t){m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(L,'"}].features'),t)}}),i().createElement(ei.Z,{active:!(J||null!=P&&P.editMap),geometry:null==ve||null===(t=ve[0])||void 0===t||null===(n=t.geometry)||void 0===n?void 0:n.coordinates,padding:function(){var e={top:0,left:0,bottom:0,right:0},t=oe.current&&oe.current.querySelector(".ms-media-map"),n=ie.current&&ie.current.querySelector("[id='".concat(L,"']"));if(t&&n){var r=oe.current.getBoundingClientRect()||{},o=t.getBoundingClientRect()||{},i=n.getBoundingClientRect()||{};if(ae.current){var a=ae.current.getBoundingClientRect()||{};e.bottom=r.height-(a.top-r.top)}var c=o.left-r.left,l=c+o.width,u=i.left-r.left,s=u+i.width;if(u>=c&&s<=l){var f=u-c,p=l-s;return p>=f?e.left=f+i.width:e.right=p+i.width,ce(e,o.width)}if(s>=c&&s<=l)return e.left=s-c,ce(e,o.width);if(u>=c&&u<=l)return e.right=l-u,ce(e,o.width)}return e}(),fixedZoom:!0,duration:300})),i().createElement(sr,{innerRef:ie,tools:li({},f.bT.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(F),contents:C,mode:I,add:a,updateCurrentPage:h,editMedia:l,editWebPage:s,update:m,remove:w,sectionId:S,viewWidth:D,viewHeight:M,contentProps:{onVisibilityChange:d,contentWrapperStyle:{minHeight:de,visibility:ue},expandable:G,mediaViewer:_,contentToolbar:z,overrideTools:function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=ri(e,2),n=t[0],r=t[1];return[n,ye(r)]})))}},focusedContent:R,bubblingTextEditing:Z,sectionType:A,storyTheme:fe,sections:H,storyFonts:Y}),i().createElement(Ko,{innerRef:ae,style:null!=W&&W.overlay?ci({},W.overlay):{},controlStyle:pe?ci({},pe):{},sectionId:S,contentId:L,contents:C,update:m,remove:w,expandable:G,add:function(){return e=ci(ci({},(0,f.nq)(f.bT.COLUMN)),{},{title:"Item "+(C.length+1),background:{}}),a('sections[{"id": "'.concat(S,'"}].contents'),void 0,e,"geostory.builder.defaults.titleGeocarouselContent"),void m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(L,'"}].hideContent'),!0);var e},contentToolbar:z,mode:I,onSort:$,isMapBackground:me,isEditMap:null==P?void 0:P.editMap,containerWidth:D,isDrawEnabled:J,onEnableDraw:function(e){m('sections[{"id":"'.concat(S,'"}].background.editMap'),!0,"replace"),K({contentId:e.id,sectionId:S})}}),I===f.nl.VIEW&&!G&&i().createElement(ti,{currentIndex:ge,contents:C,onTraverseCard:function(){var e,t,n;e="left"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left")?null==C||null===(t=C[0===ge?0:ge-1])||void 0===t?void 0:t.id:null==C||null===(n=C[ge===C.length-1?ge:ge+1])||void 0===n?void 0:n.id,m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(e,'"}].carouselToggle'),!0)}}),I===f.nl.EDIT&&!le&&i().createElement(nn,{containerWidth:D,containerHeight:M,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",S,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",S,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",S,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){return a("sections",S,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){a("sections",S,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",S,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",S,f.tQ.WEBPAGE)}}]}))}));function si(e){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},si(e)}function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gi(r.key),r)}}function pi(e,t,n){return t=yi(t),function(e,t){if(t&&("object"===si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mi(e)}(e,di()?Reflect.construct(t,n||[],yi(e).constructor):t.apply(e,n))}function di(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(di=function(){return!!e})()}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yi(e)}function mi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bi(e,t){return bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bi(e,t)}function vi(e,t,n){return(t=gi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gi(e){var t=function(e,t){if("object"!=si(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==si(t)?t:String(t)}var hi=vi(vi(vi(vi(vi(vi(vi(vi({},f.ID.IMMERSIVE,lo),f.ID.CAROUSEL,ui),f.ID.PARAGRAPH,yo),f.tQ.MEDIA,yo),f.tQ.WEBPAGE,yo),f.ID.TITLE,Oo),f.ID.BANNER,Po),"UNKNOWN",(function(e){var t=e.type,n=e.inViewRef;return i().createElement("div",{ref:n,className:"ms-section ms-section-unknown"},"WARNING: unknown session of type ",t)})),Oi=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return vi(mi(e=pi(this,t,[].concat(r))),"state",{height:0}),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bi(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=hi[this.props.type]||hi.UNKNOWN;return i().createElement(e,{sectionType:this.props.type,id:this.props.id,add:this.props.add,update:this.props.update,inViewRef:this.props.inViewRef,editMedia:this.props.editMedia,expandableMedia:this.props.expandableMedia,editWebPage:this.props.editWebPage,updateCurrentPage:this.props.updateCurrentPage,remove:this.props.remove,mode:this.props.mode,cover:this.props.cover,contents:this.props.contents,viewWidth:this.props.viewWidth,viewHeight:this.props.viewHeight,focusedContent:this.props.focusedContent,storyTheme:this.props.storyTheme,mediaViewer:this.props.mediaViewer,contentToolbar:this.props.contentToolbar,inView:this.props.inView,sections:this.props.sections,storyFonts:this.props.storyFonts,onSort:this.props.onSort,isDrawEnabled:this.props.isDrawEnabled,background:this.props.background,onEnableDraw:this.props.onEnableDraw,defaultMarkerStyle:this.props.defaultMarkerStyle,highlightedMarkerStyle:this.props.highlightedMarkerStyle})}}])&&fi(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(i().Component);vi(Oi,"propTypes",{id:$e().string,type:$e().oneOf(f.lg.SectionTypes),storyType:$e().oneOf(f.lg.StoryTypes),add:$e().func,update:$e().func,editMedia:$e().func,editWebPage:$e().func,remove:$e().func,updateCurrentPage:$e().func,mode:$e().oneOf(f.lg.Modes),contents:$e().array,viewHeight:$e().number,viewWidth:$e().number,inViewRef:$e().func,excludeClassName:$e().string,cover:$e().bool,focusedContent:$e().object,expandableMedia:$e().bool,storyTheme:$e().object,mediaViewer:$e().func,contentToolbar:$e().func,inView:$e().bool,sections:$e().array,storyFonts:$e().array,onSort:$e().func,isDrawEnabled:$e().bool,onEnableDraw:$e().func,background:$e().object,defaultMarkerStyle:$e().object,highlightedMarkerStyle:$e().object}),vi(Oi,"defaultProps",{id:"",add:function(){},update:function(){},editMedia:function(){},editWebPage:function(){},updateCurrentPage:function(){},remove:function(){},onSort:function(){},storyType:f.Ln.CASCADE,viewHeight:0,viewWidth:0,mode:f.nl.VIEW,expandableMedia:!1,sections:[],storyFonts:[],onEnableDraw:function(){}});const wi=mn({threshold:[0,.25,.5,.75,1],rootMargin:"-200px 0px 0px 0px"})(Oi);function Si(e){return Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Si(e)}function ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ki(r.key),r)}}function Pi(e,t,n){return t=Ti(t),function(e,t){if(t&&("object"===Si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ci(e)}(e,Ei()?Reflect.construct(t,n||[],Ti(e).constructor):t.apply(e,n))}function Ei(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ei=function(){return!!e})()}function Ti(e){return Ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ti(e)}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e,t){return Ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ii(e,t)}function Ai(e,t,n){return(t=ki(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ki(e){var t=function(e,t){if("object"!=Si(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Si(t)?t:String(t)}var xi=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Ai(Ci(e=Pi(this,t,[].concat(r))),"getAdjustedSelector",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/#\d|^#-\d/g,(function(e,t){return t?"#\\"+t[1]+t[2]:"#\\3"+e[1]+" "}))})),Ai(Ci(e),"getFocusedTarget",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.targets,n=e.props.padding,r=void 0===n?{}:n;return t.map((function(t){var n=t.selector,o=null;try{var i=window.document.querySelector(e.getAdjustedSelector(n));if(i){var a=i.getBoundingClientRect(),c=a.top,l=a.right,u=a.bottom,s=a.left;o={x:s-r,y:c-r,w:l-s+2*r,h:u-c+2*r}}}catch(e){console.warn(e)}finally{return o}})).filter((function(e){return e}))})),Ai(Ci(e),"getHolePath",(function(t){var n=t.x,r=t.y,o=t.w,i=t.h,a=e.props.borderRadius,c=void 0===a?8:a;return"M ".concat(n," ").concat(r+c," q 0 -").concat(c," ").concat(c," -").concat(c," h ").concat(o-2*c," q ").concat(c," 0 ").concat(c," ").concat(c," v ").concat(i-2*c," q 0 ").concat(c," -").concat(c," ").concat(c," h-").concat(o-2*c," q -").concat(c," 0 -").concat(c," -").concat(c," v-").concat(i-2*c)})),Ai(Ci(e),"getPath",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getFocusedTarget();return"M 0 0 h ".concat(n," v ").concat(t," h -").concat(n," v -").concat(t)+r.map(e.getHolePath).join(" ")})),e}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ii(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.onMaskClicked,r=t.stopEventsOnTargets,o=void 0!==r&&r,a=t.targets,c=this.getFocusedTarget(a.filter((function(e){var t=e.stopEventsOnTarget;return o||t})));return i().createElement("div",{style:{position:"fixed",height:"100vh",width:"100vw",top:0,left:0,zIndex:1e6,pointerEvents:"none"}},i().createElement(Me.Z,null,(function(t){var r=t.width,o=t.height;return i().createElement("svg",{width:r,height:o,xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:e.getPath(o,r),fill:"rgba(0,0,0,0.7)",fillRule:"evenodd",pointerEvents:"visiblePainted",onClick:n}),c.map((function(t,n){return i().createElement("path",{key:n,d:e.getHolePath(t),fill:"transparent",pointerEvents:"visiblePainted"})})))})))}}])&&ji(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(i().Component);function Di(e){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Di(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Di(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ai(xi,"propTypes",{targets:$e().arrayOf($e().shape({selector:$e().string,stopEventsOnTarget:$e().bool})),padding:$e().number,borderRadius:$e().number,onMaskClicked:$e().func,stopEventsOnTargets:$e().bool}),Ai(xi,"defaultProps",{targets:[],padding:0,borderRadius:8,onMaskClicked:function(){},stopEventsOnTargets:!1});var Li=(0,Ge.Z)((function(e){var t=e.sections;return 0===(void 0===t?[]:t).length}),(function(e){var t=e.add,n=void 0===t?function(){}:t;return{iconFit:!1,style:{position:"relative",width:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},glyph:"geostory",title:i().createElement(lt.Z,{msgId:"geostory.emptyTitle"}),description:i().createElement(lt.Z,{msgId:"geostory.emptyDescription"}),content:i().createElement(nn,{addButtonClassName:"square-button-md",containerWidth:"100%",containerHeight:"100%",buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){n("sections",0,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){n("sections",0,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){n("sections",0,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveContent",onClick:function(){n("sections",0,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselContent",onClick:function(){n("sections",0,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){n("sections",0,f.tQ.MEDIA)}},{glyph:"code",tooltipId:"geostory.addWebPageSection",onClick:function(){n("sections",0,f.tQ.WEBPAGE)}}]})}}))(Me.Z),Ni=function(e){var t=e.width;return e.mode===f.nl.EDIT?"":t<640?"sm":t>=640&&t<1024?"md":""};const Zi=(0,Re.compose)(Ue,Ye,function(e){var t=e.showFocusMask,n=void 0===t?function(){}:t,r=e.defaultTargets,o=void 0===r?{selector:".ms-geostory-map-editor"}:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=a.padding,l=void 0===c?0:c,u=a.borderRadius,s=void 0===u?8:u,f=a.stopEventsOnTargets,p=void 0!==f&&f,d=a.onMaskClicked,y=void 0===d?function(){}:d;return(0,Re.branch)(n,(function(e){return(0,Re.nest)((function(e){var t=e.focusedContent,n=e.children;return i().createElement(i().Fragment,null,n,i().createElement(xi,{targets:[t,o],padding:l,borderRadius:s,stopEventsOnTargets:p,onMaskClicked:y}))}),e)}))}({showFocusMask:function(e){var t=e.focusedContent,n=(void 0===t?{}:t).target;return(void 0===n?{}:n).id}}))((function(e){var t=e.mode,n=void 0===t?f.nl.VIEW:t,r=e.sections,o=void 0===r?[]:r,a=e.add,c=void 0===a?function(){}:a,l=e.onVisibilityChange,u=void 0===l?function(){}:l,s=e.updateCurrentPage,p=void 0===s?function(){}:s,d=e.editMedia,y=void 0===d?function(){}:d,m=e.editWebPage,b=void 0===m?function(){}:m,v=e.update,g=void 0===v?function(){}:v,h=e.remove,O=void 0===h?function(){}:h,w=e.focusedContent,S=e.isContentFocused,j=void 0!==S&&S,P=e.getSize,E=void 0===P?Ni:P,T=e.theme,C=void 0===T?{}:T,I=e.mediaViewer,A=e.contentToolbar,k=e.storyFonts,x=e.onSort,D=void 0===x?function(){}:x,M=e.isDrawEnabled,R=void 0!==M&&M,L=e.onEnableDraw,N=void 0===L?function(){}:L,Z=e.defaultMarkerStyle,B=e.highlightedMarkerStyle;return i().createElement(De.Z,{className:"ms-cascade-story ms-".concat(n)},i().createElement(Li,{sections:o,add:c},(function(e){var t,r=e.width,a=e.height,l=E({width:r,height:a,mode:n}),s=l?" ms-".concat(l):"",f="sm"===l,d=C&&xn()(C)&&C||{};return i().createElement("div",{id:"ms-sections-container",className:"ms-sections-container".concat(s," ms-sections-hyperlinks"),style:Ri(Ri({},null==d?void 0:d.general),j&&{overflow:"hidden"})},(null==d||null===(t=d.link)||void 0===t?void 0:t.color)&&i().createElement("style",{dangerouslySetInnerHTML:{__html:"\n            .ms-sections-hyperlinks .ms-text-editor-main a,\n            .ms-sections-hyperlinks .ms-text-wrapper a,\n            .ms-sections-hyperlinks .ms-text-editor-main a:link,\n            .ms-sections-hyperlinks .ms-text-wrapper a:link,\n            .ms-sections-hyperlinks .ms-text-editor-main a:visited,\n            .ms-sections-hyperlinks .ms-text-wrapper a:visited,\n            .ms-sections-hyperlinks .ms-text-editor-main a:active,\n            .ms-sections-hyperlinks .ms-text-wrapper a:active {\n                color: ".concat(d.link.color,";\n                opacity: 1;\n            }\n            .ms-sections-hyperlinks .ms-text-editor-main a:hover,\n            .ms-sections-hyperlinks .ms-text-wrapper a:hover {\n                color: ").concat(d.link.color,";\n                opacity: 0.75;\n            }\n        ")}}),o.map((function(e){var t=e.contents,l=void 0===t?[]:t,s=e.id,m=e.type,v=e.cover,h=e.background;return i().createElement(wi,{focusedContent:w,onVisibilityChange:u,add:c,editMedia:y,expandableMedia:f,editWebPage:b,updateCurrentPage:p,update:g,remove:O,key:s,id:s,viewHeight:a,viewWidth:r,type:m,mode:n,contents:l,cover:v,storyTheme:d,mediaViewer:I,contentToolbar:A,sections:o,storyFonts:k,onSort:D,isDrawEnabled:R,onEnableDraw:N,background:h,defaultMarkerStyle:Z,highlightedMarkerStyle:B})})))})))}));var Bi=n(648860);function Fi(e){return Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fi(e)}function Ui(e){return function(e){if(Array.isArray(e))return Gi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wi(){return Wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wi.apply(this,arguments)}function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Fi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Fi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Fi(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vi=(0,In.Z)(bn.Z);const qi=(0,Re.compose)((0,a.connect)((0,c.P1)(V.jq,V.z7,(function(e,t){return{resources:e,isContentFocused:t}}))),(0,Re.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.map,o=void 0===r?{}:r,i=zi(zi({},o),{},{layers:(o.layers||[]).map((function(e){return e||void 0}))}),a=hn()(t,{id:n})||{};return{map:(0,f.oH)(a.data,i)}})));var Hi=(0,Re.compose)((0,a.connect)((0,c.P1)(V.GC,(function(){return{focusedEl:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))),(0,Re.withProps)((function(e){var t=e.focusedEl,n=void 0===t?{}:t,r=n.resourceId,o=n.map;return{map:o||{},resourceId:r,disableReset:!o}}))),Yi=(0,Re.withHandlers)({onChangeMap:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t("".concat(r.path,".map.").concat(e),n,"merge")}},onChange:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t(r.path+".".concat(e),n,"merge")}}}),Qi=(0,Re.withHandlers)({toggleEditing:function(e){var t=e.editMap,n=e.update,r=e.focusedContent;return function(){return n(r.path+".editMap",!t)}},onReset:function(e){var t=e.update,n=e.focusedContent,r=(void 0===n?{}:n).path,o=void 0===r?"":r;return function(){t(o+".map",void 0)}}}),$i=function(e){return i().createElement(Vi,Wi({glyph:"repeat",bsStyle:"primary",className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.resetMap",confirmTitle:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.resetMapConfirm"}),confirmContent:i().createElement(lt.Z,{msgId:"geostory.contentToolbar.resetConfirmContent"})},e))},Xi=(0,Re.compose)((0,Re.withProps)((function(e){var t=e.disableReset,n=e.onReset,r=e.buttonItems,o=void 0===r?[]:r,a=e.map;return{buttons:[{renderButton:i().createElement($i,{disabled:t,onClick:n})}].concat(Ui(o.map((function(e){var t=e.Component;return{renderButton:i().createElement(t,{map:a})}}))))}})),Bi.Z,(0,Re.withStateHandlers)((function(){return{editNode:void 0}}),{setEditNode:function(){return function(e){return{editNode:e}}},closeNodeEditor:function(){return function(){return{editNode:void 0}}}}),(0,Re.branch)((function(e){return!!e.editNode}),(0,Re.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.closeNodeEditor,o=void 0===r?function(){}:r;return{buttons:[{visible:1===n.length,tooltipId:"close",glyph:"1-close",onClick:o}]}})),(0,Re.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.setEditNode,o=void 0===r?function(){}:r,i=e.buttons,a=void 0===i?[]:i;return{buttons:[{visible:1===n.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){o(n[0])}}].concat(Ui(a))}})))),Ki=(0,Re.compose)((0,Re.withPropsOnChange)(["focusedContent"],(function(e){var t=e.map,n=e.focusedEl;return{contentMap:(void 0===n?{}:n).map,lastSavedMap:t}})),(0,Re.withPropsOnChange)(["map"],(function(e){var t=e.map,n=e.lastSavedMap;return{pendingChanges:!jn()(n,t)}}))),Ji=(0,Re.compose)((0,Re.withProps)((function(e){var t=e.toggleEditing;return{CloseBtn:function(e){return i().createElement(bn.Z,Wi({onClick:t},e))}}}))),ea=(0,Re.mapPropsStream)((function(e){var t=(0,Re.createEventHandler)(),n=t.stream,r=t.handler;return e.pluck("map").distinctUntilChanged((function(e,t){return jn()(e,t)})).switchMap((function(e){return n.map((function(t){return{map:zi(zi({},e),t)}})).startWith({map:e})})).combineLatest(e,(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map;return zi(zi({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{onMapViewLocalChanges:r,map:e})}))})),ta=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},na=(0,Re.withHandlers)({onMapViewChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.update,n=e.editMap,r=void 0!==n&&n,o=e.onMapViewLocalChanges,i=e.map,a=void 0===i?{}:i,c=a.center,l=void 0===c?{}:c,u=a.zoom,s=a.mapStateSource,f=a.resolution,p=a.resetPanAndZoom;return function(e){var n=e.center,i=void 0===n?{}:n,a=e.zoom,c=e.mapStateSource,d=e.resolution,y=ta(l.x,i.x)&&ta(l.y,i.y);!r||y&&u===a?p?t("map",{center:l,zoom:u,mapStateSource:s,resolution:f,resetPanAndZoom:!1},"merge"):o({center:i,zoom:a,mapStateSource:c,resolution:d}):t("map",{center:i,zoom:a,mapStateSource:zn()(),resolution:d,resetPanAndZoom:!1},"merge")}}}),ra=n(5993),oa=n(75927),ia=n(651768),aa=n(815135),ca=["tabs","activeTab","width","setActiveTab"];function la(){return la=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},la.apply(this,arguments)}var ua=(0,aa.Z)(et.NavItem);var sa=n(979105),fa=n(743129),pa=n(145869),da=n(487320),ya=["map","onChangeMap"];var ma=(0,Ao.Z)(["placeholder","options"])(fa.ZP);const ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{zoomControl:!0,mapInfoControl:!1}:t,r=e.onChangeMap,o=void 0===r?function(){}:r,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ya),c=n&&n.mapOptions||{},l=(0,f.kn)({mapOptions:c,zoomControl:!!P()(n.zoomControl)||n.zoomControl,mapInfoControl:!P()(n.mapInfoControl)&&n.mapInfoControl});return i().createElement(et.Form,{className:"ms-geostory-map-controls"},i().createElement(et.FormGroup,null,i().createElement(et.ControlLabel,null,i().createElement(lt.Z,{msgId:"geostory.mapEditor.zoom"})),i().createElement(pa.Z,{onChange:function(){var e=!l.zoomControl;o("zoomControl",e),o("mapOptions.interactions",{doubleClickZoom:e,shiftDragZoom:e,pinchZoom:e})},className:"ms-geostory-map-controls-switch",checked:l.zoomControl}),i().createElement(ma,{options:[{label:"geostory.mapEditor.topLeft",value:"topLeft"},{label:"geostory.mapEditor.topRight",value:"topRight"},{label:"geostory.mapEditor.bottomLeft",value:"bottomLeft"},{label:"geostory.mapEditor.bottomRight",value:"bottomRight"}],wrapperStyle:{marginTop:"10px"},value:l.mapOptions&&l.mapOptions.zoomPosition||"topLeft",clearable:!1,disabled:!l.zoomControl,onChange:function(e){return o("mapOptions.zoomPosition",e&&e.value?e.value:"topLeft")},placeholder:"geostory.builder.settings.titlePlaceholder"})),i().createElement(et.FormGroup,null,i().createElement(et.ControlLabel,null,i().createElement(lt.Z,{msgId:"geostory.mapEditor.pan"})),i().createElement(pa.Z,{onChange:function(){var e=!(l.mapOptions&&l.mapOptions.interactions&&l.mapOptions.interactions.dragPan);o("mapOptions.interactions",{dragPan:e,keyboardPan:e})},className:"ms-geostory-map-controls-switch",checked:l.mapOptions&&l.mapOptions.interactions&&l.mapOptions.interactions.dragPan})),i().createElement(et.FormGroup,null,i().createElement(et.ControlLabel,null,i().createElement(lt.Z,{msgId:"geostory.mapEditor.identify"})),i().createElement(pa.Z,{onChange:function(){var e=!l.mapInfoControl;o("mapInfoControl",e)},className:"ms-geostory-map-controls-switch",checked:l.mapInfoControl}),l.mapInfoControl&&!a.hideIdentifyOptions&&i().createElement(da.Z,{disabled:!l.mapInfoControl,popoverMessage:"geostory.builder.settings.templateTooltip",infoFormat:l.mapOptions&&l.mapOptions.mapInfoFormat||"application/json",onInfoFormatChange:function(e){return o("mapOptions.mapInfoFormat",e)},selectProps:{wrapperStyle:{marginTop:10}}})))};var va=n(616701),ga=(0,Re.withProps)((function(e){return{tabs:e.tabs||[{id:"toc",titleId:"geostory.mapEditor.toc",tooltipId:"geostory.mapEditor.toc",glyph:"1-layer",visible:!0,Component:va.Z},{id:"settings",titleId:"geostory.mapEditor.settings",tooltipId:"geostory.mapEditor.settings",glyph:"wrench",visible:!0,Component:ba}]}}));const ha=(0,Re.compose)((0,sa.Z)("activeTab","setActiveTab","toc"),ga);var Oa=(0,Re.compose)(ia.Z,(0,Re.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),(0,ra.Z)("title"))((function(e){var t=e.title,n=e.description;return i().createElement("div",{className:"text-center"},i().createElement("div",{className:"mapstore-step-title"},t),i().createElement("div",{className:"mapstore-step-description"},n))})),wa=(0,ia.Z)(oa.Z),Sa=ha((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tabs,n=void 0===t?[]:t,r=e.activeTab,o=(e.width,e.setActiveTab),a=void 0===o?function(){}:o,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ca);return i().createElement("div",{key:"ms-geostory-map-settings-navbar",className:"ms-row-tab"},i().createElement("div",null,i().createElement(et.Nav,{bsStyle:"tabs",activeKey:r,justified:!0},n.map((function(e){return i().createElement(ua,{key:"ms-tab-settings-"+e.id,tooltipId:e.tooltipId,eventKey:e.id,onClick:function(){return a(e.id)}},i().createElement(et.Glyphicon,{glyph:e.glyph}))})))),i().createElement("div",null,n.filter((function(e){return e.id&&e.id===r})).filter((function(e){return e.Component})).map((function(e){return i().createElement(e.Component,la({},c,{key:"ms-geostory-tab-settings-body-"+e.id}))}))))}));const ja=(0,Re.branch)((function(e){var t=e.focusedContent;return(void 0===t?{}:t).path}),(0,Re.compose)((0,Re.defaultProps)({isFocused:!0,editMap:!0}),Hi,qi,Ki,Yi,Qi,Xi,Ji))((function(e){var t=e.mode,n=void 0===t?f.nl.VIEW:t,r=e.isFocused,o=void 0!==r&&r,a=e.map,c=void 0===a?{}:a,l=e.onChange,u=void 0===l?function(){}:l,s=e.onChangeMap,p=void 0===s?function(){}:s,d=e.onNodeSelect,y=void 0===d?function(){}:d,m=e.selectedNodes,b=e.buttons,v=void 0===b?[]:b,g=e.editNode,h=e.closeNodeEditor,O=e.CloseBtn,w=void 0===O?function(){return null}:O,S=e.isDrawEnabled,j=e.hideIdentifyOptions;return n===f.nl.EDIT&&o?i().createElement("div",{key:"left-column",style:{order:-1,width:400,position:"relative"}},!S&&i().createElement(De.Z,{className:"ms-geostory-map-editor",header:i().createElement("div",{className:"ms-geostory-map-editor-header text-center"},i().createElement(et.Row,null,i().createElement(et.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},i().createElement(w,{glyph:"1-close",className:"pull-left on-close-btn square-button no-border ",tooltipId:"geostory.contentToolbar.closeMapEditing"}),i().createElement("div",{className:"mapstore-step-title"},i().createElement(lt.Z,{msgId:"geostory.mapEditor.configureMapOptions"})))),i().createElement(_t.Z,{transitionProps:!1,btnGroupProps:{className:"ms-geostory-map-editor-toolbar"},btnDefaultProps:{className:"square-button-md no-border",bsStyle:"primary",noTooltipWhenDisabled:!0},buttons:v}))},!!g&&[i().createElement(Oa,{map:c,editNode:g}),i().createElement(wa,{closeNodeEditor:h,editNode:g,map:c,onChange:u})]||[i().createElement(Sa,{map:c,onChange:u,onChangeMap:p,selectedNodes:m,onSelect:y,hideIdentifyOptions:j})])):null}));var Pa=n(264721),Ea=n.n(Pa),Ta=n(916788),Ca=n(437034),Ia=n(452826),Aa=n(624262);function ka(e){return ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ka(e)}function xa(){return xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xa.apply(this,arguments)}function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach((function(t){Ra(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ra(e,t,n){var r;return r=function(e,t){if("object"!=ka(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ka(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const La=function(e){var t=function(){return i().createElement("div",{className:"ms-media-error"},i().createElement(et.Glyphicon,{glyph:"exclamation-sign"}))},n=function(e){var t=e.style,n=void 0===t?{}:t;return i().createElement("div",{style:n,className:"ms-media-loader"},i().createElement(jt.Z,{size:52}))};return function(r){var o={},a=r.sectionType;if((a===f.ID.PARAGRAPH||a===f.ID.IMMERSIVE||a===f.ID.CAROUSEL)&&r.type===f.Tr.IMAGE){var c=((null==r?void 0:r.imgHeight)||9)/((null==r?void 0:r.imgWidth)||16)*100;o={paddingTop:"".concat(c,"%")}}return r.lazy?i().createElement(St,{key:r.loadingId,id:r.loadingId,debounceTime:r.debounceTime,loading:r.isLoading,onLoad:function(e){return r.onLoad(Ma(Ma({},r.loading),{},Ra({},e,!1)))},loaderComponent:n,loaderStyle:o},i().createElement(e,xa({},r,{type:r.type,loaderComponent:n,loaderStyle:o,errorComponent:t}))):i().createElement(e,xa({},r,{key:r.id,type:r.mediaType||r.type,loaderComponent:n,errorComponent:t}))}};var Na=n(507848),Za=n(819983),Ba=n(323010),Fa=["autoplay"],Ua=["type"];function Ga(e){return Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ga(e)}function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wa.apply(this,arguments)}function _a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Ga(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ga(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qa=(0,Re.branch)((function(e){return e.resourceId}),(0,Re.compose)((0,a.connect)((0,c.P1)(V.jq,(function(e){return{resources:e}}))),(0,Re.withProps)((function(e){var t=e.resources,n=e.resourceId;return(hn()(t,{id:n})||{}).data}))),(0,Ge.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==f.ID.TITLE&&!Ea()([f.ID.IMMERSIVE,f.ID.CAROUSEL],r)}),(function(){return{glyph:"picture"}})))(La(Ta.Z)),Ha=(0,Re.compose)((0,Re.branch)((function(e){return e.resourceId}),qi),(0,Re.withProps)((function(e){var t=e.map,n=void 0===t?{}:t;return{map:Va(Va({},n),{},{layers:n.layers&&n.layers.map((function(e){if(e.tileMatrixSet&&n.sources){var t=(0,Aa.gv)(n.sources,e);return Va(Va({},e),t)}return e}))})}})),Na.Z,Za.Z,ea,na,Ba.dV)(La(Ca.Z)),Ya={image:qa,map:Ha,video:(0,Re.branch)((function(e){return e.resourceId}),(0,Re.compose)((0,a.connect)((0,c.P1)(V.jq,(function(e){return{resources:e}}))),(0,Re.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.autoplay,o=(hn()(t,{id:n})||{}).data||{},i=o.autoplay;return Va(Va({},_a(o,Fa)),{},{autoplay:void 0!==r?r:i})}))),(0,Ge.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==f.ID.TITLE&&!Ea()([f.ID.IMMERSIVE,f.ID.CAROUSEL],r)}),(function(){return{glyph:"play"}})))(La(Ia.Z))};const Qa=function(e){var t=e.type,n=_a(e,Ua),r=Ya[t];return r?i().createElement(r,Wa({type:t},n)):null};var $a=["resources"];function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}const Ka=(0,a.connect)((0,c.P1)(V.jq,(function(e){return{resources:e}})))((function(e){var t=e.resources,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,$a);if(n.resourceId){var r=(hn()(t,{id:n.resourceId})||{}).data||{};return i().createElement(Kn,Xa({},r,n))}return i().createElement(Kn,n)}));var Ja=["story","mode","onAdd","messages","fontFamilies","storyFonts","webFont","onUpdate","onBasicError","onUpdateMediaEditorSetting","mediaEditorSettings"];function ec(){return ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ec.apply(this,arguments)}var tc=function(e){var t,n=e.story,r=e.mode,a=void 0===r?f.nl.VIEW:r,c=e.onAdd,l=e.messages,s=e.fontFamilies,d=void 0===s?[]:s,y=e.storyFonts,m=void 0===y?[]:y,b=e.webFont,v=void 0===b?u():b,g=e.onUpdate,h=void 0===g?function(){}:g,O=e.onBasicError,w=void 0===O?function(){}:O,S=e.onUpdateMediaEditorSetting,j=e.mediaEditorSettings,P=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ja),E=(0,o.useCallback)((function(e){return(0,p.S$)(l,e)}),[l]),T=function(e,t,n,r){return c(e,t,n,r?E(r):E)};return(0,o.useEffect)((function(){window.__geostory_interaction=function(e,t){"scrollTo"===e&&(0,f.M1)(t,{behavior:"smooth"})}}),[]),(0,o.useEffect)((function(){h("settings.theme.fontFamilies",d,"merge",{uniqueByKey:"family"}),j&&S(j)}),[]),(0,o.useEffect)((function(){m.length>0&&m.filter((function(e){var t=e.src;return t&&!document.head.querySelector("link[href='".concat(t,"']"))})).length>0&&v.load((0,f.bm)(m,(function(){}),(function(){return w({message:"geostory.builder.settings.webFontLoadError"})})))}),[m]),i().createElement(De.Z,{className:"ms-geostory",columns:[i().createElement(ja,ec({},P,{buttonItems:null===(t=P.items)||void 0===t?void 0:t.filter((function(e){return"mapEditorToolbar"===e.target})),add:T,update:h,mode:a,hideIdentifyOptions:P.hideIdentifyOptions}))]},i().createElement(Zi,ec({},n,P,{storyFonts:(0,f._R)(m),add:T,update:h,mode:a,mediaViewer:Qa,contentToolbar:Ka})))};tc.defaultProps={storyFonts:[],fontFamilies:[],onUpdateMediaEditorSetting:function(){}};const nc=(0,s.rx)("GeoStory",{component:(0,a.connect)((0,c.zB)({mode:V.eK,story:V.Kg,messages:ke.Ps,focusedContent:V.FW,isContentFocused:V.z7,theme:function(e){var t;return(null===(t=(0,V.TQ)(e))||void 0===t?void 0:t.theme)||{}},storyFonts:V.mm,isDrawEnabled:V.HB}),{onAdd:y.IH,onUpdate:y.Vx,updateCurrentPage:y.RZ,onUpdateSetting:y.m7,remove:y.Od,onSort:y.pB,editMedia:m.Ql,editWebPage:y.o2,onBasicError:d.d,onUpdateMediaEditorSetting:y.Fu,onEnableDraw:y.EE})(tc),reducers:{geostory:xe.Z},epics:r})},866113:(e,t,n)=>{"use strict";n.d(t,{$F:()=>P,eg:()=>E,Kg:()=>T,PR:()=>C,eK:()=>I,pu:()=>A,Lu:()=>x,W5:()=>D,TQ:()=>M,KR:()=>R,sY:()=>L,vv:()=>N,jq:()=>Z,Tr:()=>B,w:()=>F,CK:()=>U,u5:()=>G,z7:()=>W,FW:()=>_,GC:()=>z,yL:()=>V,_O:()=>H,JM:()=>Y,bU:()=>Q,mm:()=>$,X6:()=>X,NR:()=>K,I0:()=>J,eB:()=>ee,HB:()=>te});var r=n(227361),o=n.n(r),i=n(313311),a=n.n(i),c=n(630998),l=n.n(c),u=n(618446),s=n.n(u),f=n(944908),p=n.n(f),d=n(264721),y=n.n(d),m=n(192579),b=n(274621),v=n(324684);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){var r;return r=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==g(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){return function(t){return o()(t,(0,m.Ll)("geostory.currentStory.".concat(e),t),"")}},E=function(e){return o()(e,"geostory.isCollapsed",!1)},T=function(e){return o()(e,"geostory.currentStory")},C=function(e){return o()(e,"geostory.currentPage",{})},I=function(e){return o()(e,"geostory.mode")},A=function(e){return function(e){return o()(function(e){return o()(e,"geostory.resource")}(e),"canEdit",!1)}(e)||(0,b.qg)(e)},k=function(e){return o()(T(e),"sections",[])},x=function(e){return k(e).length>0},D=function(e){return o()(e,"geostory.isSettingsEnabled",!1)},M=function(e){var t=o()(T(e),"settings",{}),n=k(e).filter((function(e){var t=e.type;return y()([m.ID.CAROUSEL,m.ID.IMMERSIVE],t)})),r=t.checked||[],i=p()(r.map((function(e){return(0,m.Un)(n,e)})).filter((function(e){return e})));return S(S({},t),{},{expanded:i})},R=function(e){return!s()(o()(T(e),"settings",{}),function(e){return o()(e,"geostory.oldSettings",{})}(e))},L=function(e){return o()(e,"geostory.selectedCard","")},N=function(e){return function(t){return P("".concat(e,".resourceId"))(t)}},Z=function(e){return o()(T(e),"resources",[])},B=function(e){return function(t){return a()(Z(t),{id:e})}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withImmersiveSection,n=void 0!==t&&t,r=e.includeAlways,i=void 0===r||r;return function(e){var t=k(e),r=function(e){return o()(M(e),"checked",[]).reduce((function(e,t){return S(S({},e),{},j({},t,!0))}),{})}(e);return t.reduce((function(e,t){if(t.type===m.ID.TITLE&&(i||r[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.PARAGRAPH&&(i||r[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.BANNER&&(i||r[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.CAROUSEL&&(i||r[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.IMMERSIVE){var o=t.contents&&t.contents.reduce((function(e,t){return i||r[t.id]?[].concat(h(e),[S(S({},t),{},{sectionId:e.id})]):e}),[])||[];return n?[].concat(h(e),[t],h(o)):[].concat(h(e),h(o))}return e}),[])}},U=function(e){return F({includeAlways:!0})(e).length},G=function(e){var t=function(e){var t=C(e);return l()(F({includeAlways:!0})(e),{id:t.columns&&t.columns[t.sectionId]?t.columns[t.sectionId]:t.sectionId||""})}(e);return-1!==t?t:l()(F({includeAlways:!0})(e),{id:C(e).sectionId})},W=function(e){return void 0!==o()(e,"geostory.focusedContent.target")},_=function(e){return o()(e,"geostory.focusedContent")},z=function(e){return P(o()(e,"geostory.focusedContent.path",""))(e)},V=function(e){return k(e).reduce((function(e,t){if(y()([m.ID.IMMERSIVE,m.ID.CAROUSEL],t.type)){var n=t.contents&&t.contents.map((function(e){return{label:e.title||"",value:e.id}}))||[];return[].concat(h(e),[S({label:t.title||"",value:t.id},t.type===m.ID.IMMERSIVE&&{children:n})])}return[].concat(h(e),[{label:t.title||"",value:t.id}])}),[])},q=function e(t,n){var r=n.contents,o=n.background;return n.resourceId===t||!(!o||o.resourceId!==t)||!!r&&!!a()(r,(function(n){return e(t,n)}))},H=function(e,t){return!!a()(k(e),(function(e){return q(t,e)}))},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.F)(e).includes("geostory/shared")},Q=function(e){return o()(e,"geostory.updateUrlOnScroll",!1)},$=function(e){return o()(e,"geostory.currentStory.settings.theme.fontFamilies",[])},X=function(e){return o()(e,"geostory.mediaEditorSettings")},K=function(e){var t;return((null===(t=T(e))||void 0===t?void 0:t.sections)||[]).filter((function(e){return e.type===m.ID.CAROUSEL}))},J=function(e){return function(t){return!!a()(K(t),{id:e})}},ee=function(e){return function(t){var n=a()(K(t)||[],{id:e});return(null==n?void 0:n.contents)||[]}},te=function(e){var t;return!(null==e||null===(t=e.geostory)||void 0===t||!t.drawOptions)}},324684:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,y:()=>a});var r=n(227361),o=n.n(r),i=function(e){return o()(e,"router.location.pathname")||"/"},a=function(e){return o()(e,"router.location.search")||""}},274621:(e,t,n)=>{"use strict";n.d(t,{np:()=>r,L3:()=>o,jl:()=>i,y8:()=>a,qg:()=>c}),n(727418),n(227361);var r=function(e){return e&&e.security&&e.security.user},o=function(e){return r(e)&&r(e).role},i=function(e){return e&&e.security&&e.security.user},a=function(e){return e.security&&e.security.token},c=function(e){return"ADMIN"===o(e)}},192579:(e,t,n)=>{"use strict";n.d(t,{gg:()=>D,Ln:()=>M,ID:()=>R,bT:()=>L,tQ:()=>N,Tr:()=>Z,nl:()=>B,ZX:()=>F,lg:()=>U,w:()=>G,cy:()=>W,lt:()=>_,M1:()=>z,kn:()=>q,oH:()=>H,Aq:()=>Q,nq:()=>$,Ll:()=>X,ln:()=>K,Un:()=>J,NC:()=>ee,t4:()=>te,NP:()=>ne,bm:()=>re,_R:()=>oe,Km:()=>ie,of:()=>ae,u0:()=>ce,eI:()=>le,Yh:()=>ue,c0:()=>se});var r=n(227361),o=n.n(r),i=n(630998),a=n.n(i),c=n(30084),l=n.n(c),u=n(701469),s=n.n(u),f=n(252628),p=n.n(f),d=n(763105),y=n.n(d),m=n(682492),b=n.n(m),v=n(747037),g=n.n(v),h=n(513218),O=n.n(h),w=n(264721),S=n.n(w),j=n(313880),P=n.n(j),E=n(455877),T=n.n(E);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==C(a)?a:String(a))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D="EMPTY_CONTENT",M={CASCADE:"cascade"},R={TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner",CAROUSEL:"carousel"},L={TEXT:"text",MEDIA:"media",WEBPAGE:"webPage",COLUMN:"column"},N={MEDIA:"template-media",WEBPAGE:"template-web-page"},Z={IMAGE:"image",MAP:"map",VIDEO:"video"},B={EDIT:"edit",VIEW:"view"},F={SHOW_SAVE:"save.show",SHOW_DELETE:"delete.show",LOADING:"loading"},U={StoryTypes:p()(M),SectionTypes:p()(R),MediaTypes:p()(Z),Modes:p()(B)},G=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.align,o=void 0===r?"center":r,i=e.size,a=void 0===i?"full":i,c=(null==n?void 0:n.value)||g()(n)&&n,l=c&&"custom"!==c&&g()(c)&&" ms-".concat(c)||"",u=" ms-align-".concat(o),s=a.split(",").map((function(e){return" ms-size-".concat(e)})).join("");return"".concat(l).concat(u).concat(s)},W=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.storyTheme;if(""===n||""===(null==n?void 0:n.value))return O()(r)?r:{};var o=null==n?void 0:n.value,i=null==n?void 0:n[o];return O()(i)&&i||{}},_=function(e){return e.type===R.PARAGRAPH&&e&&s()(e.contents)&&e.contents.length&&s()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===L.MEDIA},z=function(e,t){var n=function(e){var t=e.split("?");return 2===t.length?t[0]:e}(e),r=document.getElementById(n);r&&r.scrollIntoView(t)},V={zoomControl:!0,mapInfoControl:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!0}}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b()({},V,e)},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b()({},e,t)},Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(t,"i");return!t||n.test(e)},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(t,"i");return y()(e,(function(e){return Y(e.data&&(e.data.title||e.data.name),t,n)||Y(e.data&&e.data.description,t,n)}))},$=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};switch(t){case R.TITLE:return{id:T()(),type:R.TITLE,title:n("geostory.builder.defaults.titleTitle"),cover:!1,contents:[{id:T()(),type:L.TEXT,html:"",size:"large",align:"center",theme:"",background:{fit:"cover",size:"full",align:"center"}}]};case R.BANNER:return{id:T()(),type:R.BANNER,title:n("geostory.builder.defaults.titleBanner"),cover:!1,contents:[{id:T()(),background:{fit:"cover",size:"full",align:"center"}}]};case R.PARAGRAPH:return{id:T()(),type:R.PARAGRAPH,title:n("geostory.builder.defaults.titleParagraph"),contents:[{id:T()(),type:L.COLUMN,size:"full",align:"center",contents:[{id:T()(),type:L.TEXT,html:""}]}]};case R.IMMERSIVE:return{id:T()(),type:R.IMMERSIVE,title:n("geostory.builder.defaults.titleImmersive"),contents:[e(L.COLUMN,n("geostory.builder.defaults.titleImmersiveContent"))]};case R.CAROUSEL:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleGeocarousel"),template:t,background:{fit:"cover",size:"full",align:"center"},contents:[e(L.COLUMN,n("geostory.builder.defaults.titleGeocarouselContent"))]};case N.MEDIA:return{id:T()(),type:R.PARAGRAPH,title:n("geostory.builder.defaults.titleMedia"),contents:[{id:T()(),type:L.COLUMN,contents:[{id:T()(),type:L.MEDIA,size:"large",align:"center"}]}]};case N.WEBPAGE:return{id:T()(),type:R.PARAGRAPH,title:n("geostory.builder.defaults.titleWebPageSection"),contents:[{id:T()(),type:L.COLUMN,contents:[{id:T()(),type:L.WEBPAGE,size:"h-medium,v-medium",align:"center"}]}]};case L.COLUMN:return{id:T()(),type:L.COLUMN,align:"left",size:"small",theme:"",title:n,contents:[{id:T()(),type:L.TEXT,html:""}],background:{fit:"cover",size:"full",align:"center"}};case L.TEXT:return{id:T()(),type:L.TEXT,title:n("geostory.builder.defaults.titleText"),html:""};case L.IMAGE:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleMedia"),size:"full",align:"center"};case L.WEBPAGE:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleWebPage"),size:"h-full,v-medium",align:"center"};case L.MEDIA:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleUnknown"),size:"large",align:"center"};default:return{id:T()(),type:t,title:n("geostory.builder.defaults.titleUnknown"),size:"full",align:"center"}}},X=function(e,t){return l()(e).reduce((function(e,n){if(n&&0===n.indexOf("{")){var r=JSON.parse(n),i=o()(t,e),c=a()(i,r);return c>=0?[].concat(k(e),[c]):e}return[].concat(k(e),[n])}),[])},K=function(e,t){return l()(e).reduce((function(e,n){var r=e.path,i=e.flatPath;if(n&&0===n.indexOf("{")){var c=JSON.parse(n),l=o()(t,r),u=a()(l,c);if(u>=0){var s=l[u],f=s.id,p=s.type;return{path:[].concat(k(r),[u]),flatPath:[].concat(k(i),[{id:f,type:r[r.length-1],contentType:p}])}}return{path:r,flatPath:i}}return{path:[].concat(k(r),[n]),flatPath:i}}),{path:[],flatPath:[]})},J=function(e,t){return e.reduce((function(e,n){return S()(n.contents.map((function(e){return e.id})),t)?n.id:e}),null)},ee=function(e){return e.type===R.PARAGRAPH&&!1!==e.editURL&&e&&s()(e.contents)&&e.contents.length&&s()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===L.WEBPAGE&&!1!==e.contents[0].contents[0].editURL},te=function(e,t){if(t)switch(e){case"small":return.4*t;case"medium":return.6*t;case"large":return.8*t;default:return t}return 0},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!t.includes(n))return null;var i=t.substring(t.indexOf(n)).split("/");return r&&n?i.length>1&&i[2]&&Number(i[0])===n?5===i.length?P()(e,"".concat(i[2],"/column/").concat(i[4]),"".concat(r)):P()(e,"".concat(i[2]),"".concat(r)):(t.includes("shared"),""!==i[1]?"".concat(e,"/section/").concat(r):"".concat(e,"section/").concat(r)):!r&&o&&g()(o)&&"EMPTY"!==o&&i.length>1?t.includes("shared")&&!i[2]?e:5===i.length?P()(e,"".concat(i[4]),"".concat(o)):"".concat(e,"/column/").concat(o):null},re=function(e,t,n){var r={active:t,inactive:n,custom:{families:[],urls:[]}};return e.filter((function(e){return!!e.src})).forEach((function(e,t){r.custom.families[t]=e.family,r.custom.urls[t]=e.src})),r},oe=function(e){return e.map((function(e){return e.family}))},ie=["inherit","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],ae=function(){return window.location.href.match("geostory-embedded")?"geostoryEmbedded":"geostory"},ce=function(e){var t=function(e){try{var t;return null===(t=JSON.parse(e))||void 0===t?void 0:t.id}catch(e){return null}},n=l()(e)||[];return{sectionId:t(null==n?void 0:n[1]),contentId:t(null==n?void 0:n[3]),innerContentId:t(null==n?void 0:n[5])}},le=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return e.sectionId===t.id?A(A({},t),{},{contents:(t.contents||[]).map((function(t){return A(A({},t),{},{hideContent:t.id!==e.showContentId})}))}):t}))};function ue(e){var t=e.id,n=e.contents,r=e.featureStyle;return A(A({visibility:!0,handleClickOnLayer:!0},e.layerOptions),{},{id:"geostory-vector-".concat(t),name:"geostory-vector-".concat(t),type:"vector",features:n.reduce((function(e,t,n){return[].concat(k(e),k(((null==t?void 0:t.features)||[]).map((function(e){return A(A({},e),{},{contentRefId:t.id},r&&{style:r({content:t,feature:e},n)})}))||[]))}),[]).reverse()})}var se=function(e,t,n,r,o){return A(A(A({},e),{},{iconText:"".concat(a()(t,(function(e){var t=e.id;return n.id===t}))+1)},o.style),{},{highlight:r===n.id})}},611847:(e,t,n)=>{"use strict";n.d(t,{ij:()=>v,w0:()=>g,vl:()=>h,K2:()=>O,Nw:()=>w});var r=n(472500),o=n.n(r),i=n(701469),a=n.n(i),c=n(747037),l=n.n(c),u=n(618446),s=n.n(u),f=n(189734),p=n.n(f),d=n(313311),y=n.n(d),m=n(964210);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),n=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var r=window.location;n[1]=r.protocol,n[3]=r.hostname,n[4]=r.port,n[5]=e}n[4]=""!==n[4]&&n[4]?n[4]:"https:"===n[1]?"443":"80",n[5]=n[5]?n[5]:e.slice(n[0].length);var o,i,a=(i=6,function(e){if(Array.isArray(e))return e}(o=n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(o,i)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[1],l=a[3],u=a[4],s=a[5],f=0===s.indexOf("/")?s.split("/")[1]:"";return{protocol:c,domain:l,port:u,rootPath:s,applicationRootPath:f}},g=function(e,t){var n=a()(e)?e[0]:e,r=a()(t)?t[0]:t;if(n===r)return!0;if(!n||!r)return!1;if(!l()(n)||!l()(r))return!1;var i=o().parse(n),c=o().parse(r),u=v(n),f=v(r),d=u.protocol===f.protocol,y=u.domain===f.domain,m=u.port===f.port,b=i.pathname===c.pathname,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var n=e?e.split("&").filter((function(e){return!!e})):[],r=t?t.split("&").filter((function(e){return!!e})):[];return s()(p()(n),p()(r))}(i.query,c.query);return d&&m&&y&&b&&g},h=function(e){return m.Qc(e)},O=function(e){return new RegExp(arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/).test(e)},w=function(e,t){var n=new RegExp(arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/).test(e);if(!n)return!1;if(n&&!t)return!0;if(n&&t){var r=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return y()(r,e)})).length}return!1}},161253:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".msgapi .toc-title {\r\n    display: inline-block;\r\n    max-width: 150px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n",""]);const i=o},683255:(e,t,n)=>{e.exports=n.p+"grid.svg"},911636:(e,t,n)=>{e.exports=n.p+"world.svg"},773723:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/geostory/contents/carousel/img/default.jpg"},875492:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"},51205:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII="},438097:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAYAAABqBU3hAAABIUlEQVRIS+3UsYoCMRDG8f8q+EBid5WNnc019la2Vr6Ala1g4SvY+RTXiVdcJQgHV9jJIdhKZCNx2GwyibCNW4bd+X47k6Sg4adoOJ83wNcBsz4CvoGfF4zpEzgCO1mrCmDWpsAC+Af6wD4DMQGWwBUYAF9uLQlww1vli+cMhA1vl7UuEuECqsItNgUhw22tJ4QLGANrwP657LoG4Qt3EV3g4ALMfLZAp2beMYhQuCn/B/SAk9wDQ2CTgYgN/wB+jaTqFKQi1OE+gFnXIpLC6wAaxAqYAfaoVW0hM/NH2+vuAflxTCdCd5Q3PNQBWzgHURseC4gdh+xEMFwD0CKiwrWAWER0eAoghFCFpwJ8CHV4DkAiksJzARYxL2/O+92ufW42SVMYbhcsEwAAAABJRU5ErkJgggAA"}}]);