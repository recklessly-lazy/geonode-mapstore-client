(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[41604],{80416:(e,t,n)=>{"use strict";n.d(t,{yS:()=>r,Zz:()=>o,ms:()=>i,ih:()=>u,OX:()=>a,sb:()=>l,K$:()=>f,k7:()=>s,cX:()=>p,x9:()=>y,vs:()=>m,oE:()=>d,Po:()=>b,qv:()=>v,cI:()=>O,g6:()=>g,I4:()=>E,l$:()=>S,Xv:()=>P,k3:()=>h,CQ:()=>A,R8:()=>T,HN:()=>j,sH:()=>_,c7:()=>w,_7:()=>R,eF:()=>N,O6:()=>L,ED:()=>D,RP:()=>C,sF:()=>I,VP:()=>M,He:()=>x,vO:()=>Y,WO:()=>k,bh:()=>U,pV:()=>Z,MK:()=>G,ZF:()=>H,tV:()=>V,Dv:()=>z,Yz:()=>F,kI:()=>J,XG:()=>W,A4:()=>X,Rp:()=>$,$o:()=>q,ct:()=>K,oh:()=>Q,$h:()=>B,ud:()=>ee,Qr:()=>te,LR:()=>ne,nN:()=>re,UG:()=>oe,F5:()=>ie,c9:()=>ue,Jh:()=>ce,Xy:()=>ae});var r="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",u="TOGGLE_NODE",c="CONTEXT_NODE",a="SORT_NODE",l="REMOVE_NODE",f="UPDATE_NODE",s="MOVE_NODE",p="LAYER_LOADING",y="LAYER_LOAD",m="LAYER_ERROR",d="ADD_LAYER",b="ADD_GROUP",v="REMOVE_LAYER",O="SHOW_SETTINGS",g="HIDE_SETTINGS",E="UPDATE_SETTINGS",S="REFRESH_LAYERS",P="LAYERS:UPDATE_LAYERS_DIMENSION",h="LAYERS_REFRESHED",A="LAYERS_REFRESH_ERROR",T="LAYERS:BROWSE_DATA",j="LAYERS:DOWNLOAD",_="LAYERS:CLEAR_LAYERS",w="LAYERS:SELECT_NODE",R="LAYERS:FILTER_LAYERS",N="LAYERS:SHOW_LAYER_METADATA",L="LAYERS:HIDE_LAYER_METADATA",D="LAYERS:UPDATE_SETTINGS_PARAMS";function C(e,t,n){return{type:O,node:e,nodeType:t,options:n}}function I(){return{type:g}}function M(e){return{type:E,options:e}}function x(e,t){return{type:r,newProperties:t,layer:e}}function Y(e,t){return{type:o,layer:e,params:t}}function k(e,t){return{type:i,newProperties:t,group:e}}function U(e,t,n){return{type:u,node:e,nodeType:t,status:!n}}function Z(e){return{type:c,node:e}}function G(e,t){return{type:a,node:e,order:t,sortLayers:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}function H(e,t){return{type:l,node:e,nodeType:t,removeEmpty:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function V(e,t,n){return{type:f,node:e,nodeType:t,options:n}}function z(e,t,n){return{type:s,node:e,groupId:t,index:n}}function F(e){return{type:p,layerId:e}}function J(e,t){return{type:y,layerId:e,error:t}}function W(e,t,n){return{type:m,layerId:e,tilesCount:t,tilesErrorCount:n}}function X(e){return{type:d,layer:e,foreground:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function $(e,t,n){return{type:b,group:e,parent:t,options:n}}function q(e){return{type:v,layerId:e}}function K(e,t){return{type:r,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function Q(e){return{type:h,layers:e}}function B(e,t){return{type:A,layers:e,error:t}}function ee(e,t,n,r){return{type:P,dimension:e,value:t,options:n,layers:r}}function te(e){return{type:T,layer:e}}function ne(e){return{type:j,layer:e}}function re(){return{type:_}}function oe(e,t,n){return{type:w,id:e,nodeType:t,ctrlKey:n}}function ie(e){return{type:R,text:e}}function ue(e,t){return{type:N,metadataRecord:e,maskLoading:t}}function ce(){return{type:L}}function ae(e,t){return{type:D,newParams:e,update:t}}},1550:(e,t,n)=>{"use strict";n.d(t,{pP:()=>r,TR:()=>o,N7:()=>i,mq:()=>u,uv:()=>c,Qy:()=>a,IL:()=>l,Li:()=>f,OW:()=>s,ZO:()=>p,Um:()=>y,TF:()=>m,Ls:()=>d,Ec:()=>b,Eu:()=>v,JJ:()=>O,nZ:()=>g,YD:()=>E,GI:()=>S,Jb:()=>P,Uh:()=>h,e$:()=>A,eh:()=>T,$j:()=>j,bJ:()=>_,Mk:()=>w,xy:()=>R,o6:()=>N,FP:()=>L,Mo:()=>D,sO:()=>C,Px:()=>I,hd:()=>M,Ju:()=>x,BV:()=>Y,SO:()=>k,H0:()=>U,$X:()=>Z,ou:()=>G,NE:()=>H,Lq:()=>V,aN:()=>z});var r="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",u="CHANGE_ZOOM_LVL",c="PAN_TO",a="ZOOM_TO_EXTENT",l="ZOOM_TO_POINT",f="CHANGE_MAP_CRS",s="CHANGE_MAP_SCALES",p="CHANGE_MAP_STYLE",y="CHANGE_ROTATION",m="CREATION_ERROR_LAYER",d="UPDATE_VERSION",b="INIT_MAP",v="RESIZE_MAP",O="CHANGE_MAP_LIMITS",g="SET_MAP_RESOLUTIONS",E="REGISTER_EVENT_LISTENER",S="UNREGISTER_EVENT_LISTENER",P="MOUSE_MOVE",h="MOUSE_OUT",A="MAP:MAP_PLUGIN_LOAD",T="MAP:ORIENTATION",j="MAP:UPDATE_MAP_VIEW",_="MAP:UPDATE_MAP_OPTIONS";function w(e,t,n,r){return{type:A,mapType:t,loading:e,loaded:n,error:r}}function R(e,t,n){return{type:l,pos:e,zoom:t,crs:n}}function N(e,t,n,o,i,u,c,a){return{type:r,center:e,zoom:t,bbox:n,size:o,mapStateSource:i,projection:u,viewerOptions:c,resolution:a}}function L(e,t){return{type:o,point:e,layer:t}}function D(e){return{type:i,pointer:e}}function C(e,t){return{type:u,zoom:e,mapStateSource:t}}function I(e,t,n,r){return{type:a,extent:e,crs:t,maxZoom:n,options:r}}function M(e,t){return{type:p,style:e,mapStateSource:t}}function x(){return{type:v}}function Y(e){var t=e.restrictedExtent,n=e.crs,r=e.minZoom;return{type:O,restrictedExtent:t,crs:n,minZoom:r}}function k(e){return{type:g,resolutions:e}}var U=function(e,t){return{type:E,eventName:e,toolName:t}},Z=function(e,t){return{type:S,eventName:e,toolName:t}},G=function(e){return{type:P,position:e}},H=function(){return{type:h}},V=function(e){return{type:T,orientation:e}},z=function(e){return{type:_,configUpdate:e}}},62520:(e,t,n)=>{"use strict";n.d(t,{dn:()=>r,NS:()=>o,Kn:()=>i,FV:()=>u,Vd:()=>c,yS:()=>a});var r="MAP_LAYOUT:UPDATE_MAP_LAYOUT",o="MAP_LAYOUT:UPDATE_DOCK_PANELS",i="MAP_LAYOUT:FORCE_UPDATE_MAP_LAYOUT";function u(e){return{type:r,layout:e}}function c(e){return{type:o,name:e,action:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",location:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right"}}function a(){return{type:i}}},32425:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(75263),o=n.n(r),i=n(24852),u=n.n(i);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){var r,o,i,u;r=e,o=t,i=n[t],u=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(u)?u:String(u))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return e>100?"full":e>40?"medium":"small"},s=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,i=e.hidden;return u().createElement("div",{className:o,style:l({width:t,height:t,overflow:"hidden"},r)},!i&&u().createElement("div",{className:"mapstore-".concat(f(t),"-size-loader")}))};s.propTypes={size:o().number,className:o().string,style:o().object};const p=s},93451:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(86638),o=n(75263),i=n.n(o),u=n(84596),c=n.n(u),a=n(1469),l=n.n(a),f=n(14293),s=n.n(f),p=n(47037),y=n.n(p),m=n(67076),d=["messages"];function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){var r;return r=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==b(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,m.compose)((0,m.getContext)({messages:i().object}),(0,m.mapProps)((function(n){var o=n.messages,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,d);return O(O({},i),c()(e).reduce(function(e,t,n){return function(){var o=arguments.length>1?arguments[1]:void 0;return O(O({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},g({},o,e[o]&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(l()(t))return t.map((function(o){var i=(0,r.S$)(e,o[n]||y()(o)&&o||"");return O(O({},o),{},g({},n,s()(i)?t:i))}));var o=(0,r.S$)(e,t);return s()(o)?t:o}(t,e[o],n)))}}(i,o,t),{}))})))}},97111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(24852),o=n.n(r),i=n(75263),u=n.n(i),c=n(23279),a=n.n(c);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){var r;return r=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==l(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const m=function(e,t){return function(n){function i(i){var u,c,l=(0,r.useRef)(),f=(u=(0,r.useState)(i[t]),c=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(u,c)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(u,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],d=f[1],b=(0,r.useRef)();b.current=m,(0,r.useEffect)((function(){b.current!==i[t]&&d(i[t])}),[i[t]]),(0,r.useEffect)((function(){return l.current=a()((function(t){var n=t.newProps,r=t.newValue;n[e](r)}),i.debounceTime),function(){l.current.cancel()}}),[i.debounceTime]);var v=s(s({},i),{},p(p({},t,m),e,(function(e){d(e),l.current&&(l.current.cancel(),l.current({newProps:i,newValue:e}))})));return o().createElement(n,v)}return i.propTypes={debounceTime:u().number},i.defaultProps={debounceTime:300},i.displayName=n.displayName+"WithDebounceOnCallback",i}}},55105:(e,t,n)=>{"use strict";n.d(t,{Ss:()=>m,Nr:()=>d,ic:()=>v,Jz:()=>O,VM:()=>g,CF:()=>E,Ju:()=>S});var r=n(91175),o=n.n(r),i=n(88306),u=n.n(i),c=n(827),a=n(52259),l=n(37275);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){var r;return r=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==f(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){return e.maplayout&&e.maplayout.layout||{}},d=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},b=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},v=u()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m(e),o=b(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){var i;return p(p({},e),{},y({},t,n&&null!==(i=o[t])&&void 0!==i?i:r[t]))}),{})||{}}),(function(e,t,n){return JSON.stringify(m(e))+JSON.stringify(b(e))+JSON.stringify(t)+(n?"_isDock":"")})),O=function(e){var t;return!(null===(t=m(e))||void 0===t||!t.rightPanel)},g=function(e){var t,n=l.ZP.getConfigProp("mapLayout")||a.DEFAULT_MAP_LAYOUT;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=m(e);return!!o()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==n?void 0:n.bottom.sm)&&void 0!==t?t:0,type:"not"}])},E=function(e){var t=(0,c.Od)(e),n=d(e);return n&&t&&t.size&&{left:(0,a.parseLayoutValue)(n.left,t.size.width),bottom:(0,a.parseLayoutValue)(n.bottom,t.size.height),right:(0,a.parseLayoutValue)(n.right,t.size.width),top:(0,a.parseLayoutValue)(n.top,t.size.height)}},S=function(e){var t,n;return null!==(t=null==e||null===(n=e.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==t?t:{left:[],right:[]}}},97610:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(24852);const o=function(e){var t=e.scrollContainer,n=e.shouldScroll,o=void 0===n?function(){return!0}:n,i=e.onLoad,u=e.offset,c=void 0===u?200:u,a=(0,r.useRef)({});a.current=function(){(t?t.scrollTop:document.body.scrollTop||document.documentElement.scrollTop)+(t?t.clientHeight:window.innerHeight)>=(t?t.scrollHeight:document.body.scrollHeight||document.documentElement.scrollHeight)-c&&o()&&i()},(0,r.useEffect)((function(){var e=t||window;function n(){a.current()}return e.addEventListener("scroll",n),function(){e.removeEventListener("scroll",n)}}),[t])}},11409:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>J});var r=n(24852),o=n.n(r),i=n(75263),u=n.n(i),c=n(22843),a=n(71703),l=n(80681),f=n(22222),s=n(5346),p=n(3744),y=n(82021),m=n(97610),d=n(37326),b=n(17594),v=n(51605),O=n(35721),g=n(80416),E=n(1550),S=n(82904),P=n(32425),h=n(62520),A=n(55105),T=n(37275),j=n(26735);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){var r,o,i,u;r=e,o=t,i=n[t],u=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==_(u)?u:String(u))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const N={gnUpdateDatasetsCatalogMapLayout:function(e,t){return e.ofType(h.dn,S.At).filter((function(){var e,n,r;return null===(e=t.getState())||void 0===e||null===(n=e.controls)||void 0===n||null===(r=n.datasetsCatalog)||void 0===r?void 0:r.enabled})).filter((function(e){return e.source!==j.O.PANEL})).map((function(e){var n=e.layout,r=(0,T.u8)("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}},o=(0,h.FV)(R(R(R({},(0,A.Ss)(t.getState())),n),{},{right:r.right.md,boundingMapRect:R(R({},(null==n?void 0:n.boundingMapRect)||{}),{},{right:r.right.md})}));return R(R({},o),{},{source:j.O.PANEL})}))}};var L=n(97111),D=n(93451),C=["onChange","value"],I=["enabled"];function M(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U.apply(this,arguments)}function Z(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var G=(0,D.Z)("placeholder")(l.FormControl),H=(0,L.Z)("onChange","value")((function(e){var t=e.onChange,n=e.value,r=Z(e,C);return o().createElement(G,U({},r,{value:n,onChange:function(e){return t(e.target.value)}}))}));function V(e){var t=e.request,n=e.responseToEntries,i=e.pageSize,u=e.style,c=e.placeholderId,a=e.onAdd,f=e.onClose,d=e.onZoomTo,g=(0,r.useRef)(),E=x((0,r.useState)([]),2),S=E[0],h=E[1],A=x((0,r.useState)(!1),2),T=A[0],j=A[1],_=x((0,r.useState)(1),2),w=_[0],R=_[1],N=x((0,r.useState)(!1),2),L=N[0],D=N[1],C=x((0,r.useState)(""),2),I=C[0],Y=C[1],k=(0,r.useRef)();(0,m.Z)({scrollContainer:g.current,shouldScroll:function(){return!T&&L},onLoad:function(){R(w+1)}});var U=(0,r.useRef)();return U.current=function(e){!T&&t&&(g.current&&e.reset&&(g.current.scrollTop=0),j(!0),t({q:I,page:e.page,pageSize:i}).then((function(t){if(k.current){var r=n(t);D(t.isNextPageAvailable),h(1===e.page?r:[].concat(M(S),M(r))),j(!1)}})).catch((function(){k.current&&j(!1)})))},(0,r.useEffect)((function(){return k.current=!0,function(){k.current=!1}}),[]),(0,r.useEffect)((function(){w>1&&U.current({page:w})}),[w]),(0,r.useEffect)((function(){R(1),U.current({page:1,reset:!0})}),[I]),o().createElement("div",{className:"gn-datasets-catalog",style:u},o().createElement("div",{className:"gn-datasets-catalog-head"},o().createElement("div",{className:"gn-datasets-catalog-title"},o().createElement(s.Z,{msgId:"gnviewer.datasetsCatalogTitle"})),o().createElement(p.Z,{className:"square-button",onClick:function(){return f()}},o().createElement(l.Glyphicon,{glyph:"1-close"}))),o().createElement("div",{className:"gn-datasets-catalog-filter"},o().createElement(H,{placeholder:c,value:I,debounceTime:300,onChange:function(e){return Y(e)}}),I&&!T&&o().createElement(p.Z,{onClick:function(){return Y("")}},o().createElement(b.Z,{name:"times"})),T&&o().createElement(v.Z,null)),o().createElement("div",{ref:g,className:"gn-datasets-catalog-body"},o().createElement("ul",{className:"gn-datasets-catalog-list"},S.map((function(e){return o().createElement("li",{key:e.pk},o().createElement(y.Z,{data:e,readOnly:!0,layoutCardsStyle:"list",onClick:function(){return function(e){var t,n,r=(0,O.tA)(e);a(r);var o,i=(null==r||null===(t=r.bbox)||void 0===t?void 0:t.bounds)||{},u=i.minx,c=i.miny,l=i.maxx,f=i.maxy,s=(null==r||null===(n=r.bbox)||void 0===n?void 0:n.bounds)&&[u,c,l,f];s&&d(s,null==r||null===(o=r.bbox)||void 0===o?void 0:o.crs)}(e)}}))})),0===S.length&&!T&&o().createElement("div",{className:"gn-datasets-catalog-alert"},o().createElement(s.Z,{msgId:"gnviewer.datasetsCatalogEntriesNoResults"})))),T&&0===S.length&&o().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},o().createElement(P.Z,{size:70})))}V.propTypes={request:u().func,responseToEntries:u().func,pageSize:u().number,onAdd:u().func,placeholderId:u().string,onClose:u().func,onZoomTo:u().func},V.defaultProps={request:d.EX,responseToEntries:function(e){return e.resources},pageSize:10,onAdd:function(){},placeholderId:"gnviewer.datasetsCatalogFilterPlaceholder",onZoomTo:function(){},onClose:function(){}};var z=(0,a.connect)((0,f.P1)([function(e){return(0,A.ic)(e,{height:!0})},function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.datasetsCatalog)||void 0===n?void 0:n.enabled}],(function(e,t){return{style:e,enabled:t}})),{onAdd:g.A4,onClose:S.Xg.bind(null,"datasetsCatalog","enabled",!1),onZoomTo:E.Px})((function(e){var t=e.enabled,n=Z(e,I);return t?o().createElement(V,n):null})),F=(0,a.connect)((0,f.P1)([],(function(){return{}})),{onClick:S.Xg.bind(null,"datasetsCatalog","enabled",!0)})((function(e){var t=e.onClick,n=e.size,r=e.variant;return o().createElement(p.Z,{size:n,onClick:function(){t()},variant:r},o().createElement(s.Z,{msgId:"gnviewer.addLayer"}))}));const J=(0,c.rx)("DatasetsCatalog",{component:z,containers:{ActionNavbar:{name:"DatasetsCatalog",Component:F}},epics:N,reducers:{}})},26735:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var r={PANEL:"PANEL"}},23279:(e,t,n)=>{var r=n(13218),o=n(7771),i=n(14841),u=Math.max,c=Math.min;e.exports=function(e,t,n){var a,l,f,s,p,y,m=0,d=!1,b=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function O(t){var n=a,r=l;return a=l=void 0,m=t,s=e.apply(r,n)}function g(e){var n=e-y;return void 0===y||n>=t||n<0||b&&e-m>=f}function E(){var e=o();if(g(e))return S(e);p=setTimeout(E,function(e){var n=t-(e-y);return b?c(n,f-(e-m)):n}(e))}function S(e){return p=void 0,v&&a?O(e):(a=l=void 0,s)}function P(){var e=o(),n=g(e);if(a=arguments,l=this,y=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(E,t),d?O(e):s}(y);if(b)return clearTimeout(p),p=setTimeout(E,t),O(y)}return void 0===p&&(p=setTimeout(E,t)),s}return t=i(t)||0,r(n)&&(d=!!n.leading,f=(b="maxWait"in n)?u(i(n.maxWait)||0,t):f,v="trailing"in n?!!n.trailing:v),P.cancel=function(){void 0!==p&&clearTimeout(p),m=0,a=y=l=p=void 0},P.flush=function(){return void 0===p?s:S(o())},P}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}}}]);